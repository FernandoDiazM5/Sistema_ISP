// Helper para obtener variables de entorno (PlanesFiwis approach)
// EVALUACIÓN LAZY: Se ejecuta cuando se accede a la propiedad, no cuando se importa el módulo
const getEnvVar = (key, viteFallback = '') => {
  let value = '';
  // 1. Prioridad: window.ENV_CONFIG (inyectado explícitamente en el HTML en algunos setups)
  if (typeof window !== 'undefined' && window.ENV_CONFIG && window.ENV_CONFIG[key]) {
    value = window.ENV_CONFIG[key];
  }
  // 2. Fallback: localStorage (configuración manual temporal del usuario)
  else if (typeof window !== 'undefined') {
    const localKey = `isp_${key.toLowerCase()}`;
    const localValue = localStorage.getItem(localKey);
    if (localValue) value = localValue;
  }
  // 3. Fallback final: variables de entorno de Vite (desarrollo local o inyectadas en CI/CD pipeline)
  // Vite REQUIERE referencias estáticas de la forma import.meta.env.VITE_CLAVE_EXACTA.
  if (!value) {
    value = viteFallback;
  }
  return value ? value.trim() : '';
};

// USANDO GETTERS PARA EVALUACIÓN LAZY (se evalúa cuando se accede, no cuando se importa)
export const CONFIG = {
  // Google Sheets API
  get GOOGLE_API_KEY() { return getEnvVar('GOOGLE_API_KEY', import.meta.env.VITE_GOOGLE_API_KEY); },
  get GOOGLE_CLIENT_ID() { return getEnvVar('GOOGLE_CLIENT_ID', import.meta.env.VITE_GOOGLE_CLIENT_ID); },
  get GOOGLE_SHEET_ID() { return getEnvVar('GOOGLE_SHEET_ID', import.meta.env.VITE_GOOGLE_SHEET_ID); },
  SHEET_NAME: 'Sheet1',
  AUTH_SHEET: 'tb_Usuarios_Auth',

  // Gemini AI
  get GEMINI_API_KEY() { return getEnvVar('GEMINI_API_KEY', import.meta.env.VITE_GEMINI_API_KEY); },

  // Firebase
  FIREBASE: {
    get apiKey() { return getEnvVar('FIREBASE_API_KEY', import.meta.env.VITE_FIREBASE_API_KEY); },
    get authDomain() { return getEnvVar('FIREBASE_AUTH_DOMAIN', import.meta.env.VITE_FIREBASE_AUTH_DOMAIN); },
    get projectId() { return getEnvVar('FIREBASE_PROJECT_ID', import.meta.env.VITE_FIREBASE_PROJECT_ID); },
    get storageBucket() { return getEnvVar('FIREBASE_STORAGE_BUCKET', import.meta.env.VITE_FIREBASE_STORAGE_BUCKET); },
    get messagingSenderId() { return getEnvVar('FIREBASE_MESSAGING_SENDER_ID', import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID); },
    get appId() { return getEnvVar('FIREBASE_APP_ID', import.meta.env.VITE_FIREBASE_APP_ID); },
  },
};

// DEMO_RAW_DATA usa únicamente nombres, teléfonos, DNIs y MACs ficticios.
// No contiene información personal real de clientes.
export const DEMO_RAW_DATA = [
  { B: "000001", C: "CLIENTE DEMO UNO ACTIVO", D: "AA:BB:CC:DD:EE:01", E: "192.168.30.5", H: "22/01/2026", I: 4, K: "MZA1 LT1 ZONA DEMO", O: 21, Q: "25MBX40", S: "PLAN ANTENA 25MB S/40 v1", T: "21/02/2026", U: "900000001", V: "S/. 0.00", X: "PLA1/ND2", Y: "05/01/2024", Z: "00000001", AC: "demo01", AF: "S/. 40.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000002", C: "CLIENTE DEMO DOS ACTIVO", D: "AA:BB:CC:DD:EE:02", E: "192.168.30.20", H: "02/02/2026", I: 4, K: "MZA1 LT2 ZONA DEMO", O: 27, Q: "45MBX50", S: "PLAN FIBRA 45MB S/50 v1", T: "27/02/2026", U: "900000002", V: "S/. 0.00", X: "PLA1/ND2", Y: "05/01/2024", Z: "00000002", AC: "demo02", AF: "S/. 50.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000003", C: "CLIENTE DEMO TRES ACTIVO", E: "192.168.0.111", H: "04/02/2026", I: 4, K: "MZA1 LT3 ZONA DEMO", O: 4, Q: "ROU.VSOL DBANDA CTV", S: "PLAN OPCIONAL 35MB S/40", T: "04/02/2026", U: "900000003", V: "S/. 0.00", X: "DIXON OLT/FIBRA", Y: "05/01/2024", Z: "00000003", AC: "demo03", AF: "S/. 40.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000004", C: "CLIENTE DEMO CUATRO ACTIVO", D: "AA:BB:CC:DD:EE:04", E: "192.168.30.64", H: "23/01/2026", K: "MZA1 LT4 ZONA DEMO", O: 1, Q: "45MBX50", S: "PLAN FIBRA 65MB S/60 v1", T: "01/02/2026", U: "900000004", V: "S/. 0.00", X: "PLA1/ND2", Z: "00000004", AC: "demo04", AF: "S/. 50.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000005", C: "CLIENTE DEMO CINCO ACTIVO", D: "AA:BB:CC:DD:EE:05", E: "192.168.30.72", H: "15/01/2026", K: "MZA1 LT5 ZONA DEMO", O: 8, P: "1 S/. 100.00", Q: "BOLETA MENSUAL NO AD", S: "PLAN ANTENA 100MB S/100 v1", T: "08/02/2026", U: "900000005", V: "S/. 0.00", X: "PLA1/ND2", Z: "00000005", AC: "demo05", AF: "S/. 100.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000006", C: "CLIENTE DEMO SEIS ACTIVO", D: "AA:BB:CC:DD:EE:06", E: "192.168.30.91", H: "17/01/2026", K: "MZA1 LT6 ZONA DEMO", O: 1, S: "PLAN ANTENA 65MB S/70 v1", T: "01/02/2026", U: "900000006", X: "PLA1/ND2", Z: "00000006", AC: "demo06", AF: "S/. 70.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000007", C: "CLIENTE DEMO SIETE ACTIVO", D: "AA:BB:CC:DD:EE:07", E: "192.168.30.76", H: "07/01/2026", K: "MZA1 LT7 ZONA DEMO", O: 3, P: "1 S/. 85.00", S: "PLAN ANTENA 65MB S/70 v1", T: "03/02/2026", U: "900000007", X: "PLA1/ND2", Z: "00000007", AC: "demo07", AF: "S/. 70.00", AG: "DEMO CIUDAD", AH: "OFFLINE", AI: "1TV-15 (S/. 15.00)" },
  { B: "000008", C: "CLIENTE DEMO OCHO ACTIVO", D: "AA:BB:CC:DD:EE:08", E: "192.168.30.79", H: "01/02/2026", K: "MZA1 LT8 ZONA DEMO", O: 3, S: "PLAN ANTENA 100MB S/90 v1", U: "900000008", X: "PLA1/ND2", Z: "00000008", AC: "demo08", AF: "S/. 90.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000009", C: "CLIENTE DEMO NUEVE ACTIVO", D: "AA:BB:CC:DD:EE:09", E: "192.168.30.96", H: "30/01/2026", K: "MZA1 LT9 ZONA DEMO", O: 1, S: "PLAN ANTENA 45MB S/50 v2", U: "900000009", X: "PLA1/ND2", Z: "00000009", AF: "S/. 50.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000010", C: "CLIENTE DEMO DIEZ ACTIVO", D: "AA:BB:CC:DD:EE:10", E: "192.168.30.122", H: "03/12/2025", K: "MZA1 LT10 ZONA DEMO", O: 1, S: "PLAN FIBRA 25MB S/40 v1", U: "900000010", X: "PLA1/ND2", Z: "00000010", AF: "S/. 40.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000011", C: "CLIENTE DEMO ONCE ACTIVO", D: "AA:BB:CC:DD:EE:11", E: "192.168.30.155", H: "27/11/2025", K: "MZA2 LT1 ZONA DEMO", O: 27, S: "PLAN ANTENA 45MB S/50 v2", U: "900000011", X: "PLA1/ND2", Z: "00000011", AF: "S/. 50.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000012", C: "CLIENTE DEMO DOCE ACTIVO", E: "192.168.0.33", H: "05/12/2025", K: "MZA2 LT2 ZONA DEMO", O: 1, Q: "ANTENA M5-100MB", S: "PLAN FIBRA 100MB S/40", U: "900000012", X: "DIXON OLT/FIBRA", AF: "S/. 40.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000013", C: "CLIENTE DEMO TRECE ACTIVO", E: "10.71.100.73", H: "07/12/2025", K: "MZA2 LT3 ZONA DEMO", O: 1, Q: "MIGRACION FIBRA", S: "PLAN FIBRA 200MB S/40", U: "900000013", X: "DIXON OLT/FIBRA", Z: "00000013", AF: "S/. 40.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000014", C: "CLIENTE DEMO CATORCE ACTIVO", D: "AA:BB:CC:DD:EE:14", E: "192.168.30.103", H: "07/12/2025", K: "MZA2 LT4 ZONA DEMO", O: 1, S: "PLAN ANTENA 65MB S/80 v1", U: "900000014", X: "PLA1/ND2", Z: "00000014", AF: "S/. 80.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000015", C: "CLIENTE DEMO QUINCE ACTIVO", D: "AA:BB:CC:DD:EE:15", E: "192.168.30.150", H: "09/12/2025", K: "MZA2 LT5 ZONA DEMO", O: 1, S: "PLAN FIBRA 45MB S/50 v1", U: "900000015", X: "PLA1/ND2", Z: "00000015", AF: "S/. 50.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000016", C: "CLIENTE DEMO DIECISEIS ACTIVO", E: "10.70.100.97", H: "26/11/2025", K: "MZA2 LT6 ZONA DEMO", O: 20, P: "1 S/. 60.00", S: "PLAN 1CTV FIBRA 300MB S/50", U: "900000016", X: "OLT ADMIN HUWEI FICUS 2016/VEMAX", Z: "00000016", AF: "S/. 60.00", AG: "DEMO CIUDAD", AH: "OFFLINE", AI: "TV CABLE (S/. 10.00)" },
  { B: "000017", C: "CLIENTE DEMO DIECISIETE ACTIVO", D: "AA:BB:CC:DD:EE:17", E: "192.168.30.113", H: "21/11/2025", K: "MZA2 LT7 ZONA DEMO", O: 20, P: "1 S/. 40.00", S: "PLAN ANTENA 25MB S/40 v1", U: "900000017", X: "PLA1/ND2", Z: "00000017", AF: "S/. 40.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000018", C: "CLIENTE DEMO DIECIOCHO ACTIVO", D: "AA:BB:CC:DD:EE:18", E: "10.72.100.76", H: "03/12/2025", K: "MZA2 LT8 ZONA DEMO", O: 1, S: "PLAN FIBRA 100MB S/90 v1", U: "900000018", X: "ADMIN/PLAN3/CCRR1036-VEMAX", Z: "00000018", AF: "S/. 80.00", AG: "DEMO CIUDAD", AH: "ONLINE", AI: "TV CABLE (S/. 10.00)" },
  { B: "000019", C: "CLIENTE DEMO DIECINUEVE ACTIVO", D: "AA:BB:CC:DD:EE:19", E: "10.72.100.28", H: "04/12/2025", K: "MZA2 LT9 ZONA DEMO", O: 1, S: "PLAN ANTENA 25MB S/40 v1", U: "900000019", X: "ADMIN/PLAN3/CCRR1036-VEMAX", Z: "00000019", AF: "S/. 40.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000020", C: "CLIENTE DEMO VEINTE SUSPENDIDO", E: "192.168.30.200", K: "MZA3 LT1 ZONA DEMO", O: 15, P: "1 S/. 50.00", S: "CORTE POR DEUDA", U: "900000020", X: "VERONICA/ND1", AF: "S/. -0.01", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000021", C: "CLIENTE DEMO VEINTIUNO ACTIVO", E: "10.72.100.45", H: "01/02/2026", K: "MZA3 LT2 ZONA DEMO", O: 5, S: "PLAN FIBRA GPON 2026/200MB-S/40", U: "900000021", X: "OLT ADMIN HUWEI FICUS 2016/VEMAX", Z: "00000021", AF: "S/. 40.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000022", C: "CLIENTE DEMO VEINTIDOS ACTIVO", D: "AA:BB:CC:DD:EE:22", E: "192.168.30.180", H: "28/01/2026", K: "MZA3 LT3 ZONA DEMO", O: 10, S: "PLAN ANTENA 2026/75MB-S/60", U: "900000022", X: "HUASACA/ND1", Z: "00000022", AF: "S/. 60.00", AG: "DEMO CIUDAD", AH: "ONLINE", AI: "TV BASICO (S/. 20.00)" },
  { B: "000023", C: "CLIENTE DEMO VEINTITRES ACTIVO", E: "10.71.100.88", H: "05/02/2026", K: "MZA3 LT4 ZONA DEMO", O: 8, S: "PLAN FIBRA 300MB S/50", U: "900000023", X: "DIXON OLT/FIBRA", Z: "00000023", AF: "S/. 50.00", AG: "DEMO CIUDAD", AH: "ONLINE", AI: "1CTV GRATIS (S/. 0.00)" },
  { B: "000024", C: "CLIENTE DEMO VEINTICUATRO ACTIVO", D: "AA:BB:CC:DD:EE:24", E: "192.168.30.17", H: "03/12/2025", K: "MZA3 LT5 ZONA DEMO", O: 27, S: "PLAN ANTENA 55MB S/50", U: "900000024", X: "SOSA/4011", Z: "00000024", AF: "S/. 50.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000025", C: "CLIENTE DEMO VEINTICINCO ACTIVO", E: "10.70.100.55", H: "30/01/2026", K: "MZA3 LT6 ZONA DEMO", O: 12, S: "PLAN FIBRA 500MB S/60", U: "900000025", X: "OLT ADMIN HUWEI FICUS 2016/VEMAX", Z: "00000025", AF: "S/. 60.00", AG: "DEMO CIUDAD", AH: "OFFLINE", AI: "TV CABLE (S/. 10.00)" },
  { B: "000026", C: "CLIENTE DEMO VEINTISEIS SUSPENDIDO", D: "AA:BB:CC:DD:EE:26", E: "192.168.30.168", K: "MZA3 LT7 ZONA DEMO", O: 1, P: "1 S/. 40.00", S: "PLAN ANTENA 25MB S/40 v1", U: "900000026", X: "ELVIA/ND1", Z: "00000026", AF: "S/. 40.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000027", C: "CLIENTE DEMO VEINTISIETE ACTIVO", E: "10.72.100.30", H: "02/02/2026", K: "MZA3 LT8 ZONA DEMO", O: 6, S: "PLAN FIBRA GPON 2026/300MB-S/50", U: "900000027", X: "OLT ADMIN HUWEI FICUS 2016/VEMAX", Z: "00000027", AF: "S/. 50.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000028", C: "CLIENTE DEMO VEINTIOCHO ACTIVO", D: "AA:BB:CC:DD:EE:28", E: "10.72.100.46", H: "06/02/2026", K: "MZA3 LT9 ZONA DEMO", O: 6, S: "PLAN ANTENA 2026/55MB-S/50", U: "900000028", X: "AGAPITO/1100", Z: "00000028", AF: "S/. 50.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
  { B: "000029", C: "CLIENTE DEMO VEINTINUEVE ACTIVO", E: "10.71.100.60", H: "01/02/2026", K: "MZA3 LT10 ZONA DEMO", O: 3, S: "PLAN FIBRA 1000MB S/90", U: "900000029", X: "DIXON OLT/FIBRA", Z: "00000029", AF: "S/. 90.00", AG: "DEMO CIUDAD", AH: "ONLINE" },
  { B: "000030", C: "CLIENTE DEMO TREINTA ACTIVO", D: "AA:BB:CC:DD:EE:30", E: "10.72.100.79", H: "06/02/2026", K: "MZA4 LT1 ZONA DEMO", O: 6, S: "PLAN ANTENA 2026/35MB-S/40", U: "900000030", X: "MITTEN/ND1/VEMAX", Z: "00000030", AF: "S/. 40.00", AG: "DEMO CIUDAD", AH: "OFFLINE" },
];
