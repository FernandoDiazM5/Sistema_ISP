import{r as a,j as e,F as A}from"./index-DBbpf6L9.js";import{A as $}from"./Adjuntos-D2ZySTL2.js";import{C as B}from"./circle-check-ii6TWyto.js";const N={"accent-green":{bg:"bg-accent-green/20",text:"text-accent-green",border:"border-accent-green/20",bgLight:"bg-accent-green/10",btnBg:"bg-accent-green"},"accent-blue":{bg:"bg-accent-blue/20",text:"text-accent-blue",border:"border-accent-blue/20",bgLight:"bg-accent-blue/10",btnBg:"bg-accent-blue"},"accent-yellow":{bg:"bg-accent-yellow/20",text:"text-accent-yellow",border:"border-accent-yellow/20",bgLight:"bg-accent-yellow/10",btnBg:"bg-accent-yellow"},"accent-red":{bg:"bg-accent-red/20",text:"text-accent-red",border:"border-accent-red/20",bgLight:"bg-accent-red/10",btnBg:"bg-accent-red"}};function M({open:C,onClose:w,onConfirm:k,title:z,entityId:L,entityLabel:R,newStatus:s,accentColor:F="accent-green"}){const[r,c]=a.useState(""),[f,n]=a.useState(""),[y,o]=a.useState([]),[d,i]=a.useState(""),[x,b]=a.useState(""),[u,m]=a.useState(""),[g,p]=a.useState(""),[h,j]=a.useState("");if(!C)return null;const l=N[F]||N["accent-green"],P=()=>{r.trim()&&(k({solucion:r.trim(),accionesRealizadas:f.trim(),adjuntosResolucion:y,diagnosticosFinales:s==="Resuelto"?{ping:d?parseFloat(d):null,download:x?parseFloat(x):null,upload:u?parseFloat(u):null,packetLoss:g?parseFloat(g):null,jitter:h?parseFloat(h):null}:null}),c(""),n(""),o([]),i(""),b(""),m(""),p(""),j(""))},v=()=>{c(""),n(""),o([]),i(""),b(""),m(""),p(""),j(""),w()};return e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60] p-4",onClick:v,children:e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 w-full max-w-[560px] border border-border max-h-[85vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${l.bg} flex items-center justify-center`,children:e.jsx(A,{size:20,className:l.text})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:z||`Cerrar ${R}`}),e.jsxs("p",{className:"text-xs text-text-muted",children:[e.jsx("span",{className:"font-mono",children:L})," → ",e.jsx("span",{className:`${l.text} font-semibold`,children:s})]})]})]}),e.jsx("div",{className:`${l.bgLight} border ${l.border} rounded-lg p-3 mb-5`,children:e.jsxs("p",{className:"text-xs text-text-secondary",children:["Para cambiar el estado a ",e.jsx("strong",{children:s})," es necesario completar el informe de resolución. Describa la solución aplicada y las acciones realizadas."]})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-secondary font-medium mb-1.5 block",children:"Descripción de la solución *"}),e.jsx("textarea",{value:r,onChange:t=>c(t.target.value),placeholder:"Describa detalladamente la solución aplicada, causa raíz identificada y resultado obtenido...",className:"bg-bg-secondary border border-border text-text-primary p-3 rounded-lg text-sm min-h-[100px] resize-y outline-none focus:border-accent-blue w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-secondary font-medium mb-1.5 block",children:"Acciones realizadas"}),e.jsx("textarea",{value:f,onChange:t=>n(t.target.value),placeholder:"Ej: Se reinició el equipo, se cambió el cable, se reconfiguró la antena, se reemplazó la ONU...",className:"bg-bg-secondary border border-border text-text-primary p-3 rounded-lg text-sm min-h-[70px] resize-y outline-none focus:border-accent-blue w-full"})]}),e.jsx($,{value:y,onChange:o,max:10,label:"Evidencia / Adjuntos"}),s==="Resuelto"&&e.jsxs("div",{className:"bg-bg-secondary/50 border border-border rounded-lg p-4 mt-1",children:[e.jsx("p",{className:"text-[10px] text-accent-blue uppercase tracking-wide font-semibold mb-3",children:"Parámetros Técnicos Finales"}),e.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-text-secondary mb-1 block",children:"Ping (ms)"}),e.jsx("input",{type:"number",value:d,onChange:t=>i(t.target.value),placeholder:"0",className:"w-full text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-text-secondary mb-1 block",children:"Down (Mbps)"}),e.jsx("input",{type:"number",value:x,onChange:t=>b(t.target.value),placeholder:"0",className:"w-full text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-text-secondary mb-1 block",children:"Up (Mbps)"}),e.jsx("input",{type:"number",value:u,onChange:t=>m(t.target.value),placeholder:"0",className:"w-full text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-text-secondary mb-1 block",children:"Pkt Loss (%)"}),e.jsx("input",{type:"number",value:g,onChange:t=>p(t.target.value),placeholder:"0",className:"w-full text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-text-secondary mb-1 block",children:"Jitter (ms)"}),e.jsx("input",{type:"number",value:h,onChange:t=>j(t.target.value),placeholder:"0",className:"w-full text-xs"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-1",children:[e.jsx("button",{type:"button",onClick:v,className:"flex-1 py-2.5 rounded-lg bg-bg-secondary border border-border text-text-secondary cursor-pointer text-sm hover:bg-bg-card-hover transition-colors",children:"Cancelar"}),e.jsxs("button",{type:"button",onClick:P,disabled:!r.trim(),className:`flex-1 py-2.5 rounded-lg ${l.btnBg} border-none text-white cursor-pointer text-sm font-semibold hover:opacity-90 transition-opacity disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-2`,children:[e.jsx(B,{size:14}),"Confirmar y ",s==="Cerrado"?"Cerrar":s==="Resuelto"?"Resolver":"Completar"]})]})]})]})})}export{M as R};
