import{c as se,a as g,r as p,j as e,f as y,W as ae,X as O,l as ce}from"./index-BUoWx0aW.js";import{P as F}from"./plus-DOHIn1uY.js";import{U as G}from"./user-BYqUc2yV.js";import{C as S}from"./circle-check-o9nGfZFK.js";import{M as A}from"./map-pin-BMCsrTrW.js";import{C as P}from"./circle-alert-DNGNuy_z.js";import{S as re}from"./search-C4_puyDm.js";import{R as le}from"./radio-CTpzg8vE.js";import{P as _}from"./phone-BFLBFfB6.js";import{E as ne}from"./eye-DUeRYCt1.js";import{P as U}from"./pen-line-B3UA_lPu.js";import{T as V}from"./trash-2-6Ivg6wOE.js";import{M as oe}from"./mail-ZbR2yNq9.js";import{S as de}from"./shield-CIRLRXDm.js";import{C as ie}from"./clock-CKH6fDeG.js";import{A as W}from"./activity-BwB5rfWy.js";const xe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],me=se("briefcase",xe),T={Activo:{bg:"bg-accent-green/15",text:"text-accent-green",dot:"bg-accent-green"},Inactivo:{bg:"bg-accent-red/15",text:"text-accent-red",dot:"bg-accent-red"},Vacaciones:{bg:"bg-accent-yellow/15",text:"text-accent-yellow",dot:"bg-accent-yellow"}},q={"Radio Enlace":le,"Fibra Óptica":ae,General:y},I={"Radio Enlace":"#f59e0b","Fibra Óptica":"#3b82f6",General:"#8b5cf6"},pe=["Técnico de Campo","Supervisor Técnico","Técnico de Planta"],be=["Radio Enlace","Fibra Óptica","General"],ue=["Activo","Inactivo","Vacaciones"],R={nombre:"",cargo:"Técnico de Campo",especialidad:"General",telefono:"",email:"",zona:"",estado:"Activo"};function Ve(){const o=g(t=>t.tecnicos),B=g(t=>t.addTecnico),Z=g(t=>t.updateTecnico),X=g(t=>t.deleteTecnico),z=g(t=>t.visitas),Y=g(t=>t.tickets),[k,H]=p.useState(""),[J,b]=p.useState(!1),[j,E]=p.useState(null),[n,x]=p.useState(R),[a,u]=p.useState(null);p.useEffect(()=>{if(a){const t=o.find(s=>s.id===a.id);t&&t!==a&&u(t)}},[o,a]);const[f,N]=p.useState(null),[v,$]=p.useState("info"),h=p.useMemo(()=>{const t=o.length,s=o.filter(c=>c.estado==="Activo").length,r=o.filter(c=>c.estado==="Inactivo").length,d=o.filter(c=>c.estado==="Vacaciones").length,m=o.filter(c=>c.estado!=="Activo"?!1:z.some(l=>l.tecnicoId===c.id&&(l.estado==="Programada"||l.estado==="En Ruta"||l.estado==="En Sitio"))).length;return{total:t,activos:s,enCampo:m,inactivos:r,vacaciones:d}},[o,z]),M=p.useMemo(()=>{if(!k)return o;const t=k.toLowerCase();return o.filter(s=>s.nombre&&s.nombre.toLowerCase().includes(t)||s.especialidad&&s.especialidad.toLowerCase().includes(t)||s.zona&&s.zona.toLowerCase().includes(t)||s.cargo&&s.cargo.toLowerCase().includes(t))},[o,k]),K=()=>{E(null),x(R),b(!0)},D=t=>{E(t.id),x({nombre:t.nombre,cargo:t.cargo,especialidad:t.especialidad,telefono:t.telefono,email:t.email,zona:t.zona,estado:t.estado}),b(!0)},Q=()=>{!n.nombre.trim()||!n.telefono.trim()||(j?(Z(j,{...n}),a&&a.id===j&&u({...a,...n})):B({...n}),b(!1),E(null),x(R))},ee=t=>{X(t),N(null),a&&a.id===t&&u(null)},te=t=>{u(t),$("info")},w=t=>z.filter(s=>s.tecnicoId===t),C=t=>Y.filter(s=>s.tecnicoId===t),L=t=>{const s=w(t),r=C(t),d=s.filter(i=>i.estado==="Completada").length,m=s.filter(i=>i.estado==="Programada").length,c=r.filter(i=>i.estado==="Abierto"||i.estado==="En Proceso").length,l=r.filter(i=>i.estado==="Resuelto"||i.estado==="Cerrado").length;return{completadas:d,programadas:m,ticketsAbiertos:c,ticketsResueltos:l,totalVisitas:s.length,totalTickets:r.length}};return e.jsxs("div",{className:"animate-fade p-4 sm:p-6 sm:px-8 h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-[26px] font-bold tracking-tight",children:"Técnicos"}),e.jsxs("p",{className:"text-text-secondary text-sm mt-1",children:[h.total," técnicos registrados — ",h.activos," activos"]})]}),e.jsxs("button",{onClick:K,className:"flex items-center justify-center gap-2 py-2.5 px-4 bg-accent-blue text-white rounded-xl font-semibold text-sm border-none cursor-pointer hover:opacity-90 transition-opacity w-full sm:w-auto",children:[e.jsx(F,{size:16})," Nuevo Técnico"]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[{label:"Total Técnicos",value:h.total,icon:e.jsx(G,{size:16}),color:"#3b82f6"},{label:"Activos",value:h.activos,icon:e.jsx(S,{size:16}),color:"#10b981"},{label:"En Campo",value:h.enCampo,icon:e.jsx(A,{size:16}),color:"#8b5cf6"},{label:"Inactivos",value:h.inactivos,icon:e.jsx(P,{size:16}),color:"#ef4444"}].map(t=>e.jsxs("div",{className:"bg-bg-card rounded-xl p-4 border border-border flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:t.color+"15",color:t.color},children:t.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold font-mono",children:t.value}),e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide",children:t.label})]})]},t.label))}),e.jsx("div",{className:"flex gap-3 mb-5",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(re,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted"}),e.jsx("input",{value:k,onChange:t=>H(t.target.value),className:"w-full py-2.5 pl-9 pr-4 rounded-xl bg-bg-secondary border border-border text-sm text-text-primary placeholder-text-muted focus:outline-none focus:border-accent-blue/50",placeholder:"Buscar por nombre, especialidad, zona..."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[M.map(t=>{const s=T[t.estado]||T.Activo,r=q[t.especialidad]||y,d=I[t.especialidad]||"#8b5cf6",m=L(t.id);return e.jsxs("div",{className:"bg-bg-card rounded-2xl border border-border p-5 transition-all hover:border-accent-blue/40 hover:bg-bg-card-hover group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:d+"15",color:d},children:e.jsx(r,{size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-text-primary leading-tight",children:t.nombre}),e.jsx("p",{className:"text-[11px] text-text-muted mt-0.5",children:t.cargo})]})]}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[10px] font-semibold ${s.bg} ${s.text}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${s.dot}`}),t.estado]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[e.jsx(y,{size:12,className:"text-text-muted flex-shrink-0"}),e.jsx("span",{children:t.especialidad})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[e.jsx(A,{size:12,className:"text-text-muted flex-shrink-0"}),e.jsx("span",{children:t.zona})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[e.jsx(_,{size:12,className:"text-text-muted flex-shrink-0"}),e.jsx("span",{children:t.telefono})]})]}),e.jsxs("div",{className:"flex items-center gap-3 py-2.5 px-3 bg-bg-secondary rounded-lg mb-3",children:[e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("p",{className:"text-xs font-bold font-mono",children:m.totalVisitas}),e.jsx("p",{className:"text-[9px] text-text-muted uppercase",children:"Visitas"})]}),e.jsx("div",{className:"w-px h-6 bg-border"}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("p",{className:"text-xs font-bold font-mono",children:m.totalTickets}),e.jsx("p",{className:"text-[9px] text-text-muted uppercase",children:"Tickets"})]}),e.jsx("div",{className:"w-px h-6 bg-border"}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("p",{className:"text-xs font-bold font-mono",children:m.completadas}),e.jsx("p",{className:"text-[9px] text-text-muted uppercase",children:"Completadas"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>te(t),className:"flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg bg-accent-blue/10 text-accent-blue text-xs font-semibold border-none cursor-pointer hover:bg-accent-blue/20 transition-colors",children:[e.jsx(ne,{size:13})," Ver Detalle"]}),e.jsx("button",{onClick:c=>{c.stopPropagation(),D(t)},className:"p-2 rounded-lg bg-transparent border-none cursor-pointer text-text-muted hover:text-accent-blue hover:bg-accent-blue/10 transition-all",children:e.jsx(U,{size:14})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),N(t)},className:"p-2 rounded-lg bg-transparent border-none cursor-pointer text-text-muted hover:text-accent-red hover:bg-accent-red/10 transition-all",children:e.jsx(V,{size:14})})]})]},t.id)}),M.length===0&&e.jsxs("div",{className:"col-span-full py-16 text-center",children:[e.jsx(G,{size:40,className:"mx-auto mb-3 text-text-muted opacity-40"}),e.jsx("p",{className:"text-text-muted text-sm",children:"No se encontraron técnicos"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Intenta con otros términos de búsqueda"})]})]}),J&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>b(!1),children:e.jsxs("div",{className:"bg-bg-card rounded-2xl border border-border w-full max-w-lg shadow-2xl",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-border",children:[e.jsx("h3",{className:"text-base font-bold",children:j?"Editar Técnico":"Nuevo Técnico"}),e.jsx("button",{onClick:()=>b(!1),className:"text-text-muted hover:text-text-primary cursor-pointer bg-transparent border-none",children:e.jsx(O,{size:18})})]}),e.jsxs("div",{className:"p-6 flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[11px] text-text-muted uppercase mb-1 block",children:"Nombre *"}),e.jsx("input",{value:n.nombre,onChange:t=>x(s=>({...s,nombre:t.target.value})),className:"w-full py-2 px-3 rounded-lg bg-bg-secondary border border-border text-sm text-text-primary placeholder-text-muted focus:outline-none focus:border-accent-blue/50",placeholder:"Nombre completo del técnico"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[11px] text-text-muted uppercase mb-1 block",children:"Cargo"}),e.jsx("select",{value:n.cargo,onChange:t=>x(s=>({...s,cargo:t.target.value})),className:"w-full py-2 px-3 rounded-lg bg-bg-secondary border border-border text-sm text-text-primary focus:outline-none focus:border-accent-blue/50",children:pe.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[11px] text-text-muted uppercase mb-1 block",children:"Especialidad"}),e.jsx("select",{value:n.especialidad,onChange:t=>x(s=>({...s,especialidad:t.target.value})),className:"w-full py-2 px-3 rounded-lg bg-bg-secondary border border-border text-sm text-text-primary focus:outline-none focus:border-accent-blue/50",children:be.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[11px] text-text-muted uppercase mb-1 block",children:"Teléfono *"}),e.jsx("input",{value:n.telefono,onChange:t=>x(s=>({...s,telefono:t.target.value})),className:"w-full py-2 px-3 rounded-lg bg-bg-secondary border border-border text-sm text-text-primary placeholder-text-muted focus:outline-none focus:border-accent-blue/50",placeholder:"987654321"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[11px] text-text-muted uppercase mb-1 block",children:"Email"}),e.jsx("input",{value:n.email,onChange:t=>x(s=>({...s,email:t.target.value})),className:"w-full py-2 px-3 rounded-lg bg-bg-secondary border border-border text-sm text-text-primary placeholder-text-muted focus:outline-none focus:border-accent-blue/50",placeholder:"tecnico@isp.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[11px] text-text-muted uppercase mb-1 block",children:"Zona"}),e.jsx("input",{value:n.zona,onChange:t=>x(s=>({...s,zona:t.target.value})),className:"w-full py-2 px-3 rounded-lg bg-bg-secondary border border-border text-sm text-text-primary placeholder-text-muted focus:outline-none focus:border-accent-blue/50",placeholder:"ej. PLANICIE 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[11px] text-text-muted uppercase mb-1 block",children:"Estado"}),e.jsx("select",{value:n.estado,onChange:t=>x(s=>({...s,estado:t.target.value})),className:"w-full py-2 px-3 rounded-lg bg-bg-secondary border border-border text-sm text-text-primary focus:outline-none focus:border-accent-blue/50",children:ue.map(t=>e.jsx("option",{value:t,children:t},t))})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-border",children:[e.jsx("button",{onClick:()=>b(!1),className:"py-2 px-4 rounded-lg bg-bg-secondary text-text-secondary text-sm border border-border cursor-pointer hover:bg-white/[0.04] transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:Q,className:"flex items-center gap-2 py-2 px-4 rounded-lg bg-accent-blue text-white text-sm font-semibold border-none cursor-pointer hover:opacity-90 transition-opacity",children:[e.jsx(F,{size:14})," ",j?"Guardar Cambios":"Crear Técnico"]})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>u(null),children:e.jsxs("div",{className:"bg-bg-card rounded-2xl border border-border w-full max-w-2xl shadow-2xl max-h-[85vh] flex flex-col",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start px-6 py-5 border-b border-border flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{background:(I[a.especialidad]||"#8b5cf6")+"15",color:I[a.especialidad]||"#8b5cf6"},children:(()=>{const t=q[a.especialidad]||y;return e.jsx(t,{size:22})})()}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:a.nombre}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"text-xs text-text-muted",children:a.id}),e.jsx("span",{className:"text-text-muted",children:"|"}),e.jsx("span",{className:"text-xs text-text-secondary",children:a.cargo})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const t=T[a.estado]||T.Activo;return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[11px] font-semibold ${t.bg} ${t.text}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.dot}`}),a.estado]})})(),e.jsx("button",{onClick:()=>u(null),className:"text-text-muted hover:text-text-primary cursor-pointer bg-transparent border-none ml-2",children:e.jsx(O,{size:18})})]})]}),e.jsx("div",{className:"flex gap-1 px-6 pt-3 border-b border-border flex-shrink-0",children:[{key:"info",label:"Información"},{key:"visitas",label:"Visitas"},{key:"tickets",label:"Tickets"},{key:"estadisticas",label:"Estadísticas"}].map(t=>e.jsx("button",{onClick:()=>$(t.key),className:`px-4 py-2.5 text-xs font-semibold border-none cursor-pointer transition-colors rounded-t-lg ${v===t.key?"bg-bg-secondary text-accent-blue border-b-2 border-b-accent-blue":"bg-transparent text-text-muted hover:text-text-secondary"}`,children:t.label},t.key))}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[v==="info"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(me,{size:13,className:"text-text-muted"}),e.jsx("span",{className:"text-[10px] text-text-muted uppercase",children:"Cargo"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.cargo})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(y,{size:13,className:"text-text-muted"}),e.jsx("span",{className:"text-[10px] text-text-muted uppercase",children:"Especialidad"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.especialidad})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_,{size:13,className:"text-text-muted"}),e.jsx("span",{className:"text-[10px] text-text-muted uppercase",children:"Teléfono"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.telefono})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(oe,{size:13,className:"text-text-muted"}),e.jsx("span",{className:"text-[10px] text-text-muted uppercase",children:"Email"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.email||"—"})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(A,{size:13,className:"text-text-muted"}),e.jsx("span",{className:"text-[10px] text-text-muted uppercase",children:"Zona"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.zona})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{size:13,className:"text-text-muted"}),e.jsx("span",{className:"text-[10px] text-text-muted uppercase",children:"Estado"})]}),e.jsx("p",{className:"text-sm font-medium",children:a.estado})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs("button",{onClick:()=>{D(a)},className:"flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg bg-accent-blue/10 text-accent-blue text-xs font-semibold border-none cursor-pointer hover:bg-accent-blue/20 transition-colors",children:[e.jsx(U,{size:13})," Editar Técnico"]}),e.jsxs("button",{onClick:()=>N(a),className:"flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg bg-accent-red/10 text-accent-red text-xs font-semibold border-none cursor-pointer hover:bg-accent-red/20 transition-colors",children:[e.jsx(V,{size:13})," Eliminar"]})]})]}),v==="visitas"&&(()=>{const t=w(a.id);return e.jsxs("div",{className:"space-y-3",children:[t.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx(ce,{size:32,className:"mx-auto mb-2 text-text-muted opacity-40"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Sin visitas asignadas"})]}),t.map(s=>{const r=s.estado==="Completada"?"bg-accent-green/15 text-accent-green":s.estado==="Programada"?"bg-accent-blue/15 text-accent-blue":s.estado==="Cancelada"?"bg-accent-red/15 text-accent-red":"bg-accent-yellow/15 text-accent-yellow";return e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4 border border-border",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-[11px] text-text-muted",children:s.id}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${r}`,children:s.estado})]}),e.jsx("span",{className:"text-[11px] text-text-muted",children:s.fecha})]}),e.jsx("p",{className:"text-sm font-medium mb-1",children:s.clienteNombre}),e.jsx("p",{className:"text-xs text-text-secondary mb-2",children:s.descripcion}),e.jsxs("div",{className:"flex items-center gap-4 text-[11px] text-text-muted",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ie,{size:10})," ",s.horaInicio,s.horaFin?` - ${s.horaFin}`:""]}),e.jsx("span",{children:s.tipo}),e.jsx("span",{className:"text-text-secondary",children:s.direccion})]}),s.resultado&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[e.jsx("p",{className:"text-[11px] text-text-muted",children:"Resultado:"}),e.jsx("p",{className:"text-xs text-text-secondary",children:s.resultado})]})]},s.id)})]})})(),v==="tickets"&&(()=>{const t=C(a.id);return e.jsxs("div",{className:"space-y-3",children:[t.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx(P,{size:32,className:"mx-auto mb-2 text-text-muted opacity-40"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Sin tickets asignados"})]}),t.map(s=>{const r=s.estado==="Abierto"?"bg-accent-red/15 text-accent-red":s.estado==="En Proceso"?"bg-accent-yellow/15 text-accent-yellow":s.estado==="Resuelto"?"bg-accent-green/15 text-accent-green":"bg-text-muted/15 text-text-muted",d=s.prioridad==="Alta"||s.prioridad==="Critica"?"text-accent-red":s.prioridad==="Media"?"text-accent-yellow":"text-accent-green";return e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4 border border-border",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-[11px] text-text-muted",children:s.id}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${r}`,children:s.estado}),e.jsx("span",{className:`text-[10px] font-semibold ${d}`,children:s.prioridad})]}),e.jsx("span",{className:"text-[11px] text-text-muted",children:s.fecha})]}),e.jsx("p",{className:"text-sm font-medium mb-1",children:s.clienteNombre}),e.jsx("p",{className:"text-xs text-text-secondary line-clamp-2",children:s.descripcion}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-[11px] text-text-muted",children:[e.jsx("span",{children:s.tipo}),e.jsxs("span",{children:["Actualizado: ",s.fechaUpdate]})]})]},s.id)})]})})(),v==="estadisticas"&&(()=>{const t=L(a.id),s=w(a.id),r=C(a.id),d=s.reduce((c,l)=>(c[l.tipo]=(c[l.tipo]||0)+1,c),{}),m=r.reduce((c,l)=>(c[l.estado]=(c[l.estado]||0)+1,c),{});return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl mx-auto mb-2 flex items-center justify-center bg-accent-blue/10",children:e.jsx(W,{size:18,className:"text-accent-blue"})}),e.jsx("p",{className:"text-xl font-bold font-mono",children:t.totalVisitas}),e.jsx("p",{className:"text-[10px] text-text-muted uppercase",children:"Total Visitas"})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl mx-auto mb-2 flex items-center justify-center bg-accent-green/10",children:e.jsx(S,{size:18,className:"text-accent-green"})}),e.jsx("p",{className:"text-xl font-bold font-mono",children:t.completadas}),e.jsx("p",{className:"text-[10px] text-text-muted uppercase",children:"Completadas"})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl mx-auto mb-2 flex items-center justify-center bg-accent-yellow/10",children:e.jsx(P,{size:18,className:"text-accent-yellow"})}),e.jsx("p",{className:"text-xl font-bold font-mono",children:t.ticketsAbiertos}),e.jsx("p",{className:"text-[10px] text-text-muted uppercase",children:"Tickets Abiertos"})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl mx-auto mb-2 flex items-center justify-center bg-accent-green/10",children:e.jsx(S,{size:18,className:"text-accent-green"})}),e.jsx("p",{className:"text-xl font-bold font-mono",children:t.ticketsResueltos}),e.jsx("p",{className:"text-[10px] text-text-muted uppercase",children:"Tickets Resueltos"})]})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4",children:[e.jsx("p",{className:"text-[11px] text-text-muted uppercase mb-2",children:"Tasa de Completado (Visitas)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-3 bg-border rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-accent-green rounded-full transition-all",style:{width:`${t.totalVisitas>0?Math.round(t.completadas/t.totalVisitas*100):0}%`}})}),e.jsxs("span",{className:"text-sm font-bold font-mono text-accent-green",children:[t.totalVisitas>0?Math.round(t.completadas/t.totalVisitas*100):0,"%"]})]})]}),Object.keys(d).length>0&&e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4",children:[e.jsx("p",{className:"text-[11px] text-text-muted uppercase mb-3",children:"Visitas por Tipo"}),e.jsx("div",{className:"space-y-2",children:Object.entries(d).map(([c,l])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-text-secondary",children:c}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-border rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-accent-blue rounded-full",style:{width:`${l/t.totalVisitas*100}%`}})}),e.jsx("span",{className:"text-xs font-mono font-bold w-6 text-right",children:l})]})]},c))})]}),Object.keys(m).length>0&&e.jsxs("div",{className:"bg-bg-secondary rounded-xl p-4",children:[e.jsx("p",{className:"text-[11px] text-text-muted uppercase mb-3",children:"Tickets por Estado"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(m).map(([c,l])=>{const i={Abierto:"bg-accent-red/15 text-accent-red","En Proceso":"bg-accent-yellow/15 text-accent-yellow",Resuelto:"bg-accent-green/15 text-accent-green",Cerrado:"bg-text-muted/15 text-text-muted"};return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold ${i[c]||"bg-bg-card text-text-secondary"}`,children:[c,": ",l]},c)})})]}),t.totalVisitas===0&&t.totalTickets===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(W,{size:32,className:"mx-auto mb-2 text-text-muted opacity-40"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Sin actividad registrada"})]})]})})()]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60]",onClick:()=>N(null),children:e.jsxs("div",{className:"bg-bg-card rounded-2xl border border-border w-full max-w-sm shadow-2xl p-6",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-accent-red/10 mx-auto mb-4",children:e.jsx(V,{size:22,className:"text-accent-red"})}),e.jsx("h3",{className:"text-base font-bold text-center mb-2",children:"Eliminar Técnico"}),e.jsx("p",{className:"text-sm text-text-secondary text-center mb-1",children:"Esta acción no se puede deshacer."}),e.jsx("p",{className:"text-sm text-text-primary text-center font-semibold mb-5",children:f.nombre}),(()=>{const t=w(f.id).filter(r=>r.estado==="Programada"||r.estado==="En Ruta"||r.estado==="En Sitio"),s=C(f.id).filter(r=>r.estado==="Abierto"||r.estado==="En Proceso");return t.length>0||s.length>0?e.jsxs("div",{className:"bg-accent-yellow/10 border border-accent-yellow/30 rounded-lg p-3 mb-4",children:[e.jsx("p",{className:"text-[11px] text-accent-yellow font-semibold mb-1",children:"Advertencia"}),e.jsxs("p",{className:"text-[11px] text-text-secondary",children:["Este técnico tiene ",t.length>0?`${t.length} visita(s) activa(s)`:"",t.length>0&&s.length>0?" y ":"",s.length>0?`${s.length} ticket(s) abierto(s)`:"","."]})]}):null})(),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>N(null),className:"flex-1 py-2.5 rounded-lg bg-bg-secondary border border-border text-text-secondary text-sm cursor-pointer hover:bg-white/[0.04] transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:()=>ee(f.id),className:"flex-1 py-2.5 rounded-lg bg-accent-red text-white text-sm font-semibold border-none cursor-pointer hover:opacity-90 transition-opacity",children:"Eliminar"})]})]})})]})}export{Ve as default};
