import{a as b,r as c,j as e,F as Y,m as k,X as R,f as ee,p as te,W as se}from"./index-me4rMZUI.js";import{P as ae}from"./plus-CVOr2pzG.js";import{C as oe}from"./clock-BXh_ZNwk.js";import{L as ne}from"./loader-circle-t-Hqmv3G.js";import{C as le}from"./circle-check-BYdJYVN6.js";import{S as re}from"./search-K4IrGess.js";import{C as O}from"./chevron-right-BtOXaLSJ.js";import{M as S}from"./map-pin-CvzHop5b.js";import{U as E}from"./user-5Ykqz3qk.js";import{A as L}from"./arrow-right-B3JRIaeU.js";const ce=["Pendiente","Aprobada","Programada","En Instalación","Completada","Derivada","Cancelada"],h={Pendiente:{bg:"#f59e0b20",text:"#f59e0b",tailBg:"bg-yellow-500/20",tailText:"text-yellow-400"},Aprobada:{bg:"#3b82f620",text:"#3b82f6",tailBg:"bg-blue-500/20",tailText:"text-blue-400"},Programada:{bg:"#8b5cf620",text:"#8b5cf6",tailBg:"bg-purple-500/20",tailText:"text-purple-400"},"En Instalación":{bg:"#f9731620",text:"#f97316",tailBg:"bg-orange-500/20",tailText:"text-orange-400"},Completada:{bg:"#10b98120",text:"#10b981",tailBg:"bg-green-500/20",tailText:"text-green-400"},Derivada:{bg:"#ef444420",text:"#ef4444",tailBg:"bg-red-500/20",tailText:"text-red-400"},Cancelada:{bg:"#6b728020",text:"#6b7280",tailBg:"bg-gray-500/20",tailText:"text-gray-400"}},u=["Pendiente","Aprobada","Programada","En Instalación","Completada"],ie=["INTERNET FIBRA 100MB","INTERNET FIBRA 200MB","INTERNET FIBRA 300MB","INTERNET RADIO 30MB","INTERNET RADIO 50MB","INTERNET RADIO 65MB","INTERNET RADIO 100MB"],$=["Radio Enlace","Fibra Óptica"],de={Pendiente:["Aprobada","Cancelada"],Aprobada:["Programada","Cancelada"],Programada:["En Instalación","Cancelada"],"En Instalación":["Completada","Derivada"],Completada:[],Derivada:["En Instalación"],Cancelada:[]};function q({estado:r,size:d="sm"}){const x=h[r]||h.Pendiente,f=d==="sm"?"py-[3px] px-2.5":"py-1 px-3",g=d==="sm"?"text-[11px]":"text-xs";return e.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full font-semibold whitespace-nowrap ${f} ${g}`,style:{background:x.bg,color:x.text},children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{background:x.text,boxShadow:`0 0 6px ${x.text}`}}),r]})}function P({tecnologia:r}){const d=r==="Fibra Óptica";return e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full py-[3px] px-2.5 text-[11px] font-semibold whitespace-nowrap ${d?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:[d?e.jsx(te,{size:10}):e.jsx(se,{size:10}),r]})}function ve(){const r=b(t=>t.instalaciones),d=b(t=>t.addInstalacion),x=b(t=>t.updateInstalacion),f=b(t=>t.clients),g=b(t=>t.tecnicos),A=b(t=>t.derivaciones),[v,Z]=c.useState(""),[y,W]=c.useState("all"),[C,_]=c.useState("all"),[I,G]=c.useState("all"),[H,N]=c.useState(!1),[a,m]=c.useState(null),[j,B]=c.useState("pipeline"),[o,T]=c.useState({prospectoNombre:"",prospectoDNI:"",prospectoTelefono:"",prospectoEmail:"",plan:"",tecnologia:"",zona:"",direccion:"",tecnicoId:"",tecnicoNombre:"",fecha:"",observaciones:""}),U=c.useMemo(()=>g.filter(t=>t.estado==="Activo"),[g]),V=c.useMemo(()=>{const t=new Set(r.map(s=>s.zona).filter(Boolean));return f.forEach(s=>{s.zona&&t.add(s.zona)}),Array.from(t).sort()},[r,f]),p=c.useMemo(()=>({total:r.length,pendientes:r.filter(t=>t.estado==="Pendiente"||t.estado==="Aprobada").length,enCurso:r.filter(t=>t.estado==="Programada"||t.estado==="En Instalación").length,completadas:r.filter(t=>t.estado==="Completada").length}),[r]),F=c.useMemo(()=>r.filter(t=>{const s=v.toLowerCase(),l=t.prospectoNombre||t.clienteNombre,n=!v||l&&l.toLowerCase().includes(s)||t.id&&t.id.toLowerCase().includes(s)||t.direccion&&t.direccion.toLowerCase().includes(s)||t.tecnicoNombre&&t.tecnicoNombre.toLowerCase().includes(s),D=y==="all"||t.estado===y,w=C==="all"||t.zona===C,Q=I==="all"||t.tecnologia===I;return n&&D&&w&&Q}),[r,v,y,C,I]),X=c.useMemo(()=>{const t={};return u.forEach(s=>{t[s]=[]}),t.Derivada=[],r.forEach(s=>{t[s.estado]&&t[s.estado].push(s)}),t},[r]),z=c.useMemo(()=>a?A.filter(t=>t.instalacionId===a.id):[],[A,a]),i=(t,s)=>{if(T(l=>({...l,[t]:s})),t==="tecnicoId"){const l=g.find(n=>n.id===s);l&&T(n=>({...n,tecnicoId:s,tecnicoNombre:l.nombre}))}},M=()=>{T({prospectoNombre:"",prospectoDNI:"",prospectoTelefono:"",prospectoEmail:"",plan:"",tecnologia:"",zona:"",direccion:"",tecnicoId:"",tecnicoNombre:"",fecha:"",observaciones:""})},J=t=>{t.preventDefault(),!(!o.prospectoNombre||!o.plan||!o.tecnologia)&&(d({prospectoNombre:o.prospectoNombre,prospectoDNI:o.prospectoDNI,prospectoTelefono:o.prospectoTelefono,prospectoEmail:o.prospectoEmail,clienteNombre:o.prospectoNombre,tecnicoId:o.tecnicoId||null,tecnicoNombre:o.tecnicoNombre||"Sin asignar",tipo:"Nueva Instalación",estado:"Pendiente",plan:o.plan,tecnologia:o.tecnologia,direccion:o.direccion,zona:o.zona,equipoInstalado:"",fecha:o.fecha||new Date().toISOString().split("T")[0],horaInicio:null,horaFin:null,observaciones:o.observaciones}),N(!1),M())},K=(t,s)=>{x(t.id,{estado:s}),m(l=>l?{...l,estado:s}:null)};return e.jsxs("div",{className:"animate-fade p-6 px-8 h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[26px] font-bold tracking-tight",children:"Instalaciones"}),e.jsxs("p",{className:"text-text-secondary text-sm mt-1",children:["Pipeline de instalaciones - ",p.total," total, ",p.enCurso," en curso"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex bg-bg-secondary rounded-lg border border-border p-0.5",children:[e.jsx("button",{onClick:()=>B("pipeline"),className:`py-1.5 px-3 rounded-md text-xs font-medium cursor-pointer border-none transition-all ${j==="pipeline"?"bg-accent-blue text-white":"bg-transparent text-text-secondary hover:text-text-primary"}`,children:"Pipeline"}),e.jsx("button",{onClick:()=>B("list"),className:`py-1.5 px-3 rounded-md text-xs font-medium cursor-pointer border-none transition-all ${j==="list"?"bg-accent-blue text-white":"bg-transparent text-text-secondary hover:text-text-primary"}`,children:"Lista"})]}),e.jsxs("button",{onClick:()=>N(!0),className:"py-2.5 px-4 rounded-xl bg-accent-blue border-none text-white text-sm font-semibold cursor-pointer flex items-center gap-2 hover:opacity-90",children:[e.jsx(ae,{size:16})," Nueva Instalación"]})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[{label:"Total",value:p.total,icon:e.jsx(Y,{size:16}),color:"#3b82f6"},{label:"Pendientes",value:p.pendientes,icon:e.jsx(oe,{size:16}),color:"#f59e0b"},{label:"En Curso",value:p.enCurso,icon:e.jsx(ne,{size:16}),color:"#f97316"},{label:"Completadas",value:p.completadas,icon:e.jsx(le,{size:16}),color:"#10b981"}].map(t=>e.jsxs("div",{className:"bg-bg-card rounded-xl p-4 border border-border flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:t.color+"15",color:t.color},children:t.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold font-mono",children:t.value}),e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide",children:t.label})]})]},t.label))}),e.jsxs("div",{className:"flex gap-3 mb-5",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(re,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted"}),e.jsx("input",{placeholder:"Buscar por prospecto, ID, dirección, técnico...",value:v,onChange:t=>Z(t.target.value),className:"w-full pl-9"})]}),e.jsxs("select",{value:y,onChange:t=>W(t.target.value),className:"min-w-[150px]",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),ce.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:C,onChange:t=>_(t.target.value),className:"min-w-[140px]",children:[e.jsx("option",{value:"all",children:"Todas las zonas"}),V.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:I,onChange:t=>G(t.target.value),className:"min-w-[150px]",children:[e.jsx("option",{value:"all",children:"Toda tecnología"}),$.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),j==="pipeline"&&e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4",children:[...u,"Derivada"].map(t=>{const s=X[t]||[],l=h[t];return e.jsxs("div",{className:"min-w-[240px] flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:l.text}}),e.jsx("span",{className:"text-xs font-semibold text-text-primary uppercase tracking-wide",children:t}),e.jsx("span",{className:"text-[10px] font-bold rounded-full px-1.5 py-0.5 ml-auto",style:{background:l.bg,color:l.text},children:s.length})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[s.length===0&&e.jsx("div",{className:"bg-bg-secondary/50 rounded-lg p-4 border border-border/50 border-dashed text-center",children:e.jsx("p",{className:"text-[11px] text-text-muted",children:"Sin instalaciones"})}),s.map(n=>e.jsxs("div",{onClick:()=>m(n),className:"bg-bg-card rounded-lg p-3 border border-border cursor-pointer transition-all hover:border-accent-blue/50 hover:bg-bg-card-hover group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-mono text-[10px] text-text-muted",children:n.id}),e.jsx(O,{size:12,className:"text-text-muted opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsx("p",{className:"text-xs font-semibold mb-1 truncate",title:n.prospectoNombre||n.clienteNombre,children:n.prospectoNombre||n.clienteNombre}),n.prospectoDNI&&e.jsxs("p",{className:"text-[10px] text-text-muted mb-1",children:["DNI: ",n.prospectoDNI]}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-text-muted mb-1.5",children:[e.jsx(S,{size:9}),e.jsx("span",{className:"truncate",children:n.zona||"Sin zona"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(P,{tecnologia:n.tecnologia}),e.jsxs("span",{className:"text-[10px] text-text-muted flex items-center gap-1",children:[e.jsx(k,{size:9}),n.fecha]})]}),n.tecnicoNombre&&e.jsxs("div",{className:"flex items-center gap-1 mt-1.5 text-[10px] text-text-secondary",children:[e.jsx(E,{size:9}),n.tecnicoNombre]})]},n.id))]})]},t)})}),j==="list"&&e.jsxs("div",{className:"flex flex-col gap-3",children:[F.length===0&&e.jsx("div",{className:"bg-bg-card rounded-xl p-8 border border-border text-center",children:e.jsx("p",{className:"text-text-muted text-sm",children:"No se encontraron instalaciones"})}),F.map(t=>e.jsxs("div",{onClick:()=>m(t),className:"bg-bg-card rounded-xl p-4 border border-border cursor-pointer transition-all hover:border-accent-blue/50 hover:bg-bg-card-hover",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-mono text-xs text-text-muted",children:t.id}),e.jsx(q,{estado:t.estado}),e.jsx(P,{tecnologia:t.tecnologia})]}),e.jsxs("span",{className:"text-[11px] text-text-muted flex items-center gap-1",children:[e.jsx(k,{size:11}),t.fecha]})]}),e.jsx("p",{className:"text-sm font-semibold mb-1",children:t.prospectoNombre||t.clienteNombre}),t.prospectoDNI&&e.jsxs("p",{className:"text-[11px] text-text-muted mb-1",children:["DNI: ",t.prospectoDNI]}),e.jsx("p",{className:"text-xs text-text-secondary mb-2",children:t.plan}),e.jsxs("div",{className:"flex items-center gap-4 text-[11px] text-text-muted",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{size:11}),t.direccion||"Sin dirección"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{size:11}),t.tecnicoNombre||"Sin asignar"]}),t.zona&&e.jsx("span",{className:"bg-bg-secondary px-2 py-0.5 rounded text-[10px]",children:t.zona})]})]},t.id))]}),j==="pipeline"&&e.jsx("div",{className:"mt-6 flex items-center justify-center gap-1",children:u.map((t,s)=>{const l=h[t];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] font-medium px-2 py-1 rounded",style:{background:l.bg,color:l.text},children:t}),s<u.length-1&&e.jsx(L,{size:12,className:"text-text-muted"})]},t)})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:()=>N(!1),children:e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 w-[560px] border border-border max-h-[90vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Nueva Instalación"}),e.jsx("button",{onClick:()=>N(!1),className:"w-8 h-8 rounded-lg bg-bg-secondary border border-border flex items-center justify-center cursor-pointer text-text-muted hover:text-text-primary",children:e.jsx(R,{size:16})})]}),e.jsxs("form",{onSubmit:J,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"Nombre del Prospecto *"}),e.jsx("input",{type:"text",placeholder:"Nombre completo del prospecto",value:o.prospectoNombre,onChange:t=>i("prospectoNombre",t.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"DNI / Documento"}),e.jsx("input",{type:"text",placeholder:"Número de documento",value:o.prospectoDNI,onChange:t=>i("prospectoDNI",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"Teléfono / Celular"}),e.jsx("input",{type:"text",placeholder:"Número de contacto",value:o.prospectoTelefono,onChange:t=>i("prospectoTelefono",t.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"Email"}),e.jsx("input",{type:"email",placeholder:"Correo electrónico (opcional)",value:o.prospectoEmail,onChange:t=>i("prospectoEmail",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"Plan *"}),e.jsxs("select",{value:o.plan,onChange:t=>i("plan",t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar plan..."}),ie.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"Tecnología *"}),e.jsxs("select",{value:o.tecnologia,onChange:t=>i("tecnologia",t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar tecnología..."}),$.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"Zona"}),e.jsx("input",{type:"text",placeholder:"Zona de instalación",value:o.zona,onChange:t=>i("zona",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"Dirección"}),e.jsx("input",{type:"text",placeholder:"Dirección completa",value:o.direccion,onChange:t=>i("direccion",t.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"Técnico"}),e.jsxs("select",{value:o.tecnicoId,onChange:t=>i("tecnicoId",t.target.value),children:[e.jsx("option",{value:"",children:"Sin asignar"}),U.map(t=>e.jsxs("option",{value:t.id,children:[t.nombre," — ",t.especialidad]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"Fecha programada"}),e.jsx("input",{type:"date",value:o.fecha,onChange:t=>i("fecha",t.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-secondary font-medium mb-1.5",children:"Observaciones"}),e.jsx("textarea",{placeholder:"Notas adicionales sobre la instalación...",value:o.observaciones,onChange:t=>i("observaciones",t.target.value),className:"bg-bg-secondary border border-border text-text-primary p-3 rounded-lg text-sm min-h-[80px] resize-y outline-none focus:border-accent-blue w-full"})]}),e.jsxs("div",{className:"flex gap-3 mt-1",children:[e.jsx("button",{type:"button",onClick:()=>{N(!1),M()},className:"flex-1 py-2.5 rounded-lg bg-bg-secondary border border-border text-text-secondary cursor-pointer text-sm hover:text-text-primary",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:!o.prospectoNombre||!o.plan||!o.tecnologia,className:"flex-1 py-2.5 rounded-lg bg-accent-blue border-none text-white cursor-pointer text-sm font-semibold disabled:opacity-40 disabled:cursor-not-allowed hover:opacity-90",children:"Crear Instalación"})]})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:()=>m(null),children:e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 w-[600px] border border-border max-h-[90vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm text-text-muted",children:a.id}),e.jsx(q,{estado:a.estado,size:"md"})]}),e.jsx("h3",{className:"text-lg font-bold",children:a.prospectoNombre||a.clienteNombre})]}),e.jsx("button",{onClick:()=>m(null),className:"w-8 h-8 rounded-lg bg-bg-secondary border border-border flex items-center justify-center cursor-pointer text-text-muted hover:text-text-primary",children:e.jsx(R,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Prospecto"}),e.jsx("p",{className:"text-sm font-semibold",children:a.prospectoNombre||a.clienteNombre})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"DNI / Documento"}),e.jsx("p",{className:"text-sm font-medium",children:a.prospectoDNI||"No registrado"})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Teléfono"}),e.jsx("p",{className:"text-sm font-medium",children:a.prospectoTelefono||"No registrado"})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Email"}),e.jsx("p",{className:"text-sm font-medium",children:a.prospectoEmail||"No registrado"})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Plan"}),e.jsx("p",{className:"text-sm font-semibold",children:a.plan})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Tecnología"}),e.jsx("div",{className:"mt-0.5",children:e.jsx(P,{tecnologia:a.tecnologia})})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Dirección"}),e.jsxs("p",{className:"text-sm font-medium flex items-center gap-1",children:[e.jsx(S,{size:12,className:"text-text-muted"}),a.direccion||"Sin dirección"]})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Zona"}),e.jsx("p",{className:"text-sm font-medium",children:a.zona||"Sin zona"})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Técnico"}),e.jsxs("p",{className:"text-sm font-medium flex items-center gap-1",children:[e.jsx(E,{size:12,className:"text-text-muted"}),a.tecnicoNombre||"Sin asignar"]})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Fecha"}),e.jsxs("p",{className:"text-sm font-medium flex items-center gap-1",children:[e.jsx(k,{size:12,className:"text-text-muted"}),a.fecha]})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Tipo"}),e.jsx("p",{className:"text-sm font-medium",children:a.tipo||"Nueva Instalación"})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Equipo Instalado"}),e.jsx("p",{className:"text-sm font-medium",children:a.equipoInstalado||"Pendiente"})]})]}),(a.horaInicio||a.horaFin)&&e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3 mb-5 flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase",children:"Hora Inicio"}),e.jsx("p",{className:"text-sm font-mono font-medium",children:a.horaInicio||"—"})]}),e.jsx(L,{size:14,className:"text-text-muted"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase",children:"Hora Fin"}),e.jsx("p",{className:"text-sm font-mono font-medium",children:a.horaFin||"—"})]})]}),a.observaciones&&e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3 mb-5",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wide mb-1",children:"Observaciones"}),e.jsx("p",{className:"text-sm text-text-secondary",children:a.observaciones})]}),z.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("p",{className:"text-xs font-semibold text-text-primary mb-2 flex items-center gap-1",children:[e.jsx(ee,{size:12}),"Derivaciones de Planta Externa (",z.length,")"]}),e.jsx("div",{className:"flex flex-col gap-2",children:z.map(t=>e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-3 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-mono text-[11px] text-text-muted",children:t.id}),e.jsx("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full",style:{background:t.estado==="Completada"?"#10b98120":t.estado==="En progreso"?"#f9731620":"#f59e0b20",color:t.estado==="Completada"?"#10b981":t.estado==="En progreso"?"#f97316":"#f59e0b"},children:t.estado})]}),e.jsx("p",{className:"text-xs font-medium",children:t.tipo}),e.jsx("p",{className:"text-[11px] text-text-muted mt-0.5",children:t.descripcion}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[10px] text-text-muted",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{size:9}),t.tecnicoNombre]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{size:9}),t.fecha]}),t.metraje>0&&e.jsxs("span",{children:[t.metraje,"m"]})]})]},t.id))})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("p",{className:"text-xs font-semibold text-text-primary mb-3",children:"Progreso de Instalación"}),e.jsx("div",{className:"flex items-center gap-1",children:u.map((t,s)=>{const l=u.indexOf(a.estado),n=s<=l,D=t===a.estado,w=h[t];return e.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[e.jsx("div",{className:`h-1.5 rounded-full flex-1 transition-all ${n?"":"opacity-20"}`,style:{background:n?w.text:"#6b7280"}}),D&&e.jsx("span",{className:"text-[9px] font-semibold whitespace-nowrap",style:{color:w.text},children:t})]},t)})})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[(de[a.estado]||[]).map(t=>{const s=h[t];return e.jsxs("button",{onClick:()=>K(a,t),className:"py-2 px-4 rounded-lg border-none text-xs font-semibold cursor-pointer flex items-center gap-1.5 hover:opacity-80 transition-opacity",style:{background:s.bg,color:s.text},children:[e.jsx(O,{size:12}),t==="Cancelada"?"Cancelar":`Mover a ${t}`]},t)}),e.jsx("button",{onClick:()=>m(null),className:"py-2 px-4 rounded-lg bg-bg-secondary border border-border text-text-secondary text-xs cursor-pointer ml-auto hover:text-text-primary",children:"Cerrar"})]})]})})]})}export{ve as default};
