import{c as j,a as u,r as h,j as e,B as f,g as H,X as C,W as I}from"./index-Cv24CwsR.js";import{u as V,I as b}from"./Input-DBVnYa5O.js";import{K as g}from"./KPICard-DpNuLiqB.js";import{C as $,c as G}from"./CopyButton-BLj0ojLp.js";import{B as x}from"./Button-BdQWzmtT.js";import{B as W}from"./Badge-DKK5QUpa.js";import{C as N}from"./Card-C-677Wb6.js";import{P as K}from"./plus-BKUvgC9B.js";import{M as P}from"./monitor-FlZyIgOX.js";import{S as Q}from"./search-Cwsi32eX.js";import{S as q}from"./save-N7pUtrFi.js";import"./check-C-NCJrVP.js";const X=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Z=j("package",X);const J=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Y=j("pen",J);const ee=[["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6.01 18H6",key:"19vcac"}],["path",{d:"M10.01 18H10",key:"uamcmx"}],["path",{d:"M15 10v4",key:"qjz1xs"}],["path",{d:"M17.84 7.17a4 4 0 0 0-5.66 0",key:"1rif40"}],["path",{d:"M20.66 4.34a8 8 0 0 0-11.31 0",key:"6a5xfq"}]],se=j("router",ee);const te=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],S=j("server",te),M=["ONU","Router","Antena CPE","Antena AP","Switch","OLT","Media Converter"],ae=["Huawei","VSOL","Mikrotik","Ubiquiti","TP-Link","Tenda","ZTE","Nokia"],A=["Disponible","En uso","En reparación","Dado de baja"],T={ONU:P,Router:se,"Antena CPE":I,"Antena AP":I,Switch:S,OLT:S,"Media Converter":f},ie={Disponible:"success","En uso":"info","En reparación":"warning","Dado de baja":"danger"};function ge(){const o=u(s=>s.equipos),z=u(s=>s.addEquipo),O=u(s=>s.updateEquipo),y=u(s=>s.clients),[D,c]=h.useState(!1),[d,v]=h.useState(null),[a,l]=h.useState({tipo:"",marca:"",modelo:"",serial:"",estado:"Disponible",clienteId:"",clienteNombre:"",ubicacion:""}),{filteredData:w,searchInput:k,setSearchInput:U,filters:p,updateFilter:E,resetFilters:R}=V(o,{searchFields:["serial","modelo","marca","clienteNombre"],initialFilters:{tipo:"all",estado:"all"}}),m=h.useMemo(()=>{const s=o.length,t=o.filter(n=>n.estado==="En uso").length,i=o.filter(n=>n.estado==="Disponible").length,r=o.filter(n=>n.estado==="En reparación").length;return{total:s,enUso:t,disponibles:i,enReparacion:r}},[o]),_=()=>{v(null),l({tipo:"ONU",marca:"Huawei",modelo:"",serial:"",estado:"Disponible",clienteId:"",clienteNombre:"",ubicacion:"Almacén"}),c(!0)},L=s=>{v(s.id),l({tipo:s.tipo,marca:s.marca,modelo:s.modelo,serial:s.serial,estado:s.estado,clienteId:s.clienteId||"",clienteNombre:s.clienteNombre||"",ubicacion:s.ubicacion||""}),c(!0)},B=()=>{if(!(!a.tipo||!a.serial)){if(d){const s=o.find(i=>i.id===d),t={...a};a.estado==="En uso"&&s?.estado!=="En uso"?t.fechaAsignacion=new Date().toISOString().split("T")[0]:a.estado!=="En uso"&&(t.fechaAsignacion=null,t.clienteId="",t.clienteNombre=""),O(d,t)}else z({...a,fechaAsignacion:a.estado==="En uso"?new Date().toISOString().split("T")[0]:null});c(!1)}},F=s=>{const t=s.target.value;if(t){const i=y.find(r=>r.id===t);l(r=>({...r,clienteId:t,clienteNombre:i?.nombre||""}))}else l(i=>({...i,clienteId:"",clienteNombre:""}))};return e.jsxs("div",{className:"animate-fade p-4 sm:p-6 sm:px-8 h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-[26px] font-bold tracking-tight",children:"Inventario de Equipos"}),e.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Gestión de ONTs, CPEs, routers y equipos de red"})]}),e.jsx(x,{onClick:_,icon:K,className:"w-full sm:w-auto justify-center",children:"Registrar Equipo"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[e.jsx(g,{title:"Total Equipos",value:m.total,subtitle:"Inventario completo",icon:e.jsx(f,{size:20}),color:"#3b82f6"}),e.jsx(g,{title:"En Uso",value:m.enUso,subtitle:"Asignados a clientes",icon:e.jsx(P,{size:20}),color:"#10b981"}),e.jsx(g,{title:"Disponibles",value:m.disponibles,subtitle:"En almacén",icon:e.jsx(Z,{size:20}),color:"#8b5cf6"}),e.jsx(g,{title:"En Reparación",value:m.enReparacion,subtitle:"Taller técnico",icon:e.jsx(H,{size:20}),color:"#f59e0b"})]}),e.jsxs("div",{className:"flex gap-3 mb-5 flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-0 sm:min-w-[300px]",children:e.jsx(b,{value:k,onChange:s=>U(s.target.value),placeholder:"Buscar por serial, modelo, marca o cliente...",icon:Q})}),e.jsx("div",{className:"w-full sm:w-[180px]",children:e.jsxs("select",{value:p.tipo,onChange:s=>E("tipo",s.target.value),className:"w-full h-[42px] px-3 rounded-xl bg-bg-secondary border border-border text-sm text-text-primary focus:border-accent-blue outline-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"Todos los tipos"}),M.map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{className:"w-full sm:w-[180px]",children:e.jsxs("select",{value:p.estado,onChange:s=>E("estado",s.target.value),className:"w-full h-[42px] px-3 rounded-xl bg-bg-secondary border border-border text-sm text-text-primary focus:border-accent-blue outline-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),A.map(s=>e.jsx("option",{value:s,children:s},s))]})}),(k||p.tipo!=="all"||p.estado!=="all")&&e.jsx(x,{variant:"ghost",icon:C,onClick:R,children:"Limpiar"})]}),e.jsx(N,{padding:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-[13px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[11px] text-text-muted uppercase border-b border-border",children:[e.jsx("th",{className:"py-4 px-4 font-semibold tracking-wider",children:"ID"}),e.jsx("th",{className:"py-4 px-4 font-semibold tracking-wider",children:"Tipo"}),e.jsx("th",{className:"py-4 px-4 font-semibold tracking-wider",children:"Marca / Modelo"}),e.jsx("th",{className:"py-4 px-4 font-semibold tracking-wider",children:"Serial"}),e.jsx("th",{className:"py-4 px-4 font-semibold tracking-wider",children:"Estado"}),e.jsx("th",{className:"py-4 px-4 font-semibold tracking-wider",children:"Asignado a"}),e.jsx("th",{className:"py-4 px-4 font-semibold tracking-wider",children:"Ubicación"}),e.jsx("th",{className:"py-4 px-4 text-center font-semibold tracking-wider",children:"Acciones"})]})}),e.jsxs("tbody",{className:"divide-y divide-border/50",children:[w.map(s=>{const t=T[s.tipo]||f;return e.jsxs("tr",{className:"hover:bg-bg-card-hover transition-colors",children:[e.jsx("td",{className:"py-4 px-4 font-mono text-text-muted text-[11px]",children:s.id}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-accent-blue/5",children:e.jsx(t,{size:14,className:"text-accent-blue"})}),e.jsx("span",{className:"font-medium text-text-primary",children:s.tipo})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-text-primary",children:s.marca}),e.jsx("span",{className:"text-[11px] text-text-muted",children:s.modelo})]})}),e.jsx("td",{className:"py-4 px-4 font-mono text-xs",children:s.serial}),e.jsx("td",{className:"py-4 px-4",children:e.jsx(W,{variant:ie[s.estado],dot:!0,children:s.estado})}),e.jsx("td",{className:"py-4 px-4 text-xs",children:s.clienteNombre?e.jsx("span",{className:"font-medium text-text-primary",children:s.clienteNombre}):e.jsx("span",{className:"text-text-muted",children:"—"})}),e.jsx("td",{className:"py-4 px-4 text-xs text-text-secondary",children:s.ubicacion}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx($,{getTextFn:()=>G(s)}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>L(s),children:e.jsx(Y,{size:14})})]})})]},s.id)}),w.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-12 text-center text-text-muted text-sm",children:"No se encontraron equipos"})})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-6",children:["ONU","Router","Antena CPE"].map(s=>{const t=o.filter(n=>n.tipo===s).length,i=o.filter(n=>n.tipo===s&&n.estado==="En uso").length,r=T[s]||f;return e.jsxs(N,{padding:"p-5",className:"hover:border-accent-blue/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-blue/10 flex items-center justify-center",children:e.jsx(r,{size:18,className:"text-accent-blue"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:s}),e.jsxs("p",{className:"text-[11px] text-text-muted uppercase tracking-wider",children:[t," unidades"]})]})]}),e.jsx("div",{className:"h-2 bg-bg-secondary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-accent-blue rounded-full transition-all duration-500",style:{width:`${t>0?i/t*100:0}%`}})}),e.jsxs("div",{className:"flex justify-between mt-2.5",children:[e.jsxs("p",{className:"text-[11px] font-medium text-text-primary",children:[i," en uso"]}),e.jsxs("p",{className:"text-[11px] text-text-muted",children:[t-i," disponibles"]})]})]},s)})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-in fade-in duration-200",onClick:()=>c(!1),children:e.jsxs(N,{className:"w-full max-w-lg shadow-2xl animate-in zoom-in-95 duration-200",padding:"p-0",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-border",children:[e.jsx("h3",{className:"text-base font-bold",children:d?"Editar Equipo":"Registrar Equipo"}),e.jsx("button",{onClick:()=>c(!1),className:"text-text-muted hover:text-text-primary cursor-pointer bg-transparent border-none",children:e.jsx(C,{size:18})})]}),e.jsxs("div",{className:"p-6 flex flex-col gap-5",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-[11px] text-text-secondary uppercase font-bold tracking-wider",children:"Tipo *"}),e.jsx("select",{value:a.tipo,onChange:s=>l(t=>({...t,tipo:s.target.value})),className:"w-full py-2.5 px-3 rounded-xl bg-bg-secondary border border-border text-sm text-text-primary outline-none focus:border-accent-blue transition-colors",children:M.map(s=>e.jsx("option",{children:s},s))})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-[11px] text-text-secondary uppercase font-bold tracking-wider",children:"Marca"}),e.jsx("select",{value:a.marca,onChange:s=>l(t=>({...t,marca:s.target.value})),className:"w-full py-2.5 px-3 rounded-xl bg-bg-secondary border border-border text-sm text-text-primary outline-none focus:border-accent-blue transition-colors",children:ae.map(s=>e.jsx("option",{children:s},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-[11px] text-text-secondary uppercase font-bold tracking-wider",children:"Modelo"}),e.jsx(b,{value:a.modelo,onChange:s=>l(t=>({...t,modelo:s.target.value})),placeholder:"ej. HG8310M"})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-[11px] text-text-secondary uppercase font-bold tracking-wider",children:"Serial *"}),e.jsx(b,{value:a.serial,onChange:s=>l(t=>({...t,serial:s.target.value})),placeholder:"Número de serie"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-[11px] text-text-secondary uppercase font-bold tracking-wider",children:"Estado"}),e.jsx("select",{value:a.estado,onChange:s=>l(t=>({...t,estado:s.target.value})),className:"w-full py-2.5 px-3 rounded-xl bg-bg-secondary border border-border text-sm text-text-primary outline-none focus:border-accent-blue transition-colors",children:A.map(s=>e.jsx("option",{children:s},s))})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-[11px] text-text-secondary uppercase font-bold tracking-wider",children:"Ubicación"}),e.jsx(b,{value:a.ubicacion,onChange:s=>l(t=>({...t,ubicacion:s.target.value})),placeholder:"ej. Almacén, VILLA 5"})]})]}),a.estado==="En uso"&&e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-[11px] text-text-secondary uppercase font-bold tracking-wider",children:"Asignar a Cliente"}),e.jsxs("select",{value:a.clienteId,onChange:F,className:"w-full py-2.5 px-3 rounded-xl bg-bg-secondary border border-border text-sm text-text-primary outline-none focus:border-accent-blue transition-colors",children:[e.jsx("option",{value:"",children:"Sin asignar"}),y.map(s=>e.jsxs("option",{value:s.id,children:[s.id," - ",s.nombre]},s.id))]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-border bg-bg-secondary/20",children:[e.jsx(x,{variant:"ghost",onClick:()=>c(!1),children:"Cancelar"}),e.jsx(x,{onClick:B,icon:q,children:d?"Guardar Cambios":"Registrar Equipo"})]})]})})]})}export{ge as default};
