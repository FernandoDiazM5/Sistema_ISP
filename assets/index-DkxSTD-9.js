const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginPage-zrxINIq8.js","assets/authAPI-BlcW3DtW.js","assets/mail-C8O6zBpm.js","assets/eye-off-hbFxMuLP.js","assets/eye-DvE9GMPz.js","assets/DashboardPage-Bb21VZa1.js","assets/KPICard-nOV0lUNu.js","assets/circle-alert-DJ22Q46w.js","assets/ClientesPage-DRgGVMou.js","assets/Input-DuOtB1G3.js","assets/search-CuF6bJU4.js","assets/arrow-up-down-CW9l4Z-Q.js","assets/Adjuntos-C2tfHk97.js","assets/upload-Wj2hy97V.js","assets/download-360FgciG.js","assets/chevron-right-Cw9tRM1F.js","assets/StatusBadge-DJElS2c8.js","assets/TicketCreateModal-otvk64mr.js","assets/map-pin-5RE5zs1W.js","assets/Button-HoEHEbGl.js","assets/funnel-CV0y27Mo.js","assets/user-DMnxxZBD.js","assets/ClienteDetalle-BpIMMwK_.js","assets/gauge-DD41Xg86.js","assets/radio-CR-dY--K.js","assets/zap-CE27zL5H.js","assets/monitor-Cxrw9ljy.js","assets/history-H6zcp7s0.js","assets/clock-CAsCQzMU.js","assets/chevron-down-Bm8JXgQ7.js","assets/circle-check-DJZXFKLl.js","assets/ImportacionPage-J9ftEbhH.js","assets/xlsx-CNerDvZX.js","assets/file-spreadsheet-Bb1HaqOi.js","assets/check-P-5L82lY.js","assets/pen-line-Cw6bHU9A.js","assets/square-BkdJ_o06.js","assets/plus-DXfKPIRb.js","assets/TicketsPage-tj0kRHUj.js","assets/ResolutionModal-GOTOIquJ.js","assets/CopyButton-B935DYgE.js","assets/Badge-cB_na4wp.js","assets/Card-CapfQget.js","assets/kanban-WHDVxjOB.js","assets/DiagnosticFields-DbvYgBIY.js","assets/activity-BunW6dO6.js","assets/TicketsPage-D1-0B2xV.css","assets/AveriasPage-CFHEkwq7.js","assets/pencil-B7_abmLC.js","assets/SoporteRemotoPage-DecWybQc.js","assets/ReportesPage-D-XA6K-J.js","assets/dollar-sign-CHjgF10H.js","assets/EquiposPage-DoSOmEG7.js","assets/save-AmjlBr8u.js","assets/ConfiguracionPage-CfkY8IRF.js","assets/shield-B0Ph1SqW.js","assets/sparkles-BFfDd-Ww.js","assets/WhatsAppPage-LliLw9G7.js","assets/phone-BsJ6dJY8.js","assets/TecnicosPage-Os1Y2hJu.js","assets/VisitasTecnicasPage-DS60tkoD.js","assets/arrow-right-z-d0Aubx.js","assets/InstalacionesPage-BczFS6BO.js","assets/PlantaExternaPage-CWt0HrQs.js","assets/PostVentaPage-D7gvK9SD.js","assets/RequerimientosPage-DbDo0Ise.js","assets/UsuariosPage-BEcMs_7A.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var M4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oR(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ep={exports:{}},vu={};var o0;function lR(){if(o0)return vu;o0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:i,key:c,ref:a!==void 0?a:null,props:l}}return vu.Fragment=e,vu.jsx=t,vu.jsxs=t,vu}var l0;function uR(){return l0||(l0=1,Ep.exports=lR()),Ep.exports}var G=uR(),Tp={exports:{}},Ie={};var u0;function cR(){if(u0)return Ie;u0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),b=Symbol.iterator;function D(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,z={};function ne(O,ee,ce){this.props=O,this.context=ee,this.refs=z,this.updater=ce||F}ne.prototype.isReactComponent={},ne.prototype.setState=function(O,ee){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ee,"setState")},ne.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function te(){}te.prototype=ne.prototype;function ie(O,ee,ce){this.props=O,this.context=ee,this.refs=z,this.updater=ce||F}var ye=ie.prototype=new te;ye.constructor=ie,K(ye,ne.prototype),ye.isPureReactComponent=!0;var de=Array.isArray;function Ee(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(O,ee,ce){var fe=ce.ref;return{$$typeof:s,type:O,key:ee,ref:fe!==void 0?fe:null,props:ce}}function M(O,ee){return I(O.type,ee,O.props)}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function L(O){var ee={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ce){return ee[ce]})}var C=/\/+/g;function ht(O,ee){return typeof O=="object"&&O!==null&&O.key!=null?L(""+O.key):ee.toString(36)}function Ft(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Ee,Ee):(O.status="pending",O.then(function(ee){O.status==="pending"&&(O.status="fulfilled",O.value=ee)},function(ee){O.status==="pending"&&(O.status="rejected",O.reason=ee)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function J(O,ee,ce,fe,we){var De=typeof O;(De==="undefined"||De==="boolean")&&(O=null);var ze=!1;if(O===null)ze=!0;else switch(De){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(O.$$typeof){case s:case e:ze=!0;break;case v:return ze=O._init,J(ze(O._payload),ee,ce,fe,we)}}if(ze)return we=we(O),ze=fe===""?"."+ht(O,0):fe,de(we)?(ce="",ze!=null&&(ce=ze.replace(C,"$&/")+"/"),J(we,ee,ce,"",function(Vs){return Vs})):we!=null&&(N(we)&&(we=M(we,ce+(we.key==null||O&&O.key===we.key?"":(""+we.key).replace(C,"$&/")+"/")+ze)),ee.push(we)),1;ze=0;var Ht=fe===""?".":fe+":";if(de(O))for(var ft=0;ft<O.length;ft++)fe=O[ft],De=Ht+ht(fe,ft),ze+=J(fe,ee,ce,De,we);else if(ft=D(O),typeof ft=="function")for(O=ft.call(O),ft=0;!(fe=O.next()).done;)fe=fe.value,De=Ht+ht(fe,ft++),ze+=J(fe,ee,ce,De,we);else if(De==="object"){if(typeof O.then=="function")return J(Ft(O),ee,ce,fe,we);throw ee=String(O),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ue(O,ee,ce){if(O==null)return O;var fe=[],we=0;return J(O,fe,"","",function(De){return ee.call(ce,De,we++)}),fe}function be(O){if(O._status===-1){var ee=O._result;ee=ee(),ee.then(function(ce){(O._status===0||O._status===-1)&&(O._status=1,O._result=ce)},function(ce){(O._status===0||O._status===-1)&&(O._status=2,O._result=ce)}),O._status===-1&&(O._status=0,O._result=ee)}if(O._status===1)return O._result.default;throw O._result}var je=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},$e={map:ue,forEach:function(O,ee,ce){ue(O,function(){ee.apply(this,arguments)},ce)},count:function(O){var ee=0;return ue(O,function(){ee++}),ee},toArray:function(O){return ue(O,function(ee){return ee})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ie.Activity=T,Ie.Children=$e,Ie.Component=ne,Ie.Fragment=t,Ie.Profiler=a,Ie.PureComponent=ie,Ie.StrictMode=i,Ie.Suspense=p,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},Ie.cache=function(O){return function(){return O.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(O,ee,ce){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var fe=K({},O.props),we=O.key;if(ee!=null)for(De in ee.key!==void 0&&(we=""+ee.key),ee)!w.call(ee,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ee.ref===void 0||(fe[De]=ee[De]);var De=arguments.length-2;if(De===1)fe.children=ce;else if(1<De){for(var ze=Array(De),Ht=0;Ht<De;Ht++)ze[Ht]=arguments[Ht+2];fe.children=ze}return I(O.type,we,fe)},Ie.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ie.createElement=function(O,ee,ce){var fe,we={},De=null;if(ee!=null)for(fe in ee.key!==void 0&&(De=""+ee.key),ee)w.call(ee,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(we[fe]=ee[fe]);var ze=arguments.length-2;if(ze===1)we.children=ce;else if(1<ze){for(var Ht=Array(ze),ft=0;ft<ze;ft++)Ht[ft]=arguments[ft+2];we.children=Ht}if(O&&O.defaultProps)for(fe in ze=O.defaultProps,ze)we[fe]===void 0&&(we[fe]=ze[fe]);return I(O,De,we)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(O){return{$$typeof:d,render:O}},Ie.isValidElement=N,Ie.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:be}},Ie.memo=function(O,ee){return{$$typeof:g,type:O,compare:ee===void 0?null:ee}},Ie.startTransition=function(O){var ee=R.T,ce={};R.T=ce;try{var fe=O(),we=R.S;we!==null&&we(ce,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Ee,je)}catch(De){je(De)}finally{ee!==null&&ce.types!==null&&(ee.types=ce.types),R.T=ee}},Ie.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ie.use=function(O){return R.H.use(O)},Ie.useActionState=function(O,ee,ce){return R.H.useActionState(O,ee,ce)},Ie.useCallback=function(O,ee){return R.H.useCallback(O,ee)},Ie.useContext=function(O){return R.H.useContext(O)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(O,ee){return R.H.useDeferredValue(O,ee)},Ie.useEffect=function(O,ee){return R.H.useEffect(O,ee)},Ie.useEffectEvent=function(O){return R.H.useEffectEvent(O)},Ie.useId=function(){return R.H.useId()},Ie.useImperativeHandle=function(O,ee,ce){return R.H.useImperativeHandle(O,ee,ce)},Ie.useInsertionEffect=function(O,ee){return R.H.useInsertionEffect(O,ee)},Ie.useLayoutEffect=function(O,ee){return R.H.useLayoutEffect(O,ee)},Ie.useMemo=function(O,ee){return R.H.useMemo(O,ee)},Ie.useOptimistic=function(O,ee){return R.H.useOptimistic(O,ee)},Ie.useReducer=function(O,ee,ce){return R.H.useReducer(O,ee,ce)},Ie.useRef=function(O){return R.H.useRef(O)},Ie.useState=function(O){return R.H.useState(O)},Ie.useSyncExternalStore=function(O,ee,ce){return R.H.useSyncExternalStore(O,ee,ce)},Ie.useTransition=function(){return R.H.useTransition()},Ie.version="19.2.4",Ie}var c0;function Ng(){return c0||(c0=1,Tp.exports=cR()),Tp.exports}var j=Ng();const Cu=oR(j);var Sp={exports:{}},Eu={},bp={exports:{}},Ap={};var h0;function hR(){return h0||(h0=1,(function(s){function e(J,ue){var be=J.length;J.push(ue);e:for(;0<be;){var je=be-1>>>1,$e=J[je];if(0<a($e,ue))J[je]=ue,J[be]=$e,be=je;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var ue=J[0],be=J.pop();if(be!==ue){J[0]=be;e:for(var je=0,$e=J.length,O=$e>>>1;je<O;){var ee=2*(je+1)-1,ce=J[ee],fe=ee+1,we=J[fe];if(0>a(ce,be))fe<$e&&0>a(we,ce)?(J[je]=we,J[fe]=be,je=fe):(J[je]=ce,J[ee]=be,je=ee);else if(fe<$e&&0>a(we,be))J[je]=we,J[fe]=be,je=fe;else break e}}return ue}function a(J,ue){var be=J.sortIndex-ue.sortIndex;return be!==0?be:J.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,T=null,b=3,D=!1,F=!1,K=!1,z=!1,ne=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function ye(J){for(var ue=t(g);ue!==null;){if(ue.callback===null)i(g);else if(ue.startTime<=J)i(g),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(g)}}function de(J){if(K=!1,ye(J),!F)if(t(p)!==null)F=!0,Ee||(Ee=!0,L());else{var ue=t(g);ue!==null&&Ft(de,ue.startTime-J)}}var Ee=!1,R=-1,w=5,I=-1;function M(){return z?!0:!(s.unstable_now()-I<w)}function N(){if(z=!1,Ee){var J=s.unstable_now();I=J;var ue=!0;try{e:{F=!1,K&&(K=!1,te(R),R=-1),D=!0;var be=b;try{t:{for(ye(J),T=t(p);T!==null&&!(T.expirationTime>J&&M());){var je=T.callback;if(typeof je=="function"){T.callback=null,b=T.priorityLevel;var $e=je(T.expirationTime<=J);if(J=s.unstable_now(),typeof $e=="function"){T.callback=$e,ye(J),ue=!0;break t}T===t(p)&&i(p),ye(J)}else i(p);T=t(p)}if(T!==null)ue=!0;else{var O=t(g);O!==null&&Ft(de,O.startTime-J),ue=!1}}break e}finally{T=null,b=be,D=!1}ue=void 0}}finally{ue?L():Ee=!1}}}var L;if(typeof ie=="function")L=function(){ie(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ht=C.port2;C.port1.onmessage=N,L=function(){ht.postMessage(null)}}else L=function(){ne(N,0)};function Ft(J,ue){R=ne(function(){J(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(J){J.callback=null},s.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<J?Math.floor(1e3/J):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(J){switch(b){case 1:case 2:case 3:var ue=3;break;default:ue=b}var be=b;b=ue;try{return J()}finally{b=be}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var be=b;b=J;try{return ue()}finally{b=be}},s.unstable_scheduleCallback=function(J,ue,be){var je=s.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?je+be:je):be=je,J){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=be+$e,J={id:v++,callback:ue,priorityLevel:J,startTime:be,expirationTime:$e,sortIndex:-1},be>je?(J.sortIndex=be,e(g,J),t(p)===null&&J===t(g)&&(K?(te(R),R=-1):K=!0,Ft(de,be-je))):(J.sortIndex=$e,e(p,J),F||D||(F=!0,Ee||(Ee=!0,L()))),J},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(J){var ue=b;return function(){var be=b;b=ue;try{return J.apply(this,arguments)}finally{b=be}}}})(Ap)),Ap}var f0;function fR(){return f0||(f0=1,bp.exports=hR()),bp.exports}var wp={exports:{}},ln={};var d0;function dR(){if(d0)return ln;d0=1;var s=Ng();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:g,implementation:v}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ln.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},ln.flushSync=function(p){var g=c.T,v=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=v,i.d.f()}},ln.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},ln.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},ln.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,T=d(v,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:D}):v==="script"&&i.d.X(p,{crossOrigin:T,integrity:b,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ln.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},ln.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,T=d(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ln.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},ln.requestFormReset=function(p){i.d.r(p)},ln.unstable_batchedUpdates=function(p,g){return p(g)},ln.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},ln.useFormStatus=function(){return c.H.useHostTransitionStatus()},ln.version="19.2.4",ln}var m0;function mR(){if(m0)return wp.exports;m0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),wp.exports=dR(),wp.exports}var p0;function pR(){if(p0)return Eu;p0=1;var s=fR(),e=Ng(),t=mR();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(i(188))}function g(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,u=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),n;if(m===u)return p(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,S=f.child;S;){if(S===o){_=!0,o=f,u=m;break}if(S===u){_=!0,u=f,o=m;break}S=S.sibling}if(!_){for(S=m.child;S;){if(S===o){_=!0,o=m,u=f;break}if(S===u){_=!0,u=m,o=f;break}S=S.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function v(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=v(n),r!==null)return r;n=n.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function ht(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case K:return"Fragment";case ne:return"Profiler";case z:return"StrictMode";case de:return"Suspense";case Ee:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case F:return"Portal";case ie:return n.displayName||"Context";case te:return(n._context.displayName||"Context")+".Consumer";case ye:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return r=n.displayName||null,r!==null?r:ht(n.type)||"Memo";case w:r=n._payload,n=n._init;try{return ht(n(r))}catch{}}return null}var Ft=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},je=[],$e=-1;function O(n){return{current:n}}function ee(n){0>$e||(n.current=je[$e],je[$e]=null,$e--)}function ce(n,r){$e++,je[$e]=n.current,n.current=r}var fe=O(null),we=O(null),De=O(null),ze=O(null);function Ht(n,r){switch(ce(De,r),ce(we,n),ce(fe,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?DE(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=DE(r),n=VE(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ee(fe),ce(fe,n)}function ft(){ee(fe),ee(we),ee(De)}function Vs(n){n.memoizedState!==null&&ce(ze,n);var r=fe.current,o=VE(r,n.type);r!==o&&(ce(we,n),ce(fe,o))}function Ma(n){we.current===n&&(ee(fe),ee(we)),ze.current===n&&(ee(ze),pu._currentValue=be)}var Pa,La;function Ai(n){if(Pa===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Pa=r&&r[1]||"",La=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pa+n+La}var pl=!1;function Ns(n,r){if(!n||pl)return"";pl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(Y){var H=Y}Reflect.construct(n,[],W)}else{try{W.call()}catch(Y){H=Y}n.call(W.prototype)}}else{try{throw Error()}catch(Y){H=Y}(W=n())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(Y){if(Y&&H&&typeof Y.stack=="string")return[Y.stack,H.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],S=m[1];if(_&&S){var x=_.split(`
`),q=S.split(`
`);for(f=u=0;u<x.length&&!x[u].includes("DetermineComponentFrameRoot");)u++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(u===x.length||f===q.length)for(u=x.length-1,f=q.length-1;1<=u&&0<=f&&x[u]!==q[f];)f--;for(;1<=u&&0<=f;u--,f--)if(x[u]!==q[f]){if(u!==1||f!==1)do if(u--,f--,0>f||x[u]!==q[f]){var X=`
`+x[u].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=u&&0<=f);break}}}finally{pl=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ai(o):""}function gl(n,r){switch(n.tag){case 26:case 27:case 5:return Ai(n.type);case 16:return Ai("Lazy");case 13:return n.child!==r&&r!==null?Ai("Suspense Fallback"):Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return Ns(n.type,!1);case 11:return Ns(n.type.render,!1);case 1:return Ns(n.type,!0);case 31:return Ai("Activity");default:return""}}function yl(n){try{var r="",o=null;do r+=gl(n,o),o=n,n=n.return;while(n);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Dt=Object.prototype.hasOwnProperty,Gt=s.unstable_scheduleCallback,xr=s.unstable_cancelCallback,Sd=s.unstable_shouldYield,Ac=s.unstable_requestPaint,gn=s.unstable_now,Os=s.unstable_getCurrentPriorityLevel,_l=s.unstable_ImmediatePriority,vl=s.unstable_UserBlockingPriority,Dr=s.unstable_NormalPriority,bd=s.unstable_LowPriority,wc=s.unstable_IdlePriority,Rc=s.log,Ic=s.unstable_setDisableYieldValue,li=null,en=null;function Kn(n){if(typeof Rc=="function"&&Ic(n),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(li,n)}catch{}}var At=Math.clz32?Math.clz32:xc,Cc=Math.log,Ua=Math.LN2;function xc(n){return n>>>=0,n===0?32:31-(Cc(n)/Ua|0)|0}var wi=256,Ms=262144,Vt=4194304;function Ri(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ii(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var S=u&134217727;return S!==0?(u=S&~m,u!==0?f=Ri(u):(_&=S,_!==0?f=Ri(_):o||(o=S&~n,o!==0&&(f=Ri(o))))):(S=u&~m,S!==0?f=Ri(S):_!==0?f=Ri(_):o||(o=u&~n,o!==0&&(f=Ri(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function ui(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Ad(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dc(){var n=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),n}function Ci(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Ps(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function wd(n,r,o,u,f,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,x=n.expirationTimes,q=n.hiddenUpdates;for(o=_&~o;0<o;){var X=31-At(o),W=1<<X;S[X]=0,x[X]=-1;var H=q[X];if(H!==null)for(q[X]=null,X=0;X<H.length;X++){var Y=H[X];Y!==null&&(Y.lane&=-536870913)}o&=~W}u!==0&&Ls(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~r))}function Ls(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-At(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function El(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-At(o),f=1<<u;f&r|n[u]&r&&(n[u]|=r),o&=~f}}function Tl(n,r){var o=r&-r;return o=(o&42)!==0?1:Us(o),(o&(n.suspendedLanes|r))!==0?0:o}function Us(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function er(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Vc(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:e0(n.type))}function ci(n,r){var o=ue.p;try{return ue.p=n,r()}finally{ue.p=o}}var hi=Math.random().toString(36).slice(2),Nt="__reactFiber$"+hi,$t="__reactProps$"+hi,xi="__reactContainer$"+hi,ka="__reactEvents$"+hi,Rd="__reactListeners$"+hi,Nc="__reactHandles$"+hi,Oc="__reactResources$"+hi,Di="__reactMarker$"+hi;function za(n){delete n[Nt],delete n[$t],delete n[ka],delete n[Rd],delete n[Nc]}function Vi(n){var r=n[Nt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[xi]||o[Nt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=kE(n);n!==null;){if(o=n[Nt])return o;n=kE(n)}return r}n=o,o=n.parentNode}return null}function Qn(n){if(n=n[Nt]||n[xi]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Dn(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function Ni(n){var r=n[Oc];return r||(r=n[Oc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ot(n){n[Di]=!0}var Sl=new Set,bl={};function Oi(n,r){Mi(n,r),Mi(n+"Capture",r)}function Mi(n,r){for(bl[n]=r,n=0;n<r.length;n++)Sl.add(r[n])}var Al=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wl={},Rl={};function Mc(n){return Dt.call(Rl,n)?!0:Dt.call(wl,n)?!1:Al.test(n)?Rl[n]=!0:(wl[n]=!0,!1)}function Ba(n,r,o){if(Mc(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function Vn(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Mt(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}function Xt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Vr(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Il(n,r,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Xe(n){if(!n._valueTracker){var r=Vr(n)?"checked":"value";n._valueTracker=Il(n,r,""+n[r])}}function ks(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=Vr(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function Pi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var zs=/[\n"\\]/g;function En(n){return n.replace(zs,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function qa(n,r,o,u,f,m,_,S){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),r!=null?_==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Xt(r)):n.value!==""+Xt(r)&&(n.value=""+Xt(r)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),r!=null?Cl(n,_,Xt(r)):o!=null?Cl(n,_,Xt(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Xt(S):n.removeAttribute("name")}function Pc(n,r,o,u,f,m,_,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Xe(n);return}o=o!=null?""+Xt(o):"",r=r!=null?""+Xt(r):o,S||r===n.value||(n.value=r),n.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=S?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Xe(n)}function Cl(n,r,o){r==="number"&&Pi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Nr(n,r,o,u){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Xt(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Lc(n,r,o){if(r!=null&&(r=""+Xt(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+Xt(o):""}function Or(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(Ft(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=Xt(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Xe(n)}function Tn(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Uc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xl(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||Uc.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Dl(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&xl(n,f,u)}else for(var m in r)r.hasOwnProperty(m)&&xl(n,m,r[m])}function ja(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fa(n){return Mr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function fi(){}var Vl=null;function Yn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Pr=null,Li=null;function Bs(n){var r=Qn(n);if(r&&(n=r.stateNode)){var o=n[$t]||null;e:switch(n=r.stateNode,r.type){case"input":if(qa(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+En(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var f=u[$t]||null;if(!f)throw Error(i(90));qa(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&ks(u)}break e;case"textarea":Lc(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Nr(n,!!o.multiple,r,!1)}}}var Ha=!1;function Lr(n,r,o){if(Ha)return n(r,o);Ha=!0;try{var u=n(r);return u}finally{if(Ha=!1,(Pr!==null||Li!==null)&&(Vh(),Pr&&(r=Pr,n=Li,Li=Pr=null,Bs(r),n)))for(r=0;r<n.length;r++)Bs(n[r])}}function di(n,r){var o=n.stateNode;if(o===null)return null;var u=o[$t]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qs=!1;if($n)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){qs=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{qs=!1}var Ui=null,Nl=null,js=null;function Ol(){if(js)return js;var n,r=Nl,o=r.length,u,f="value"in Ui?Ui.value:Ui.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&r[o-u]===f[m-u];u++);return js=f.slice(n,1<u?1-u:void 0)}function Fs(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function tr(){return!0}function mi(){return!1}function tn(n){function r(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?tr:mi,this.isPropagationStopped=mi,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),r}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=tn(nr),Ur=T({},nr,{view:0,detail:0}),Ml=tn(Ur),kr,Ga,zi,Ka=T({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zi&&(zi&&n.type==="mousemove"?(kr=n.screenX-zi.screenX,Ga=n.screenY-zi.screenY):Ga=kr=0,zi=n),kr)},movementY:function(n){return"movementY"in n?n.movementY:Ga}}),Pl=tn(Ka),Hs=T({},Ka,{dataTransfer:0}),zc=tn(Hs),Bc=T({},Ur,{relatedTarget:0}),Gs=tn(Bc),Ll=T({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),qc=tn(Ll),Qa=T({},nr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),jc=tn(Qa),Fc=T({},nr,{data:0}),Bi=tn(Fc),Hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qc(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Kc[n])?!!r[n]:!1}function zr(){return Qc}var yn=T({},Ur,{key:function(n){if(n.key){var r=Hc[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Fs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Gc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(n){return n.type==="keypress"?Fs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Yc=tn(yn),$c=T({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ir=tn($c),h=T({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),y=tn(h),E=T({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=tn(E),k=T({},Ka,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=tn(k),oe=T({},nr,{newState:0,oldState:0}),Ce=tn(oe),wt=[9,13,27,32],Ge=$n&&"CompositionEvent"in window,dt=null;$n&&"documentMode"in document&&(dt=document.documentMode);var Xn=$n&&"TextEvent"in window&&!dt,qi=$n&&(!Ge||dt&&8<dt&&11>=dt),pi=" ",gi=!1;function Ks(n,r){switch(n){case"keyup":return wt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ya(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $a=!1;function VA(n,r){switch(n){case"compositionend":return Ya(r);case"keypress":return r.which!==32?null:(gi=!0,pi);case"textInput":return n=r.data,n===pi&&gi?null:n;default:return null}}function NA(n,r){if($a)return n==="compositionend"||!Ge&&Ks(n,r)?(n=Ol(),js=Nl=Ui=null,$a=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return qi&&r.locale!=="ko"?null:r.data;default:return null}}var OA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qy(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!OA[n.type]:r==="textarea"}function jy(n,r,o,u){Pr?Li?Li.push(u):Li=[u]:Pr=u,r=kh(r,"onChange"),0<r.length&&(o=new ki("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var Ul=null,kl=null;function MA(n){AE(n,0)}function Xc(n){var r=Dn(n);if(ks(r))return n}function Fy(n,r){if(n==="change")return r}var Hy=!1;if($n){var Id;if($n){var Cd="oninput"in document;if(!Cd){var Gy=document.createElement("div");Gy.setAttribute("oninput","return;"),Cd=typeof Gy.oninput=="function"}Id=Cd}else Id=!1;Hy=Id&&(!document.documentMode||9<document.documentMode)}function Ky(){Ul&&(Ul.detachEvent("onpropertychange",Qy),kl=Ul=null)}function Qy(n){if(n.propertyName==="value"&&Xc(kl)){var r=[];jy(r,kl,n,Yn(n)),Lr(MA,r)}}function PA(n,r,o){n==="focusin"?(Ky(),Ul=r,kl=o,Ul.attachEvent("onpropertychange",Qy)):n==="focusout"&&Ky()}function LA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xc(kl)}function UA(n,r){if(n==="click")return Xc(r)}function kA(n,r){if(n==="input"||n==="change")return Xc(r)}function zA(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Nn=typeof Object.is=="function"?Object.is:zA;function zl(n,r){if(Nn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Dt.call(r,f)||!Nn(n[f],r[f]))return!1}return!0}function Yy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $y(n,r){var o=Yy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Yy(o)}}function Xy(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Xy(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Jy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Pi(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Pi(n.document)}return r}function xd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var BA=$n&&"documentMode"in document&&11>=document.documentMode,Xa=null,Dd=null,Bl=null,Vd=!1;function Zy(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Vd||Xa==null||Xa!==Pi(u)||(u=Xa,"selectionStart"in u&&xd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Bl&&zl(Bl,u)||(Bl=u,u=kh(Dd,"onSelect"),0<u.length&&(r=new ki("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=Xa)))}function Qs(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Ja={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionrun:Qs("Transition","TransitionRun"),transitionstart:Qs("Transition","TransitionStart"),transitioncancel:Qs("Transition","TransitionCancel"),transitionend:Qs("Transition","TransitionEnd")},Nd={},Wy={};$n&&(Wy=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function Ys(n){if(Nd[n])return Nd[n];if(!Ja[n])return n;var r=Ja[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Wy)return Nd[n]=r[o];return n}var e_=Ys("animationend"),t_=Ys("animationiteration"),n_=Ys("animationstart"),qA=Ys("transitionrun"),jA=Ys("transitionstart"),FA=Ys("transitioncancel"),i_=Ys("transitionend"),r_=new Map,Od="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Od.push("scrollEnd");function yi(n,r){r_.set(n,r),Oi(r,[n])}var Jc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Jn=[],Za=0,Md=0;function Zc(){for(var n=Za,r=Md=Za=0;r<n;){var o=Jn[r];Jn[r++]=null;var u=Jn[r];Jn[r++]=null;var f=Jn[r];Jn[r++]=null;var m=Jn[r];if(Jn[r++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&s_(o,f,m)}}function Wc(n,r,o,u){Jn[Za++]=n,Jn[Za++]=r,Jn[Za++]=o,Jn[Za++]=u,Md|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Pd(n,r,o,u){return Wc(n,r,o,u),eh(n)}function $s(n,r){return Wc(n,null,null,r),eh(n)}function s_(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-At(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[r]:u.push(r),r.lane=o|536870912),m):null}function eh(n){if(50<lu)throw lu=0,Hm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Wa={};function HA(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(n,r,o,u){return new HA(n,r,o,u)}function Ld(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rr(n,r){var o=n.alternate;return o===null?(o=On(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function a_(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function th(n,r,o,u,f,m){var _=0;if(u=n,typeof n=="function")Ld(n)&&(_=1);else if(typeof n=="string")_=$w(n,o,fe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=On(31,o,r,f),n.elementType=I,n.lanes=m,n;case K:return Xs(o.children,f,m,r);case z:_=8,f|=24;break;case ne:return n=On(12,o,r,f|2),n.elementType=ne,n.lanes=m,n;case de:return n=On(13,o,r,f),n.elementType=de,n.lanes=m,n;case Ee:return n=On(19,o,r,f),n.elementType=Ee,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ie:_=10;break e;case te:_=9;break e;case ye:_=11;break e;case R:_=14;break e;case w:_=16,u=null;break e}_=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return r=On(_,o,r,f),r.elementType=n,r.type=u,r.lanes=m,r}function Xs(n,r,o,u){return n=On(7,n,u,r),n.lanes=o,n}function Ud(n,r,o){return n=On(6,n,null,r),n.lanes=o,n}function o_(n){var r=On(18,null,null,0);return r.stateNode=n,r}function kd(n,r,o){return r=On(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var l_=new WeakMap;function Zn(n,r){if(typeof n=="object"&&n!==null){var o=l_.get(n);return o!==void 0?o:(r={value:n,source:r,stack:yl(r)},l_.set(n,r),r)}return{value:n,source:r,stack:yl(r)}}var eo=[],to=0,nh=null,ql=0,Wn=[],ei=0,Br=null,ji=1,Fi="";function sr(n,r){eo[to++]=ql,eo[to++]=nh,nh=n,ql=r}function u_(n,r,o){Wn[ei++]=ji,Wn[ei++]=Fi,Wn[ei++]=Br,Br=n;var u=ji;n=Fi;var f=32-At(u)-1;u&=~(1<<f),o+=1;var m=32-At(r)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,ji=1<<32-At(r)+f|o<<f|u,Fi=m+n}else ji=1<<m|o<<f|u,Fi=n}function zd(n){n.return!==null&&(sr(n,1),u_(n,1,0))}function Bd(n){for(;n===nh;)nh=eo[--to],eo[to]=null,ql=eo[--to],eo[to]=null;for(;n===Br;)Br=Wn[--ei],Wn[ei]=null,Fi=Wn[--ei],Wn[ei]=null,ji=Wn[--ei],Wn[ei]=null}function c_(n,r){Wn[ei++]=ji,Wn[ei++]=Fi,Wn[ei++]=Br,ji=r.id,Fi=r.overflow,Br=n}var nn=null,ut=null,ke=!1,qr=null,ti=!1,qd=Error(i(519));function jr(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jl(Zn(r,n)),qd}function h_(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[Nt]=n,r[$t]=u,o){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(o=0;o<cu.length;o++)Me(cu[o],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Me("invalid",r),Pc(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Me("invalid",r);break;case"textarea":Me("invalid",r),Or(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||CE(r.textContent,o)?(u.popover!=null&&(Me("beforetoggle",r),Me("toggle",r)),u.onScroll!=null&&Me("scroll",r),u.onScrollEnd!=null&&Me("scrollend",r),u.onClick!=null&&(r.onclick=fi),r=!0):r=!1,r||jr(n,!0)}function f_(n){for(nn=n.return;nn;)switch(nn.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:nn=nn.return}}function no(n){if(n!==nn)return!1;if(!ke)return f_(n),ke=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||sp(n.type,n.memoizedProps)),o=!o),o&&ut&&jr(n),f_(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ut=UE(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ut=UE(n)}else r===27?(r=ut,ns(n.type)?(n=cp,cp=null,ut=n):ut=r):ut=nn?ii(n.stateNode.nextSibling):null;return!0}function Js(){ut=nn=null,ke=!1}function jd(){var n=qr;return n!==null&&(wn===null?wn=n:wn.push.apply(wn,n),qr=null),n}function jl(n){qr===null?qr=[n]:qr.push(n)}var Fd=O(null),Zs=null,ar=null;function Fr(n,r,o){ce(Fd,r._currentValue),r._currentValue=o}function or(n){n._currentValue=Fd.current,ee(Fd)}function Hd(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function Gd(n,r,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var x=0;x<r.length;x++)if(S.context===r[x]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),Hd(m.return,o,n),u||(_=null);break e}m=S.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),Hd(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function io(n,r,o,u){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var S=f.type;Nn(f.pendingProps.value,_.value)||(n!==null?n.push(S):n=[S])}}else if(f===ze.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(pu):n=[pu])}f=f.return}n!==null&&Gd(r,n,o,u),r.flags|=262144}function ih(n){for(n=n.firstContext;n!==null;){if(!Nn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ws(n){Zs=n,ar=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function rn(n){return d_(Zs,n)}function rh(n,r){return Zs===null&&Ws(n),d_(n,r)}function d_(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ar===null){if(n===null)throw Error(i(308));ar=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else ar=ar.next=r;return o}var GA=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},KA=s.unstable_scheduleCallback,QA=s.unstable_NormalPriority,Pt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kd(){return{controller:new GA,data:new Map,refCount:0}}function Fl(n){n.refCount--,n.refCount===0&&KA(QA,function(){n.controller.abort()})}var Hl=null,Qd=0,ro=0,so=null;function YA(n,r){if(Hl===null){var o=Hl=[];Qd=0,ro=Xm(),so={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Qd++,r.then(m_,m_),r}function m_(){if(--Qd===0&&Hl!==null){so!==null&&(so.status="fulfilled");var n=Hl;Hl=null,ro=0,so=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function $A(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var p_=J.S;J.S=function(n,r){Zv=gn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&YA(n,r),p_!==null&&p_(n,r)};var ea=O(null);function Yd(){var n=ea.current;return n!==null?n:at.pooledCache}function sh(n,r){r===null?ce(ea,ea.current):ce(ea,r.pool)}function g_(){var n=Yd();return n===null?null:{parent:Pt._currentValue,pool:n}}var ao=Error(i(460)),$d=Error(i(474)),ah=Error(i(542)),oh={then:function(){}};function y_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function __(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(fi,fi),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,E_(n),n;default:if(typeof r.status=="string")r.then(fi,fi);else{if(n=at,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,E_(n),n}throw na=r,ao}}function ta(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(na=o,ao):o}}var na=null;function v_(){if(na===null)throw Error(i(459));var n=na;return na=null,n}function E_(n){if(n===ao||n===ah)throw Error(i(483))}var oo=null,Gl=0;function lh(n){var r=Gl;return Gl+=1,oo===null&&(oo=[]),__(oo,n,r)}function Kl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function uh(n,r){throw r.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function T_(n){function r(P,V){if(n){var B=P.deletions;B===null?(P.deletions=[V],P.flags|=16):B.push(V)}}function o(P,V){if(!n)return null;for(;V!==null;)r(P,V),V=V.sibling;return null}function u(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function f(P,V){return P=rr(P,V),P.index=0,P.sibling=null,P}function m(P,V,B){return P.index=B,n?(B=P.alternate,B!==null?(B=B.index,B<V?(P.flags|=67108866,V):B):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function _(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function S(P,V,B,Z){return V===null||V.tag!==6?(V=Ud(B,P.mode,Z),V.return=P,V):(V=f(V,B),V.return=P,V)}function x(P,V,B,Z){var Te=B.type;return Te===K?X(P,V,B.props.children,Z,B.key):V!==null&&(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===w&&ta(Te)===V.type)?(V=f(V,B.props),Kl(V,B),V.return=P,V):(V=th(B.type,B.key,B.props,null,P.mode,Z),Kl(V,B),V.return=P,V)}function q(P,V,B,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=kd(B,P.mode,Z),V.return=P,V):(V=f(V,B.children||[]),V.return=P,V)}function X(P,V,B,Z,Te){return V===null||V.tag!==7?(V=Xs(B,P.mode,Z,Te),V.return=P,V):(V=f(V,B),V.return=P,V)}function W(P,V,B){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Ud(""+V,P.mode,B),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case D:return B=th(V.type,V.key,V.props,null,P.mode,B),Kl(B,V),B.return=P,B;case F:return V=kd(V,P.mode,B),V.return=P,V;case w:return V=ta(V),W(P,V,B)}if(Ft(V)||L(V))return V=Xs(V,P.mode,B,null),V.return=P,V;if(typeof V.then=="function")return W(P,lh(V),B);if(V.$$typeof===ie)return W(P,rh(P,V),B);uh(P,V)}return null}function H(P,V,B,Z){var Te=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Te!==null?null:S(P,V,""+B,Z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case D:return B.key===Te?x(P,V,B,Z):null;case F:return B.key===Te?q(P,V,B,Z):null;case w:return B=ta(B),H(P,V,B,Z)}if(Ft(B)||L(B))return Te!==null?null:X(P,V,B,Z,null);if(typeof B.then=="function")return H(P,V,lh(B),Z);if(B.$$typeof===ie)return H(P,V,rh(P,B),Z);uh(P,B)}return null}function Y(P,V,B,Z,Te){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return P=P.get(B)||null,S(V,P,""+Z,Te);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case D:return P=P.get(Z.key===null?B:Z.key)||null,x(V,P,Z,Te);case F:return P=P.get(Z.key===null?B:Z.key)||null,q(V,P,Z,Te);case w:return Z=ta(Z),Y(P,V,B,Z,Te)}if(Ft(Z)||L(Z))return P=P.get(B)||null,X(V,P,Z,Te,null);if(typeof Z.then=="function")return Y(P,V,B,lh(Z),Te);if(Z.$$typeof===ie)return Y(P,V,B,rh(V,Z),Te);uh(V,Z)}return null}function pe(P,V,B,Z){for(var Te=null,Fe=null,_e=V,Ve=V=0,Le=null;_e!==null&&Ve<B.length;Ve++){_e.index>Ve?(Le=_e,_e=null):Le=_e.sibling;var He=H(P,_e,B[Ve],Z);if(He===null){_e===null&&(_e=Le);break}n&&_e&&He.alternate===null&&r(P,_e),V=m(He,V,Ve),Fe===null?Te=He:Fe.sibling=He,Fe=He,_e=Le}if(Ve===B.length)return o(P,_e),ke&&sr(P,Ve),Te;if(_e===null){for(;Ve<B.length;Ve++)_e=W(P,B[Ve],Z),_e!==null&&(V=m(_e,V,Ve),Fe===null?Te=_e:Fe.sibling=_e,Fe=_e);return ke&&sr(P,Ve),Te}for(_e=u(_e);Ve<B.length;Ve++)Le=Y(_e,P,Ve,B[Ve],Z),Le!==null&&(n&&Le.alternate!==null&&_e.delete(Le.key===null?Ve:Le.key),V=m(Le,V,Ve),Fe===null?Te=Le:Fe.sibling=Le,Fe=Le);return n&&_e.forEach(function(os){return r(P,os)}),ke&&sr(P,Ve),Te}function Ae(P,V,B,Z){if(B==null)throw Error(i(151));for(var Te=null,Fe=null,_e=V,Ve=V=0,Le=null,He=B.next();_e!==null&&!He.done;Ve++,He=B.next()){_e.index>Ve?(Le=_e,_e=null):Le=_e.sibling;var os=H(P,_e,He.value,Z);if(os===null){_e===null&&(_e=Le);break}n&&_e&&os.alternate===null&&r(P,_e),V=m(os,V,Ve),Fe===null?Te=os:Fe.sibling=os,Fe=os,_e=Le}if(He.done)return o(P,_e),ke&&sr(P,Ve),Te;if(_e===null){for(;!He.done;Ve++,He=B.next())He=W(P,He.value,Z),He!==null&&(V=m(He,V,Ve),Fe===null?Te=He:Fe.sibling=He,Fe=He);return ke&&sr(P,Ve),Te}for(_e=u(_e);!He.done;Ve++,He=B.next())He=Y(_e,P,Ve,He.value,Z),He!==null&&(n&&He.alternate!==null&&_e.delete(He.key===null?Ve:He.key),V=m(He,V,Ve),Fe===null?Te=He:Fe.sibling=He,Fe=He);return n&&_e.forEach(function(aR){return r(P,aR)}),ke&&sr(P,Ve),Te}function st(P,V,B,Z){if(typeof B=="object"&&B!==null&&B.type===K&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case D:e:{for(var Te=B.key;V!==null;){if(V.key===Te){if(Te=B.type,Te===K){if(V.tag===7){o(P,V.sibling),Z=f(V,B.props.children),Z.return=P,P=Z;break e}}else if(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===w&&ta(Te)===V.type){o(P,V.sibling),Z=f(V,B.props),Kl(Z,B),Z.return=P,P=Z;break e}o(P,V);break}else r(P,V);V=V.sibling}B.type===K?(Z=Xs(B.props.children,P.mode,Z,B.key),Z.return=P,P=Z):(Z=th(B.type,B.key,B.props,null,P.mode,Z),Kl(Z,B),Z.return=P,P=Z)}return _(P);case F:e:{for(Te=B.key;V!==null;){if(V.key===Te)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){o(P,V.sibling),Z=f(V,B.children||[]),Z.return=P,P=Z;break e}else{o(P,V);break}else r(P,V);V=V.sibling}Z=kd(B,P.mode,Z),Z.return=P,P=Z}return _(P);case w:return B=ta(B),st(P,V,B,Z)}if(Ft(B))return pe(P,V,B,Z);if(L(B)){if(Te=L(B),typeof Te!="function")throw Error(i(150));return B=Te.call(B),Ae(P,V,B,Z)}if(typeof B.then=="function")return st(P,V,lh(B),Z);if(B.$$typeof===ie)return st(P,V,rh(P,B),Z);uh(P,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,V!==null&&V.tag===6?(o(P,V.sibling),Z=f(V,B),Z.return=P,P=Z):(o(P,V),Z=Ud(B,P.mode,Z),Z.return=P,P=Z),_(P)):o(P,V)}return function(P,V,B,Z){try{Gl=0;var Te=st(P,V,B,Z);return oo=null,Te}catch(_e){if(_e===ao||_e===ah)throw _e;var Fe=On(29,_e,null,P.mode);return Fe.lanes=Z,Fe.return=P,Fe}}}var ia=T_(!0),S_=T_(!1),Hr=!1;function Xd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Gr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Kr(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ke&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=eh(n),s_(n,null,o),r}return Wc(n,u,r,o),eh(n)}function Ql(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,El(n,o)}}function Zd(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var Wd=!1;function Yl(){if(Wd){var n=so;if(n!==null)throw n}}function $l(n,r,o,u){Wd=!1;var f=n.updateQueue;Hr=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var x=S,q=x.next;x.next=null,_===null?m=q:_.next=q,_=x;var X=n.alternate;X!==null&&(X=X.updateQueue,S=X.lastBaseUpdate,S!==_&&(S===null?X.firstBaseUpdate=q:S.next=q,X.lastBaseUpdate=x))}if(m!==null){var W=f.baseState;_=0,X=q=x=null,S=m;do{var H=S.lane&-536870913,Y=H!==S.lane;if(Y?(Pe&H)===H:(u&H)===H){H!==0&&H===ro&&(Wd=!0),X!==null&&(X=X.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var pe=n,Ae=S;H=r;var st=o;switch(Ae.tag){case 1:if(pe=Ae.payload,typeof pe=="function"){W=pe.call(st,W,H);break e}W=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ae.payload,H=typeof pe=="function"?pe.call(st,W,H):pe,H==null)break e;W=T({},W,H);break e;case 2:Hr=!0}}H=S.callback,H!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[H]:Y.push(H))}else Y={lane:H,tag:S.tag,payload:S.payload,callback:S.callback,next:null},X===null?(q=X=Y,x=W):X=X.next=Y,_|=H;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);X===null&&(x=W),f.baseState=x,f.firstBaseUpdate=q,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),Jr|=_,n.lanes=_,n.memoizedState=W}}function b_(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function A_(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)b_(o[n],r)}var lo=O(null),ch=O(0);function w_(n,r){n=gr,ce(ch,n),ce(lo,r),gr=n|r.baseLanes}function em(){ce(ch,gr),ce(lo,lo.current)}function tm(){gr=ch.current,ee(lo),ee(ch)}var Mn=O(null),ni=null;function Qr(n){var r=n.alternate;ce(Rt,Rt.current&1),ce(Mn,n),ni===null&&(r===null||lo.current!==null||r.memoizedState!==null)&&(ni=n)}function nm(n){ce(Rt,Rt.current),ce(Mn,n),ni===null&&(ni=n)}function R_(n){n.tag===22?(ce(Rt,Rt.current),ce(Mn,n),ni===null&&(ni=n)):Yr()}function Yr(){ce(Rt,Rt.current),ce(Mn,Mn.current)}function Pn(n){ee(Mn),ni===n&&(ni=null),ee(Rt)}var Rt=O(0);function hh(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||lp(o)||up(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var lr=0,xe=null,it=null,Lt=null,fh=!1,uo=!1,ra=!1,dh=0,Xl=0,co=null,XA=0;function vt(){throw Error(i(321))}function im(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Nn(n[o],r[o]))return!1;return!0}function rm(n,r,o,u,f,m){return lr=m,xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=n===null||n.memoizedState===null?uv:vm,ra=!1,m=o(u,f),ra=!1,uo&&(m=C_(r,o,u,f)),I_(n),m}function I_(n){J.H=Wl;var r=it!==null&&it.next!==null;if(lr=0,Lt=it=xe=null,fh=!1,Xl=0,co=null,r)throw Error(i(300));n===null||Ut||(n=n.dependencies,n!==null&&ih(n)&&(Ut=!0))}function C_(n,r,o,u){xe=n;var f=0;do{if(uo&&(co=null),Xl=0,uo=!1,25<=f)throw Error(i(301));if(f+=1,Lt=it=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}J.H=cv,m=r(o,u)}while(uo);return m}function JA(){var n=J.H,r=n.useState()[0];return r=typeof r.then=="function"?Jl(r):r,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(xe.flags|=1024),r}function sm(){var n=dh!==0;return dh=0,n}function am(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function om(n){if(fh){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}fh=!1}lr=0,Lt=it=xe=null,uo=!1,Xl=dh=0,co=null}function _n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?xe.memoizedState=Lt=n:Lt=Lt.next=n,Lt}function It(){if(it===null){var n=xe.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var r=Lt===null?xe.memoizedState:Lt.next;if(r!==null)Lt=r,it=n;else{if(n===null)throw xe.alternate===null?Error(i(467)):Error(i(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Lt===null?xe.memoizedState=Lt=n:Lt=Lt.next=n}return Lt}function mh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jl(n){var r=Xl;return Xl+=1,co===null&&(co=[]),n=__(co,n,r),r=xe,(Lt===null?r.memoizedState:Lt.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?uv:vm),n}function ph(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Jl(n);if(n.$$typeof===ie)return rn(n)}throw Error(i(438,String(n)))}function lm(n){var r=null,o=xe.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=xe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=mh(),xe.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=M;return r.index++,o}function ur(n,r){return typeof r=="function"?r(n):r}function gh(n){var r=It();return um(r,it,n)}function um(n,r,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}r.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var S=_=null,x=null,q=r,X=!1;do{var W=q.lane&-536870913;if(W!==q.lane?(Pe&W)===W:(lr&W)===W){var H=q.revertLane;if(H===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),W===ro&&(X=!0);else if((lr&H)===H){q=q.next,H===ro&&(X=!0);continue}else W={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},x===null?(S=x=W,_=m):x=x.next=W,xe.lanes|=H,Jr|=H;W=q.action,ra&&o(m,W),m=q.hasEagerState?q.eagerState:o(m,W)}else H={lane:W,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},x===null?(S=x=H,_=m):x=x.next=H,xe.lanes|=W,Jr|=W;q=q.next}while(q!==null&&q!==r);if(x===null?_=m:x.next=S,!Nn(m,n.memoizedState)&&(Ut=!0,X&&(o=so,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=x,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function cm(n){var r=It(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);Nn(m,r.memoizedState)||(Ut=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function x_(n,r,o){var u=xe,f=It(),m=ke;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var _=!Nn((it||f).memoizedState,o);if(_&&(f.memoizedState=o,Ut=!0),f=f.queue,dm(N_.bind(null,u,f,n),[n]),f.getSnapshot!==r||_||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,ho(9,{destroy:void 0},V_.bind(null,u,f,o,r),null),at===null)throw Error(i(349));m||(lr&127)!==0||D_(u,r,o)}return o}function D_(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=xe.updateQueue,r===null?(r=mh(),xe.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function V_(n,r,o,u){r.value=o,r.getSnapshot=u,O_(r)&&M_(n)}function N_(n,r,o){return o(function(){O_(r)&&M_(n)})}function O_(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Nn(n,o)}catch{return!0}}function M_(n){var r=$s(n,2);r!==null&&Rn(r,n,2)}function hm(n){var r=_n();if(typeof n=="function"){var o=n;if(n=o(),ra){Kn(!0);try{o()}finally{Kn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:n},r}function P_(n,r,o,u){return n.baseState=o,um(n,it,typeof u=="function"?u:ur)}function ZA(n,r,o,u,f){if(vh(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};J.T!==null?o(!0):m.isTransition=!1,u(m),o=r.pending,o===null?(m.next=r.pending=m,L_(r,m)):(m.next=o.next,r.pending=o.next=m)}}function L_(n,r){var o=r.action,u=r.payload,f=n.state;if(r.isTransition){var m=J.T,_={};J.T=_;try{var S=o(f,u),x=J.S;x!==null&&x(_,S),U_(n,r,S)}catch(q){fm(n,r,q)}finally{m!==null&&_.types!==null&&(m.types=_.types),J.T=m}}else try{m=o(f,u),U_(n,r,m)}catch(q){fm(n,r,q)}}function U_(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){k_(n,r,u)},function(u){return fm(n,r,u)}):k_(n,r,o)}function k_(n,r,o){r.status="fulfilled",r.value=o,z_(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,L_(n,o)))}function fm(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,z_(r),r=r.next;while(r!==u)}n.action=null}function z_(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function B_(n,r){return r}function q_(n,r){if(ke){var o=at.formState;if(o!==null){e:{var u=xe;if(ke){if(ut){t:{for(var f=ut,m=ti;f.nodeType!==8;){if(!m){f=null;break t}if(f=ii(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ut=ii(f.nextSibling),u=f.data==="F!";break e}}jr(u)}u=!1}u&&(r=o[0])}}return o=_n(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:B_,lastRenderedState:r},o.queue=u,o=av.bind(null,xe,u),u.dispatch=o,u=hm(!1),m=_m.bind(null,xe,!1,u.queue),u=_n(),f={state:r,dispatch:null,action:n,pending:null},u.queue=f,o=ZA.bind(null,xe,f,m,o),f.dispatch=o,u.memoizedState=n,[r,o,!1]}function j_(n){var r=It();return F_(r,it,n)}function F_(n,r,o){if(r=um(n,r,B_)[0],n=gh(ur)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Jl(r)}catch(_){throw _===ao?ah:_}else u=r;r=It();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(xe.flags|=2048,ho(9,{destroy:void 0},WA.bind(null,f,o),null)),[u,m,n]}function WA(n,r){n.action=r}function H_(n){var r=It(),o=it;if(o!==null)return F_(r,o,n);It(),r=r.memoizedState,o=It();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function ho(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=xe.updateQueue,r===null&&(r=mh(),xe.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function G_(){return It().memoizedState}function yh(n,r,o,u){var f=_n();xe.flags|=n,f.memoizedState=ho(1|r,{destroy:void 0},o,u===void 0?null:u)}function _h(n,r,o,u){var f=It();u=u===void 0?null:u;var m=f.memoizedState.inst;it!==null&&u!==null&&im(u,it.memoizedState.deps)?f.memoizedState=ho(r,m,o,u):(xe.flags|=n,f.memoizedState=ho(1|r,m,o,u))}function K_(n,r){yh(8390656,8,n,r)}function dm(n,r){_h(2048,8,n,r)}function ew(n){xe.flags|=4;var r=xe.updateQueue;if(r===null)r=mh(),xe.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function Q_(n){var r=It().memoizedState;return ew({ref:r,nextImpl:n}),function(){if((Ke&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Y_(n,r){return _h(4,2,n,r)}function $_(n,r){return _h(4,4,n,r)}function X_(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function J_(n,r,o){o=o!=null?o.concat([n]):null,_h(4,4,X_.bind(null,r,n),o)}function mm(){}function Z_(n,r){var o=It();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&im(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function W_(n,r){var o=It();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&im(r,u[1]))return u[0];if(u=n(),ra){Kn(!0);try{n()}finally{Kn(!1)}}return o.memoizedState=[u,r],u}function pm(n,r,o){return o===void 0||(lr&1073741824)!==0&&(Pe&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=eE(),xe.lanes|=n,Jr|=n,o)}function ev(n,r,o,u){return Nn(o,r)?o:lo.current!==null?(n=pm(n,o,u),Nn(n,r)||(Ut=!0),n):(lr&42)===0||(lr&1073741824)!==0&&(Pe&261930)===0?(Ut=!0,n.memoizedState=o):(n=eE(),xe.lanes|=n,Jr|=n,r)}function tv(n,r,o,u,f){var m=ue.p;ue.p=m!==0&&8>m?m:8;var _=J.T,S={};J.T=S,_m(n,!1,r,o);try{var x=f(),q=J.S;if(q!==null&&q(S,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var X=$A(x,u);Zl(n,r,X,kn(n))}else Zl(n,r,u,kn(n))}catch(W){Zl(n,r,{then:function(){},status:"rejected",reason:W},kn())}finally{ue.p=m,_!==null&&S.types!==null&&(_.types=S.types),J.T=_}}function tw(){}function gm(n,r,o,u){if(n.tag!==5)throw Error(i(476));var f=nv(n).queue;tv(n,f,r,be,o===null?tw:function(){return iv(n),o(u)})}function nv(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:be},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function iv(n){var r=nv(n);r.next===null&&(r=n.alternate.memoizedState),Zl(n,r.next.queue,{},kn())}function ym(){return rn(pu)}function rv(){return It().memoizedState}function sv(){return It().memoizedState}function nw(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=kn();n=Gr(o);var u=Kr(r,n,o);u!==null&&(Rn(u,r,o),Ql(u,r,o)),r={cache:Kd()},n.payload=r;return}r=r.return}}function iw(n,r,o){var u=kn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},vh(n)?ov(r,o):(o=Pd(n,r,o,u),o!==null&&(Rn(o,n,u),lv(o,r,u)))}function av(n,r,o){var u=kn();Zl(n,r,o,u)}function Zl(n,r,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(vh(n))ov(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,S=m(_,o);if(f.hasEagerState=!0,f.eagerState=S,Nn(S,_))return Wc(n,r,f,0),at===null&&Zc(),!1}catch{}if(o=Pd(n,r,f,u),o!==null)return Rn(o,n,u),lv(o,r,u),!0}return!1}function _m(n,r,o,u){if(u={lane:2,revertLane:Xm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},vh(n)){if(r)throw Error(i(479))}else r=Pd(n,o,u,2),r!==null&&Rn(r,n,2)}function vh(n){var r=n.alternate;return n===xe||r!==null&&r===xe}function ov(n,r){uo=fh=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function lv(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,El(n,o)}}var Wl={readContext:rn,use:ph,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};Wl.useEffectEvent=vt;var uv={readContext:rn,use:ph,useCallback:function(n,r){return _n().memoizedState=[n,r===void 0?null:r],n},useContext:rn,useEffect:K_,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,yh(4194308,4,X_.bind(null,r,n),o)},useLayoutEffect:function(n,r){return yh(4194308,4,n,r)},useInsertionEffect:function(n,r){yh(4,2,n,r)},useMemo:function(n,r){var o=_n();r=r===void 0?null:r;var u=n();if(ra){Kn(!0);try{n()}finally{Kn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=_n();if(o!==void 0){var f=o(r);if(ra){Kn(!0);try{o(r)}finally{Kn(!1)}}}else f=r;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=iw.bind(null,xe,n),[u.memoizedState,n]},useRef:function(n){var r=_n();return n={current:n},r.memoizedState=n},useState:function(n){n=hm(n);var r=n.queue,o=av.bind(null,xe,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:mm,useDeferredValue:function(n,r){var o=_n();return pm(o,n,r)},useTransition:function(){var n=hm(!1);return n=tv.bind(null,xe,n.queue,!0,!1),_n().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=xe,f=_n();if(ke){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),at===null)throw Error(i(349));(Pe&127)!==0||D_(u,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,K_(N_.bind(null,u,m,n),[n]),u.flags|=2048,ho(9,{destroy:void 0},V_.bind(null,u,m,o,r),null),o},useId:function(){var n=_n(),r=at.identifierPrefix;if(ke){var o=Fi,u=ji;o=(u&~(1<<32-At(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=dh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=XA++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:ym,useFormState:q_,useActionState:q_,useOptimistic:function(n){var r=_n();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=_m.bind(null,xe,!0,o),o.dispatch=r,[n,r]},useMemoCache:lm,useCacheRefresh:function(){return _n().memoizedState=nw.bind(null,xe)},useEffectEvent:function(n){var r=_n(),o={impl:n};return r.memoizedState=o,function(){if((Ke&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},vm={readContext:rn,use:ph,useCallback:Z_,useContext:rn,useEffect:dm,useImperativeHandle:J_,useInsertionEffect:Y_,useLayoutEffect:$_,useMemo:W_,useReducer:gh,useRef:G_,useState:function(){return gh(ur)},useDebugValue:mm,useDeferredValue:function(n,r){var o=It();return ev(o,it.memoizedState,n,r)},useTransition:function(){var n=gh(ur)[0],r=It().memoizedState;return[typeof n=="boolean"?n:Jl(n),r]},useSyncExternalStore:x_,useId:rv,useHostTransitionStatus:ym,useFormState:j_,useActionState:j_,useOptimistic:function(n,r){var o=It();return P_(o,it,n,r)},useMemoCache:lm,useCacheRefresh:sv};vm.useEffectEvent=Q_;var cv={readContext:rn,use:ph,useCallback:Z_,useContext:rn,useEffect:dm,useImperativeHandle:J_,useInsertionEffect:Y_,useLayoutEffect:$_,useMemo:W_,useReducer:cm,useRef:G_,useState:function(){return cm(ur)},useDebugValue:mm,useDeferredValue:function(n,r){var o=It();return it===null?pm(o,n,r):ev(o,it.memoizedState,n,r)},useTransition:function(){var n=cm(ur)[0],r=It().memoizedState;return[typeof n=="boolean"?n:Jl(n),r]},useSyncExternalStore:x_,useId:rv,useHostTransitionStatus:ym,useFormState:H_,useActionState:H_,useOptimistic:function(n,r){var o=It();return it!==null?P_(o,it,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:lm,useCacheRefresh:sv};cv.useEffectEvent=Q_;function Em(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:T({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Tm={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=kn(),f=Gr(u);f.payload=r,o!=null&&(f.callback=o),r=Kr(n,f,u),r!==null&&(Rn(r,n,u),Ql(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=kn(),f=Gr(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Kr(n,f,u),r!==null&&(Rn(r,n,u),Ql(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=kn(),u=Gr(o);u.tag=2,r!=null&&(u.callback=r),r=Kr(n,u,o),r!==null&&(Rn(r,n,o),Ql(r,n,o))}};function hv(n,r,o,u,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,_):r.prototype&&r.prototype.isPureReactComponent?!zl(o,u)||!zl(f,m):!0}function fv(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&Tm.enqueueReplaceState(r,r.state,null)}function sa(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=T({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function dv(n){Jc(n)}function mv(n){console.error(n)}function pv(n){Jc(n)}function Eh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function gv(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Sm(n,r,o){return o=Gr(o),o.tag=3,o.payload={element:null},o.callback=function(){Eh(n,r)},o}function yv(n){return n=Gr(n),n.tag=3,n}function _v(n,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){gv(r,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){gv(r,o,u),typeof f!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function rw(n,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&io(r,o,f,!0),o=Mn.current,o!==null){switch(o.tag){case 31:case 13:return ni===null?Nh():o.alternate===null&&Et===0&&(Et=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===oh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Qm(n,u,f)),!1;case 22:return o.flags|=65536,u===oh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Qm(n,u,f)),!1}throw Error(i(435,o.tag))}return Qm(n,u,f),Nh(),!1}if(ke)return r=Mn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==qd&&(n=Error(i(422),{cause:u}),jl(Zn(n,o)))):(u!==qd&&(r=Error(i(423),{cause:u}),jl(Zn(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Zn(u,o),f=Sm(n.stateNode,u,f),Zd(n,f),Et!==4&&(Et=2)),!1;var m=Error(i(520),{cause:u});if(m=Zn(m,o),ou===null?ou=[m]:ou.push(m),Et!==4&&(Et=2),r===null)return!0;u=Zn(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Sm(o.stateNode,u,n),Zd(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Zr===null||!Zr.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=yv(f),_v(f,n,o,u),Zd(o,f),!1}o=o.return}while(o!==null);return!1}var bm=Error(i(461)),Ut=!1;function sn(n,r,o,u){r.child=n===null?S_(r,null,o,u):ia(r,n.child,o,u)}function vv(n,r,o,u,f){o=o.render;var m=r.ref;if("ref"in u){var _={};for(var S in u)S!=="ref"&&(_[S]=u[S])}else _=u;return Ws(r),u=rm(n,r,o,_,m,f),S=sm(),n!==null&&!Ut?(am(n,r,f),cr(n,r,f)):(ke&&S&&zd(r),r.flags|=1,sn(n,r,u,f),r.child)}function Ev(n,r,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!Ld(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,Tv(n,r,m,u,f)):(n=th(o.type,null,u,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Vm(n,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:zl,o(_,u)&&n.ref===r.ref)return cr(n,r,f)}return r.flags|=1,n=rr(m,u),n.ref=r.ref,n.return=r,r.child=n}function Tv(n,r,o,u,f){if(n!==null){var m=n.memoizedProps;if(zl(m,u)&&n.ref===r.ref)if(Ut=!1,r.pendingProps=u=m,Vm(n,f))(n.flags&131072)!==0&&(Ut=!0);else return r.lanes=n.lanes,cr(n,r,f)}return Am(n,r,o,u,f)}function Sv(n,r,o,u){var f=u.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=r.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,r.child=null;return bv(n,r,m,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&sh(r,m!==null?m.cachePool:null),m!==null?w_(r,m):em(),R_(r);else return u=r.lanes=536870912,bv(n,r,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(sh(r,m.cachePool),w_(r,m),Yr(),r.memoizedState=null):(n!==null&&sh(r,null),em(),Yr());return sn(n,r,f,o),r.child}function eu(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function bv(n,r,o,u,f){var m=Yd();return m=m===null?null:{parent:Pt._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},n!==null&&sh(r,null),em(),R_(r),n!==null&&io(n,r,u,!0),r.childLanes=f,null}function Th(n,r){return r=bh({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Av(n,r,o){return ia(r,n.child,null,o),n=Th(r,r.pendingProps),n.flags|=2,Pn(r),r.memoizedState=null,n}function sw(n,r,o){var u=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(ke){if(u.mode==="hidden")return n=Th(r,u),r.lanes=536870912,eu(null,n);if(nm(r),(n=ut)?(n=LE(n,ti),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Br!==null?{id:ji,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},o=o_(n),o.return=r,r.child=o,nn=r,ut=null)):n=null,n===null)throw jr(r);return r.lanes=536870912,null}return Th(r,u)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(nm(r),f)if(r.flags&256)r.flags&=-257,r=Av(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(Ut||io(n,r,o,!1),f=(o&n.childLanes)!==0,Ut||f){if(u=at,u!==null&&(_=Tl(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,$s(n,_),Rn(u,n,_),bm;Nh(),r=Av(n,r,o)}else n=m.treeContext,ut=ii(_.nextSibling),nn=r,ke=!0,qr=null,ti=!1,n!==null&&c_(r,n),r=Th(r,u),r.flags|=4096;return r}return n=rr(n.child,{mode:u.mode,children:u.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Sh(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Am(n,r,o,u,f){return Ws(r),o=rm(n,r,o,u,void 0,f),u=sm(),n!==null&&!Ut?(am(n,r,f),cr(n,r,f)):(ke&&u&&zd(r),r.flags|=1,sn(n,r,o,f),r.child)}function wv(n,r,o,u,f,m){return Ws(r),r.updateQueue=null,o=C_(r,u,o,f),I_(n),u=sm(),n!==null&&!Ut?(am(n,r,m),cr(n,r,m)):(ke&&u&&zd(r),r.flags|=1,sn(n,r,o,m),r.child)}function Rv(n,r,o,u,f){if(Ws(r),r.stateNode===null){var m=Wa,_=o.contextType;typeof _=="object"&&_!==null&&(m=rn(_)),m=new o(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Tm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},Xd(r),_=o.contextType,m.context=typeof _=="object"&&_!==null?rn(_):Wa,m.state=r.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Em(r,o,_,u),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Tm.enqueueReplaceState(m,m.state,null),$l(r,u,m,f),Yl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){m=r.stateNode;var S=r.memoizedProps,x=sa(o,S);m.props=x;var q=m.context,X=o.contextType;_=Wa,typeof X=="object"&&X!==null&&(_=rn(X));var W=o.getDerivedStateFromProps;X=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||q!==_)&&fv(r,m,u,_),Hr=!1;var H=r.memoizedState;m.state=H,$l(r,u,m,f),Yl(),q=r.memoizedState,S||H!==q||Hr?(typeof W=="function"&&(Em(r,o,W,u),q=r.memoizedState),(x=Hr||hv(r,o,x,u,H,q,_))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=q),m.props=u,m.state=q,m.context=_,u=x):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,Jd(n,r),_=r.memoizedProps,X=sa(o,_),m.props=X,W=r.pendingProps,H=m.context,q=o.contextType,x=Wa,typeof q=="object"&&q!==null&&(x=rn(q)),S=o.getDerivedStateFromProps,(q=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==W||H!==x)&&fv(r,m,u,x),Hr=!1,H=r.memoizedState,m.state=H,$l(r,u,m,f),Yl();var Y=r.memoizedState;_!==W||H!==Y||Hr||n!==null&&n.dependencies!==null&&ih(n.dependencies)?(typeof S=="function"&&(Em(r,o,S,u),Y=r.memoizedState),(X=Hr||hv(r,o,X,u,H,Y,x)||n!==null&&n.dependencies!==null&&ih(n.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Y,x),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Y,x)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Y),m.props=u,m.state=Y,m.context=x,u=X):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),u=!1)}return m=u,Sh(n,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&u?(r.child=ia(r,n.child,null,f),r.child=ia(r,null,o,f)):sn(n,r,o,f),r.memoizedState=m.state,n=r.child):n=cr(n,r,f),n}function Iv(n,r,o,u){return Js(),r.flags|=256,sn(n,r,o,u),r.child}var wm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rm(n){return{baseLanes:n,cachePool:g_()}}function Im(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Un),n}function Cv(n,r,o){var u=r.pendingProps,f=!1,m=(r.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Rt.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,n===null){if(ke){if(f?Qr(r):Yr(),(n=ut)?(n=LE(n,ti),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Br!==null?{id:ji,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},o=o_(n),o.return=r,r.child=o,nn=r,ut=null)):n=null,n===null)throw jr(r);return up(n)?r.lanes=32:r.lanes=536870912,null}var S=u.children;return u=u.fallback,f?(Yr(),f=r.mode,S=bh({mode:"hidden",children:S},f),u=Xs(u,f,o,null),S.return=r,u.return=r,S.sibling=u,r.child=S,u=r.child,u.memoizedState=Rm(o),u.childLanes=Im(n,_,o),r.memoizedState=wm,eu(null,u)):(Qr(r),Cm(r,S))}var x=n.memoizedState;if(x!==null&&(S=x.dehydrated,S!==null)){if(m)r.flags&256?(Qr(r),r.flags&=-257,r=xm(n,r,o)):r.memoizedState!==null?(Yr(),r.child=n.child,r.flags|=128,r=null):(Yr(),S=u.fallback,f=r.mode,u=bh({mode:"visible",children:u.children},f),S=Xs(S,f,o,null),S.flags|=2,u.return=r,S.return=r,u.sibling=S,r.child=u,ia(r,n.child,null,o),u=r.child,u.memoizedState=Rm(o),u.childLanes=Im(n,_,o),r.memoizedState=wm,r=eu(null,u));else if(Qr(r),up(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var q=_.dgst;_=q,u=Error(i(419)),u.stack="",u.digest=_,jl({value:u,source:null,stack:null}),r=xm(n,r,o)}else if(Ut||io(n,r,o,!1),_=(o&n.childLanes)!==0,Ut||_){if(_=at,_!==null&&(u=Tl(_,o),u!==0&&u!==x.retryLane))throw x.retryLane=u,$s(n,u),Rn(_,n,u),bm;lp(S)||Nh(),r=xm(n,r,o)}else lp(S)?(r.flags|=192,r.child=n.child,r=null):(n=x.treeContext,ut=ii(S.nextSibling),nn=r,ke=!0,qr=null,ti=!1,n!==null&&c_(r,n),r=Cm(r,u.children),r.flags|=4096);return r}return f?(Yr(),S=u.fallback,f=r.mode,x=n.child,q=x.sibling,u=rr(x,{mode:"hidden",children:u.children}),u.subtreeFlags=x.subtreeFlags&65011712,q!==null?S=rr(q,S):(S=Xs(S,f,o,null),S.flags|=2),S.return=r,u.return=r,u.sibling=S,r.child=u,eu(null,u),u=r.child,S=n.child.memoizedState,S===null?S=Rm(o):(f=S.cachePool,f!==null?(x=Pt._currentValue,f=f.parent!==x?{parent:x,pool:x}:f):f=g_(),S={baseLanes:S.baseLanes|o,cachePool:f}),u.memoizedState=S,u.childLanes=Im(n,_,o),r.memoizedState=wm,eu(n.child,u)):(Qr(r),o=n.child,n=o.sibling,o=rr(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(_=r.deletions,_===null?(r.deletions=[n],r.flags|=16):_.push(n)),r.child=o,r.memoizedState=null,o)}function Cm(n,r){return r=bh({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function bh(n,r){return n=On(22,n,null,r),n.lanes=0,n}function xm(n,r,o){return ia(r,n.child,null,o),n=Cm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function xv(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Hd(n.return,r,o)}function Dm(n,r,o,u,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function Dv(n,r,o){var u=r.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=Rt.current,S=(_&2)!==0;if(S?(_=_&1|2,r.flags|=128):_&=1,ce(Rt,_),sn(n,r,u,o),u=ke?ql:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&xv(n,o,r);else if(n.tag===19)xv(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&hh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Dm(r,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&hh(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Dm(r,!0,o,null,m,u);break;case"together":Dm(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function cr(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Jr|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(io(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=rr(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=rr(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Vm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&ih(n)))}function aw(n,r,o){switch(r.tag){case 3:Ht(r,r.stateNode.containerInfo),Fr(r,Pt,n.memoizedState.cache),Js();break;case 27:case 5:Vs(r);break;case 4:Ht(r,r.stateNode.containerInfo);break;case 10:Fr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,nm(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Qr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Cv(n,r,o):(Qr(r),n=cr(n,r,o),n!==null?n.sibling:null);Qr(r);break;case 19:var f=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(io(n,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return Dv(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Rt,Rt.current),u)break;return null;case 22:return r.lanes=0,Sv(n,r,o,r.pendingProps);case 24:Fr(r,Pt,n.memoizedState.cache)}return cr(n,r,o)}function Vv(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)Ut=!0;else{if(!Vm(n,o)&&(r.flags&128)===0)return Ut=!1,aw(n,r,o);Ut=(n.flags&131072)!==0}else Ut=!1,ke&&(r.flags&1048576)!==0&&u_(r,ql,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(n=ta(r.elementType),r.type=n,typeof n=="function")Ld(n)?(u=sa(n,u),r.tag=1,r=Rv(null,r,n,u,o)):(r.tag=0,r=Am(null,r,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===ye){r.tag=11,r=vv(null,r,n,u,o);break e}else if(f===R){r.tag=14,r=Ev(null,r,n,u,o);break e}}throw r=ht(n)||n,Error(i(306,r,""))}}return r;case 0:return Am(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=sa(u,r.pendingProps),Rv(n,r,u,f,o);case 3:e:{if(Ht(r,r.stateNode.containerInfo),n===null)throw Error(i(387));u=r.pendingProps;var m=r.memoizedState;f=m.element,Jd(n,r),$l(r,u,null,o);var _=r.memoizedState;if(u=_.cache,Fr(r,Pt,u),u!==m.cache&&Gd(r,[Pt],o,!0),Yl(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Iv(n,r,u,o);break e}else if(u!==f){f=Zn(Error(i(424)),r),jl(f),r=Iv(n,r,u,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ut=ii(n.firstChild),nn=r,ke=!0,qr=null,ti=!0,o=S_(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Js(),u===f){r=cr(n,r,o);break e}sn(n,r,u,o)}r=r.child}return r;case 26:return Sh(n,r),n===null?(o=jE(r.type,null,r.pendingProps,null))?r.memoizedState=o:ke||(o=r.type,n=r.pendingProps,u=zh(De.current).createElement(o),u[Nt]=r,u[$t]=n,an(u,o,n),Ot(u),r.stateNode=u):r.memoizedState=jE(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Vs(r),n===null&&ke&&(u=r.stateNode=zE(r.type,r.pendingProps,De.current),nn=r,ti=!0,f=ut,ns(r.type)?(cp=f,ut=ii(u.firstChild)):ut=f),sn(n,r,r.pendingProps.children,o),Sh(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&ke&&((f=u=ut)&&(u=Lw(u,r.type,r.pendingProps,ti),u!==null?(r.stateNode=u,nn=r,ut=ii(u.firstChild),ti=!1,f=!0):f=!1),f||jr(r)),Vs(r),f=r.type,m=r.pendingProps,_=n!==null?n.memoizedProps:null,u=m.children,sp(f,m)?u=null:_!==null&&sp(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=rm(n,r,JA,null,null,o),pu._currentValue=f),Sh(n,r),sn(n,r,u,o),r.child;case 6:return n===null&&ke&&((n=o=ut)&&(o=Uw(o,r.pendingProps,ti),o!==null?(r.stateNode=o,nn=r,ut=null,n=!0):n=!1),n||jr(r)),null;case 13:return Cv(n,r,o);case 4:return Ht(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=ia(r,null,u,o):sn(n,r,u,o),r.child;case 11:return vv(n,r,r.type,r.pendingProps,o);case 7:return sn(n,r,r.pendingProps,o),r.child;case 8:return sn(n,r,r.pendingProps.children,o),r.child;case 12:return sn(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Fr(r,r.type,u.value),sn(n,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Ws(r),f=rn(f),u=u(f),r.flags|=1,sn(n,r,u,o),r.child;case 14:return Ev(n,r,r.type,r.pendingProps,o);case 15:return Tv(n,r,r.type,r.pendingProps,o);case 19:return Dv(n,r,o);case 31:return sw(n,r,o);case 22:return Sv(n,r,o,r.pendingProps);case 24:return Ws(r),u=rn(Pt),n===null?(f=Yd(),f===null&&(f=at,m=Kd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:u,cache:f},Xd(r),Fr(r,Pt,f)):((n.lanes&o)!==0&&(Jd(n,r),$l(r,null,null,o),Yl()),f=n.memoizedState,m=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Fr(r,Pt,u)):(u=m.cache,Fr(r,Pt,u),u!==f.cache&&Gd(r,[Pt],o,!0))),sn(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function hr(n){n.flags|=4}function Nm(n,r,o,u,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(rE())n.flags|=8192;else throw na=oh,$d}else n.flags&=-16777217}function Nv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!QE(r))if(rE())n.flags|=8192;else throw na=oh,$d}function Ah(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Dc():536870912,n.lanes|=r,go|=r)}function tu(n,r){if(!ke)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ct(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function ow(n,r,o){var u=r.pendingProps;switch(Bd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),or(Pt),ft(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(no(r)?hr(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,jd())),ct(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?(hr(r),m!==null?(ct(r),Nv(r,m)):(ct(r),Nm(r,f,null,u,o))):m?m!==n.memoizedState?(hr(r),ct(r),Nv(r,m)):(ct(r),r.flags&=-16777217):(n=n.memoizedProps,n!==u&&hr(r),ct(r),Nm(r,f,n,u,o)),null;case 27:if(Ma(r),o=De.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&hr(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return ct(r),null}n=fe.current,no(r)?h_(r):(n=zE(f,u,o),r.stateNode=n,hr(r))}return ct(r),null;case 5:if(Ma(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&hr(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return ct(r),null}if(m=fe.current,no(r))h_(r);else{var _=zh(De.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[Nt]=r,m[$t]=u;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=m;e:switch(an(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&hr(r)}}return ct(r),Nm(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&hr(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(n=De.current,no(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,f=nn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Nt]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||CE(n.nodeValue,o)),n||jr(r,!0)}else n=zh(n).createTextNode(u),n[Nt]=r,r.stateNode=n}return ct(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(u=no(r),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Nt]=r}else Js(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),n=!1}else o=jd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(Pn(r),r):(Pn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ct(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=no(r),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Nt]=r}else Js(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),f=!1}else f=jd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Pn(r),r):(Pn(r),null)}return Pn(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),Ah(r,r.updateQueue),ct(r),null);case 4:return ft(),n===null&&ep(r.stateNode.containerInfo),ct(r),null;case 10:return or(r.type),ct(r),null;case 19:if(ee(Rt),u=r.memoizedState,u===null)return ct(r),null;if(f=(r.flags&128)!==0,m=u.rendering,m===null)if(f)tu(u,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=hh(n),m!==null){for(r.flags|=128,tu(u,!1),n=m.updateQueue,r.updateQueue=n,Ah(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)a_(o,n),o=o.sibling;return ce(Rt,Rt.current&1|2),ke&&sr(r,u.treeForkCount),r.child}n=n.sibling}u.tail!==null&&gn()>xh&&(r.flags|=128,f=!0,tu(u,!1),r.lanes=4194304)}else{if(!f)if(n=hh(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Ah(r,n),tu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!ke)return ct(r),null}else 2*gn()-u.renderingStartTime>xh&&o!==536870912&&(r.flags|=128,f=!0,tu(u,!1),r.lanes=4194304);u.isBackwards?(m.sibling=r.child,r.child=m):(n=u.last,n!==null?n.sibling=m:r.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=gn(),n.sibling=null,o=Rt.current,ce(Rt,f?o&1|2:o&1),ke&&sr(r,u.treeForkCount),n):(ct(r),null);case 22:case 23:return Pn(r),tm(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),o=r.updateQueue,o!==null&&Ah(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&ee(ea),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),or(Pt),ct(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function lw(n,r){switch(Bd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return or(Pt),ft(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Ma(r),null;case 31:if(r.memoizedState!==null){if(Pn(r),r.alternate===null)throw Error(i(340));Js()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Pn(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Js()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ee(Rt),null;case 4:return ft(),null;case 10:return or(r.type),null;case 22:case 23:return Pn(r),tm(),n!==null&&ee(ea),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return or(Pt),null;case 25:return null;default:return null}}function Ov(n,r){switch(Bd(r),r.tag){case 3:or(Pt),ft();break;case 26:case 27:case 5:Ma(r);break;case 4:ft();break;case 31:r.memoizedState!==null&&Pn(r);break;case 13:Pn(r);break;case 19:ee(Rt);break;case 10:or(r.type);break;case 22:case 23:Pn(r),tm(),n!==null&&ee(ea);break;case 24:or(Pt)}}function nu(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(S){Ze(r,r.return,S)}}function $r(n,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var _=u.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,f=r;var x=o,q=S;try{q()}catch(X){Ze(f,x,X)}}}u=u.next}while(u!==m)}}catch(X){Ze(r,r.return,X)}}function Mv(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{A_(r,o)}catch(u){Ze(n,n.return,u)}}}function Pv(n,r,o){o.props=sa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Ze(n,r,u)}}function iu(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){Ze(n,r,f)}}function Hi(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Ze(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Ze(n,r,f)}else o.current=null}function Lv(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Ze(n,n.return,f)}}function Om(n,r,o){try{var u=n.stateNode;Dw(u,n.type,o,r),u[$t]=r}catch(f){Ze(n,n.return,f)}}function Uv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ns(n.type)||n.tag===4}function Mm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Uv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ns(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Pm(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=fi));else if(u!==4&&(u===27&&ns(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Pm(n,r,o),n=n.sibling;n!==null;)Pm(n,r,o),n=n.sibling}function wh(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&ns(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(wh(n,r,o),n=n.sibling;n!==null;)wh(n,r,o),n=n.sibling}function kv(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);an(r,u,o),r[Nt]=n,r[$t]=o}catch(m){Ze(n,n.return,m)}}var fr=!1,kt=!1,Lm=!1,zv=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function uw(n,r){if(n=n.containerInfo,ip=Kh,n=Jy(n),xd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,S=-1,x=-1,q=0,X=0,W=n,H=null;t:for(;;){for(var Y;W!==o||f!==0&&W.nodeType!==3||(S=_+f),W!==m||u!==0&&W.nodeType!==3||(x=_+u),W.nodeType===3&&(_+=W.nodeValue.length),(Y=W.firstChild)!==null;)H=W,W=Y;for(;;){if(W===n)break t;if(H===o&&++q===f&&(S=_),H===m&&++X===u&&(x=_),(Y=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=Y}o=S===-1||x===-1?null:{start:S,end:x}}else o=null}o=o||{start:0,end:0}}else o=null;for(rp={focusedElem:n,selectionRange:o},Kh=!1,Jt=r;Jt!==null;)if(r=Jt,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Jt=n;else for(;Jt!==null;){switch(r=Jt,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var pe=sa(o.type,f);n=u.getSnapshotBeforeUpdate(pe,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){Ze(o,o.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)op(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":op(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Jt=n;break}Jt=r.return}}function Bv(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:mr(n,o),u&4&&nu(5,o);break;case 1:if(mr(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(_){Ze(o,o.return,_)}else{var f=sa(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Ze(o,o.return,_)}}u&64&&Mv(o),u&512&&iu(o,o.return);break;case 3:if(mr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{A_(n,r)}catch(_){Ze(o,o.return,_)}}break;case 27:r===null&&u&4&&kv(o);case 26:case 5:mr(n,o),r===null&&u&4&&Lv(o),u&512&&iu(o,o.return);break;case 12:mr(n,o);break;case 31:mr(n,o),u&4&&Fv(n,o);break;case 13:mr(n,o),u&4&&Hv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=_w.bind(null,o),kw(n,o))));break;case 22:if(u=o.memoizedState!==null||fr,!u){r=r!==null&&r.memoizedState!==null||kt,f=fr;var m=kt;fr=u,(kt=r)&&!m?pr(n,o,(o.subtreeFlags&8772)!==0):mr(n,o),fr=f,kt=m}break;case 30:break;default:mr(n,o)}}function qv(n){var r=n.alternate;r!==null&&(n.alternate=null,qv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&za(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var mt=null,Sn=!1;function dr(n,r,o){for(o=o.child;o!==null;)jv(n,r,o),o=o.sibling}function jv(n,r,o){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(li,o)}catch{}switch(o.tag){case 26:kt||Hi(o,r),dr(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:kt||Hi(o,r);var u=mt,f=Sn;ns(o.type)&&(mt=o.stateNode,Sn=!1),dr(n,r,o),fu(o.stateNode),mt=u,Sn=f;break;case 5:kt||Hi(o,r);case 6:if(u=mt,f=Sn,mt=null,dr(n,r,o),mt=u,Sn=f,mt!==null)if(Sn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(o.stateNode)}catch(m){Ze(o,r,m)}else try{mt.removeChild(o.stateNode)}catch(m){Ze(o,r,m)}break;case 18:mt!==null&&(Sn?(n=mt,ME(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Ao(n)):ME(mt,o.stateNode));break;case 4:u=mt,f=Sn,mt=o.stateNode.containerInfo,Sn=!0,dr(n,r,o),mt=u,Sn=f;break;case 0:case 11:case 14:case 15:$r(2,o,r),kt||$r(4,o,r),dr(n,r,o);break;case 1:kt||(Hi(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Pv(o,r,u)),dr(n,r,o);break;case 21:dr(n,r,o);break;case 22:kt=(u=kt)||o.memoizedState!==null,dr(n,r,o),kt=u;break;default:dr(n,r,o)}}function Fv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ao(n)}catch(o){Ze(r,r.return,o)}}}function Hv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ao(n)}catch(o){Ze(r,r.return,o)}}function cw(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new zv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new zv),r;default:throw Error(i(435,n.tag))}}function Rh(n,r){var o=cw(n);r.forEach(function(u){if(!o.has(u)){o.add(u);var f=vw.bind(null,n,u);u.then(f,f)}})}function bn(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,_=r,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(ns(S.type)){mt=S.stateNode,Sn=!1;break e}break;case 5:mt=S.stateNode,Sn=!1;break e;case 3:case 4:mt=S.stateNode.containerInfo,Sn=!0;break e}S=S.return}if(mt===null)throw Error(i(160));jv(m,_,f),mt=null,Sn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Gv(r,n),r=r.sibling}var _i=null;function Gv(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:bn(r,n),An(n),u&4&&($r(3,n,n.return),nu(3,n),$r(5,n,n.return));break;case 1:bn(r,n),An(n),u&512&&(kt||o===null||Hi(o,o.return)),u&64&&fr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=_i;if(bn(r,n),An(n),u&512&&(kt||o===null||Hi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Di]||m[Nt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),an(m,u,o),m[Nt]=n,Ot(m),u=m;break e;case"link":var _=GE("link","href",f).get(u+(o.href||""));if(_){for(var S=0;S<_.length;S++)if(m=_[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(S,1);break t}}m=f.createElement(u),an(m,u,o),f.head.appendChild(m);break;case"meta":if(_=GE("meta","content",f).get(u+(o.content||""))){for(S=0;S<_.length;S++)if(m=_[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(S,1);break t}}m=f.createElement(u),an(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[Nt]=n,Ot(m),u=m}n.stateNode=u}else KE(f,n.type,n.stateNode);else n.stateNode=HE(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?KE(f,n.type,n.stateNode):HE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Om(n,n.memoizedProps,o.memoizedProps)}break;case 27:bn(r,n),An(n),u&512&&(kt||o===null||Hi(o,o.return)),o!==null&&u&4&&Om(n,n.memoizedProps,o.memoizedProps);break;case 5:if(bn(r,n),An(n),u&512&&(kt||o===null||Hi(o,o.return)),n.flags&32){f=n.stateNode;try{Tn(f,"")}catch(pe){Ze(n,n.return,pe)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Om(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Lm=!0);break;case 6:if(bn(r,n),An(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(pe){Ze(n,n.return,pe)}}break;case 3:if(jh=null,f=_i,_i=Bh(r.containerInfo),bn(r,n),_i=f,An(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ao(r.containerInfo)}catch(pe){Ze(n,n.return,pe)}Lm&&(Lm=!1,Kv(n));break;case 4:u=_i,_i=Bh(n.stateNode.containerInfo),bn(r,n),An(n),_i=u;break;case 12:bn(r,n),An(n);break;case 31:bn(r,n),An(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 13:bn(r,n),An(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ch=gn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 22:f=n.memoizedState!==null;var x=o!==null&&o.memoizedState!==null,q=fr,X=kt;if(fr=q||f,kt=X||x,bn(r,n),kt=X,fr=q,An(n),u&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||x||fr||kt||aa(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){x=o=r;try{if(m=x.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=x.stateNode;var W=x.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;S.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(pe){Ze(x,x.return,pe)}}}else if(r.tag===6){if(o===null){x=r;try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(pe){Ze(x,x.return,pe)}}}else if(r.tag===18){if(o===null){x=r;try{var Y=x.stateNode;f?PE(Y,!0):PE(x.stateNode,!1)}catch(pe){Ze(x,x.return,pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Rh(n,o))));break;case 19:bn(r,n),An(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 30:break;case 21:break;default:bn(r,n),An(n)}}function An(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(Uv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Mm(n);wh(n,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(Tn(_,""),o.flags&=-33);var S=Mm(n);wh(n,S,_);break;case 3:case 4:var x=o.stateNode.containerInfo,q=Mm(n);Pm(n,q,x);break;default:throw Error(i(161))}}catch(X){Ze(n,n.return,X)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Kv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Kv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function mr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Bv(n,r.alternate,r),r=r.sibling}function aa(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:$r(4,r,r.return),aa(r);break;case 1:Hi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Pv(r,r.return,o),aa(r);break;case 27:fu(r.stateNode);case 26:case 5:Hi(r,r.return),aa(r);break;case 22:r.memoizedState===null&&aa(r);break;case 30:aa(r);break;default:aa(r)}n=n.sibling}}function pr(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=n,m=r,_=m.flags;switch(m.tag){case 0:case 11:case 15:pr(f,m,o),nu(4,m);break;case 1:if(pr(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){Ze(u,u.return,q)}if(u=m,f=u.updateQueue,f!==null){var S=u.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)b_(x[f],S)}catch(q){Ze(u,u.return,q)}}o&&_&64&&Mv(m),iu(m,m.return);break;case 27:kv(m);case 26:case 5:pr(f,m,o),o&&u===null&&_&4&&Lv(m),iu(m,m.return);break;case 12:pr(f,m,o);break;case 31:pr(f,m,o),o&&_&4&&Fv(f,m);break;case 13:pr(f,m,o),o&&_&4&&Hv(f,m);break;case 22:m.memoizedState===null&&pr(f,m,o),iu(m,m.return);break;case 30:break;default:pr(f,m,o)}r=r.sibling}}function Um(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Fl(o))}function km(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Fl(n))}function vi(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Qv(n,r,o,u),r=r.sibling}function Qv(n,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:vi(n,r,o,u),f&2048&&nu(9,r);break;case 1:vi(n,r,o,u);break;case 3:vi(n,r,o,u),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Fl(n)));break;case 12:if(f&2048){vi(n,r,o,u),n=r.stateNode;try{var m=r.memoizedProps,_=m.id,S=m.onPostCommit;typeof S=="function"&&S(_,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(x){Ze(r,r.return,x)}}else vi(n,r,o,u);break;case 31:vi(n,r,o,u);break;case 13:vi(n,r,o,u);break;case 23:break;case 22:m=r.stateNode,_=r.alternate,r.memoizedState!==null?m._visibility&2?vi(n,r,o,u):ru(n,r):m._visibility&2?vi(n,r,o,u):(m._visibility|=2,fo(n,r,o,u,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Um(_,r);break;case 24:vi(n,r,o,u),f&2048&&km(r.alternate,r);break;default:vi(n,r,o,u)}}function fo(n,r,o,u,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,_=r,S=o,x=u,q=_.flags;switch(_.tag){case 0:case 11:case 15:fo(m,_,S,x,f),nu(8,_);break;case 23:break;case 22:var X=_.stateNode;_.memoizedState!==null?X._visibility&2?fo(m,_,S,x,f):ru(m,_):(X._visibility|=2,fo(m,_,S,x,f)),f&&q&2048&&Um(_.alternate,_);break;case 24:fo(m,_,S,x,f),f&&q&2048&&km(_.alternate,_);break;default:fo(m,_,S,x,f)}r=r.sibling}}function ru(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,f=u.flags;switch(u.tag){case 22:ru(o,u),f&2048&&Um(u.alternate,u);break;case 24:ru(o,u),f&2048&&km(u.alternate,u);break;default:ru(o,u)}r=r.sibling}}var su=8192;function mo(n,r,o){if(n.subtreeFlags&su)for(n=n.child;n!==null;)Yv(n,r,o),n=n.sibling}function Yv(n,r,o){switch(n.tag){case 26:mo(n,r,o),n.flags&su&&n.memoizedState!==null&&Xw(o,_i,n.memoizedState,n.memoizedProps);break;case 5:mo(n,r,o);break;case 3:case 4:var u=_i;_i=Bh(n.stateNode.containerInfo),mo(n,r,o),_i=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=su,su=16777216,mo(n,r,o),su=u):mo(n,r,o));break;default:mo(n,r,o)}}function $v(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function au(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Jt=u,Jv(u,n)}$v(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Xv(n),n=n.sibling}function Xv(n){switch(n.tag){case 0:case 11:case 15:au(n),n.flags&2048&&$r(9,n,n.return);break;case 3:au(n);break;case 12:au(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Ih(n)):au(n);break;default:au(n)}}function Ih(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Jt=u,Jv(u,n)}$v(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:$r(8,r,r.return),Ih(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Ih(r));break;default:Ih(r)}n=n.sibling}}function Jv(n,r){for(;Jt!==null;){var o=Jt;switch(o.tag){case 0:case 11:case 15:$r(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Fl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Jt=u;else e:for(o=n;Jt!==null;){u=Jt;var f=u.sibling,m=u.return;if(qv(u),u===o){Jt=null;break e}if(f!==null){f.return=m,Jt=f;break e}Jt=m}}}var hw={getCacheForType:function(n){var r=rn(Pt),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return rn(Pt).controller.signal}},fw=typeof WeakMap=="function"?WeakMap:Map,Ke=0,at=null,Oe=null,Pe=0,Je=0,Ln=null,Xr=!1,po=!1,zm=!1,gr=0,Et=0,Jr=0,oa=0,Bm=0,Un=0,go=0,ou=null,wn=null,qm=!1,Ch=0,Zv=0,xh=1/0,Dh=null,Zr=null,Kt=0,Wr=null,yo=null,yr=0,jm=0,Fm=null,Wv=null,lu=0,Hm=null;function kn(){return(Ke&2)!==0&&Pe!==0?Pe&-Pe:J.T!==null?Xm():Vc()}function eE(){if(Un===0)if((Pe&536870912)===0||ke){var n=Ms;Ms<<=1,(Ms&3932160)===0&&(Ms=262144),Un=n}else Un=536870912;return n=Mn.current,n!==null&&(n.flags|=32),Un}function Rn(n,r,o){(n===at&&(Je===2||Je===9)||n.cancelPendingCommit!==null)&&(_o(n,0),es(n,Pe,Un,!1)),Ps(n,o),((Ke&2)===0||n!==at)&&(n===at&&((Ke&2)===0&&(oa|=o),Et===4&&es(n,Pe,Un,!1)),Gi(n))}function tE(n,r,o){if((Ke&6)!==0)throw Error(i(327));var u=!o&&(r&127)===0&&(r&n.expiredLanes)===0||ui(n,r),f=u?pw(n,r):Km(n,r,!0),m=u;do{if(f===0){po&&!u&&es(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!dw(o)){f=Km(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var S=n;f=ou;var x=S.current.memoizedState.isDehydrated;if(x&&(_o(S,_).flags|=256),_=Km(S,_,!1),_!==2){if(zm&&!x){S.errorRecoveryDisabledLanes|=m,oa|=m,f=4;break e}m=wn,wn=f,m!==null&&(wn===null?wn=m:wn.push.apply(wn,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){_o(n,0),es(n,r,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:es(u,r,Un,!Xr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Ch+300-gn(),10<f)){if(es(u,r,Un,!Xr),Ii(u,0,!0)!==0)break e;yr=r,u.timeoutHandle=NE(nE.bind(null,u,o,wn,Dh,qm,r,Un,oa,go,Xr,m,"Throttled",-0,0),f);break e}nE(u,o,wn,Dh,qm,r,Un,oa,go,Xr,m,null,-0,0)}}break}while(!0);Gi(n)}function nE(n,r,o,u,f,m,_,S,x,q,X,W,H,Y){if(n.timeoutHandle=-1,W=r.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fi},Yv(r,m,W);var pe=(m&62914560)===m?Ch-gn():(m&4194048)===m?Zv-gn():0;if(pe=Jw(W,pe),pe!==null){yr=m,n.cancelPendingCommit=pe(cE.bind(null,n,r,m,o,u,f,_,S,x,X,W,null,H,Y)),es(n,m,_,!q);return}}cE(n,r,m,o,u,f,_,S,x)}function dw(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Nn(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function es(n,r,o,u){r&=~Bm,r&=~oa,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var f=r;0<f;){var m=31-At(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&Ls(n,o,r)}function Vh(){return(Ke&6)===0?(uu(0),!1):!0}function Gm(){if(Oe!==null){if(Je===0)var n=Oe.return;else n=Oe,ar=Zs=null,om(n),oo=null,Gl=0,n=Oe;for(;n!==null;)Ov(n.alternate,n),n=n.return;Oe=null}}function _o(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Ow(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),yr=0,Gm(),at=n,Oe=o=rr(n.current,null),Pe=r,Je=0,Ln=null,Xr=!1,po=ui(n,r),zm=!1,go=Un=Bm=oa=Jr=Et=0,wn=ou=null,qm=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var f=31-At(u),m=1<<f;r|=n[f],u&=~m}return gr=r,Zc(),o}function iE(n,r){xe=null,J.H=Wl,r===ao||r===ah?(r=v_(),Je=3):r===$d?(r=v_(),Je=4):Je=r===bm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ln=r,Oe===null&&(Et=1,Eh(n,Zn(r,n.current)))}function rE(){var n=Mn.current;return n===null?!0:(Pe&4194048)===Pe?ni===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?n===ni:!1}function sE(){var n=J.H;return J.H=Wl,n===null?Wl:n}function aE(){var n=J.A;return J.A=hw,n}function Nh(){Et=4,Xr||(Pe&4194048)!==Pe&&Mn.current!==null||(po=!0),(Jr&134217727)===0&&(oa&134217727)===0||at===null||es(at,Pe,Un,!1)}function Km(n,r,o){var u=Ke;Ke|=2;var f=sE(),m=aE();(at!==n||Pe!==r)&&(Dh=null,_o(n,r)),r=!1;var _=Et;e:do try{if(Je!==0&&Oe!==null){var S=Oe,x=Ln;switch(Je){case 8:Gm(),_=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(r=!0);var q=Je;if(Je=0,Ln=null,vo(n,S,x,q),o&&po){_=0;break e}break;default:q=Je,Je=0,Ln=null,vo(n,S,x,q)}}mw(),_=Et;break}catch(X){iE(n,X)}while(!0);return r&&n.shellSuspendCounter++,ar=Zs=null,Ke=u,J.H=f,J.A=m,Oe===null&&(at=null,Pe=0,Zc()),_}function mw(){for(;Oe!==null;)oE(Oe)}function pw(n,r){var o=Ke;Ke|=2;var u=sE(),f=aE();at!==n||Pe!==r?(Dh=null,xh=gn()+500,_o(n,r)):po=ui(n,r);e:do try{if(Je!==0&&Oe!==null){r=Oe;var m=Ln;t:switch(Je){case 1:Je=0,Ln=null,vo(n,r,m,1);break;case 2:case 9:if(y_(m)){Je=0,Ln=null,lE(r);break}r=function(){Je!==2&&Je!==9||at!==n||(Je=7),Gi(n)},m.then(r,r);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:y_(m)?(Je=0,Ln=null,lE(r)):(Je=0,Ln=null,vo(n,r,m,7));break;case 5:var _=null;switch(Oe.tag){case 26:_=Oe.memoizedState;case 5:case 27:var S=Oe;if(_?QE(_):S.stateNode.complete){Je=0,Ln=null;var x=S.sibling;if(x!==null)Oe=x;else{var q=S.return;q!==null?(Oe=q,Oh(q)):Oe=null}break t}}Je=0,Ln=null,vo(n,r,m,5);break;case 6:Je=0,Ln=null,vo(n,r,m,6);break;case 8:Gm(),Et=6;break e;default:throw Error(i(462))}}gw();break}catch(X){iE(n,X)}while(!0);return ar=Zs=null,J.H=u,J.A=f,Ke=o,Oe!==null?0:(at=null,Pe=0,Zc(),Et)}function gw(){for(;Oe!==null&&!Sd();)oE(Oe)}function oE(n){var r=Vv(n.alternate,n,gr);n.memoizedProps=n.pendingProps,r===null?Oh(n):Oe=r}function lE(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=wv(o,r,r.pendingProps,r.type,void 0,Pe);break;case 11:r=wv(o,r,r.pendingProps,r.type.render,r.ref,Pe);break;case 5:om(r);default:Ov(o,r),r=Oe=a_(r,gr),r=Vv(o,r,gr)}n.memoizedProps=n.pendingProps,r===null?Oh(n):Oe=r}function vo(n,r,o,u){ar=Zs=null,om(r),oo=null,Gl=0;var f=r.return;try{if(rw(n,f,r,o,Pe)){Et=1,Eh(n,Zn(o,n.current)),Oe=null;return}}catch(m){if(f!==null)throw Oe=f,m;Et=1,Eh(n,Zn(o,n.current)),Oe=null;return}r.flags&32768?(ke||u===1?n=!0:po||(Pe&536870912)!==0?n=!1:(Xr=n=!0,(u===2||u===9||u===3||u===6)&&(u=Mn.current,u!==null&&u.tag===13&&(u.flags|=16384))),uE(r,n)):Oh(r)}function Oh(n){var r=n;do{if((r.flags&32768)!==0){uE(r,Xr);return}n=r.return;var o=ow(r.alternate,r,gr);if(o!==null){Oe=o;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=n}while(r!==null);Et===0&&(Et=5)}function uE(n,r){do{var o=lw(n.alternate,n);if(o!==null){o.flags&=32767,Oe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Oe=n;return}Oe=n=o}while(n!==null);Et=6,Oe=null}function cE(n,r,o,u,f,m,_,S,x){n.cancelPendingCommit=null;do Mh();while(Kt!==0);if((Ke&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Md,wd(n,o,m,_,S,x),n===at&&(Oe=at=null,Pe=0),yo=r,Wr=n,yr=o,jm=m,Fm=f,Wv=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Ew(Dr,function(){return pE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,f=ue.p,ue.p=2,_=Ke,Ke|=4;try{uw(n,r,o)}finally{Ke=_,ue.p=f,J.T=u}}Kt=1,hE(),fE(),dE()}}function hE(){if(Kt===1){Kt=0;var n=Wr,r=yo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=ue.p;ue.p=2;var f=Ke;Ke|=4;try{Gv(r,n);var m=rp,_=Jy(n.containerInfo),S=m.focusedElem,x=m.selectionRange;if(_!==S&&S&&S.ownerDocument&&Xy(S.ownerDocument.documentElement,S)){if(x!==null&&xd(S)){var q=x.start,X=x.end;if(X===void 0&&(X=q),"selectionStart"in S)S.selectionStart=q,S.selectionEnd=Math.min(X,S.value.length);else{var W=S.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var Y=H.getSelection(),pe=S.textContent.length,Ae=Math.min(x.start,pe),st=x.end===void 0?Ae:Math.min(x.end,pe);!Y.extend&&Ae>st&&(_=st,st=Ae,Ae=_);var P=$y(S,Ae),V=$y(S,st);if(P&&V&&(Y.rangeCount!==1||Y.anchorNode!==P.node||Y.anchorOffset!==P.offset||Y.focusNode!==V.node||Y.focusOffset!==V.offset)){var B=W.createRange();B.setStart(P.node,P.offset),Y.removeAllRanges(),Ae>st?(Y.addRange(B),Y.extend(V.node,V.offset)):(B.setEnd(V.node,V.offset),Y.addRange(B))}}}}for(W=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&W.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<W.length;S++){var Z=W[S];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Kh=!!ip,rp=ip=null}finally{Ke=f,ue.p=u,J.T=o}}n.current=r,Kt=2}}function fE(){if(Kt===2){Kt=0;var n=Wr,r=yo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=ue.p;ue.p=2;var f=Ke;Ke|=4;try{Bv(n,r.alternate,r)}finally{Ke=f,ue.p=u,J.T=o}}Kt=3}}function dE(){if(Kt===4||Kt===3){Kt=0,Ac();var n=Wr,r=yo,o=yr,u=Wv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Kt=5:(Kt=0,yo=Wr=null,mE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Zr=null),er(o),r=r.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(li,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=J.T,f=ue.p,ue.p=2,J.T=null;try{for(var m=n.onRecoverableError,_=0;_<u.length;_++){var S=u[_];m(S.value,{componentStack:S.stack})}}finally{J.T=r,ue.p=f}}(yr&3)!==0&&Mh(),Gi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Hm?lu++:(lu=0,Hm=n):lu=0,uu(0)}}function mE(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Fl(r)))}function Mh(){return hE(),fE(),dE(),pE()}function pE(){if(Kt!==5)return!1;var n=Wr,r=jm;jm=0;var o=er(yr),u=J.T,f=ue.p;try{ue.p=32>o?32:o,J.T=null,o=Fm,Fm=null;var m=Wr,_=yr;if(Kt=0,yo=Wr=null,yr=0,(Ke&6)!==0)throw Error(i(331));var S=Ke;if(Ke|=4,Xv(m.current),Qv(m,m.current,_,o),Ke=S,uu(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(li,m)}catch{}return!0}finally{ue.p=f,J.T=u,mE(n,r)}}function gE(n,r,o){r=Zn(o,r),r=Sm(n.stateNode,r,2),n=Kr(n,r,2),n!==null&&(Ps(n,2),Gi(n))}function Ze(n,r,o){if(n.tag===3)gE(n,n,o);else for(;r!==null;){if(r.tag===3){gE(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Zr===null||!Zr.has(u))){n=Zn(o,n),o=yv(2),u=Kr(r,o,2),u!==null&&(_v(o,u,r,n),Ps(u,2),Gi(u));break}}r=r.return}}function Qm(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new fw;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(zm=!0,f.add(o),n=yw.bind(null,n,r,o),r.then(n,n))}function yw(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,at===n&&(Pe&o)===o&&(Et===4||Et===3&&(Pe&62914560)===Pe&&300>gn()-Ch?(Ke&2)===0&&_o(n,0):Bm|=o,go===Pe&&(go=0)),Gi(n)}function yE(n,r){r===0&&(r=Dc()),n=$s(n,r),n!==null&&(Ps(n,r),Gi(n))}function _w(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),yE(n,o)}function vw(n,r){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),yE(n,o)}function Ew(n,r){return Gt(n,r)}var Ph=null,Eo=null,Ym=!1,Lh=!1,$m=!1,ts=0;function Gi(n){n!==Eo&&n.next===null&&(Eo===null?Ph=Eo=n:Eo=Eo.next=n),Lh=!0,Ym||(Ym=!0,Sw())}function uu(n,r){if(!$m&&Lh){$m=!0;do for(var o=!1,u=Ph;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,S=u.pingedLanes;m=(1<<31-At(42|n)+1)-1,m&=f&~(_&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,TE(u,m))}else m=Pe,m=Ii(u,u===at?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ui(u,m)||(o=!0,TE(u,m));u=u.next}while(o);$m=!1}}function Tw(){_E()}function _E(){Lh=Ym=!1;var n=0;ts!==0&&Nw()&&(n=ts);for(var r=gn(),o=null,u=Ph;u!==null;){var f=u.next,m=vE(u,r);m===0?(u.next=null,o===null?Ph=f:o.next=f,f===null&&(Eo=o)):(o=u,(n!==0||(m&3)!==0)&&(Lh=!0)),u=f}Kt!==0&&Kt!==5||uu(n),ts!==0&&(ts=0)}function vE(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-At(m),S=1<<_,x=f[_];x===-1?((S&o)===0||(S&u)!==0)&&(f[_]=Ad(S,r)):x<=r&&(n.expiredLanes|=S),m&=~S}if(r=at,o=Pe,o=Ii(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(Je===2||Je===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&xr(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ui(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&xr(u),er(o)){case 2:case 8:o=vl;break;case 32:o=Dr;break;case 268435456:o=wc;break;default:o=Dr}return u=EE.bind(null,n),o=Gt(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&xr(u),n.callbackPriority=2,n.callbackNode=null,2}function EE(n,r){if(Kt!==0&&Kt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Mh()&&n.callbackNode!==o)return null;var u=Pe;return u=Ii(n,n===at?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(tE(n,u,r),vE(n,gn()),n.callbackNode!=null&&n.callbackNode===o?EE.bind(null,n):null)}function TE(n,r){if(Mh())return null;tE(n,r,!0)}function Sw(){Mw(function(){(Ke&6)!==0?Gt(_l,Tw):_E()})}function Xm(){if(ts===0){var n=ro;n===0&&(n=wi,wi<<=1,(wi&261888)===0&&(wi=256)),ts=n}return ts}function SE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Fa(""+n)}function bE(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function bw(n,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var m=SE((f[$t]||null).action),_=u.submitter;_&&(r=(r=_[$t]||null)?SE(r.formAction):_.getAttribute("formAction"),r!==null&&(m=r,_=null));var S=new ki("action","action",null,u,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ts!==0){var x=_?bE(f,_):new FormData(f);gm(o,{pending:!0,data:x,method:f.method,action:m},null,x)}}else typeof m=="function"&&(S.preventDefault(),x=_?bE(f,_):new FormData(f),gm(o,{pending:!0,data:x,method:f.method,action:m},m,x))},currentTarget:f}]})}}for(var Jm=0;Jm<Od.length;Jm++){var Zm=Od[Jm],Aw=Zm.toLowerCase(),ww=Zm[0].toUpperCase()+Zm.slice(1);yi(Aw,"on"+ww)}yi(e_,"onAnimationEnd"),yi(t_,"onAnimationIteration"),yi(n_,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(qA,"onTransitionRun"),yi(jA,"onTransitionStart"),yi(FA,"onTransitionCancel"),yi(i_,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function AE(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var _=u.length-1;0<=_;_--){var S=u[_],x=S.instance,q=S.currentTarget;if(S=S.listener,x!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=q;try{m(f)}catch(X){Jc(X)}f.currentTarget=null,m=x}else for(_=0;_<u.length;_++){if(S=u[_],x=S.instance,q=S.currentTarget,S=S.listener,x!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=q;try{m(f)}catch(X){Jc(X)}f.currentTarget=null,m=x}}}}function Me(n,r){var o=r[ka];o===void 0&&(o=r[ka]=new Set);var u=n+"__bubble";o.has(u)||(wE(r,n,2,!1),o.add(u))}function Wm(n,r,o){var u=0;r&&(u|=4),wE(o,n,u,r)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function ep(n){if(!n[Uh]){n[Uh]=!0,Sl.forEach(function(o){o!=="selectionchange"&&(Rw.has(o)||Wm(o,!1,n),Wm(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Uh]||(r[Uh]=!0,Wm("selectionchange",!1,r))}}function wE(n,r,o,u){switch(e0(r)){case 2:var f=eR;break;case 8:f=tR;break;default:f=pp}o=f.bind(null,r,o,n),f=void 0,!qs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function tp(n,r,o,u,f){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var S=u.stateNode.containerInfo;if(S===f)break;if(_===4)for(_=u.return;_!==null;){var x=_.tag;if((x===3||x===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;S!==null;){if(_=Vi(S),_===null)return;if(x=_.tag,x===5||x===6||x===26||x===27){u=m=_;continue e}S=S.parentNode}}u=u.return}Lr(function(){var q=m,X=Yn(o),W=[];e:{var H=r_.get(n);if(H!==void 0){var Y=ki,pe=n;switch(n){case"keypress":if(Fs(o)===0)break e;case"keydown":case"keyup":Y=Yc;break;case"focusin":pe="focus",Y=Gs;break;case"focusout":pe="blur",Y=Gs;break;case"beforeblur":case"afterblur":Y=Gs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case e_:case t_:case n_:Y=qc;break;case i_:Y=A;break;case"scroll":case"scrollend":Y=Ml;break;case"wheel":Y=Q;break;case"copy":case"cut":case"paste":Y=jc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ir;break;case"toggle":case"beforetoggle":Y=Ce}var Ae=(r&4)!==0,st=!Ae&&(n==="scroll"||n==="scrollend"),P=Ae?H!==null?H+"Capture":null:H;Ae=[];for(var V=q,B;V!==null;){var Z=V;if(B=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||B===null||P===null||(Z=di(V,P),Z!=null&&Ae.push(hu(V,Z,B))),st)break;V=V.return}0<Ae.length&&(H=new Y(H,pe,null,o,X),W.push({event:H,listeners:Ae}))}}if((r&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",H&&o!==Vl&&(pe=o.relatedTarget||o.fromElement)&&(Vi(pe)||pe[xi]))break e;if((Y||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,Y?(pe=o.relatedTarget||o.toElement,Y=q,pe=pe?Vi(pe):null,pe!==null&&(st=l(pe),Ae=pe.tag,pe!==st||Ae!==5&&Ae!==27&&Ae!==6)&&(pe=null)):(Y=null,pe=q),Y!==pe)){if(Ae=Pl,Z="onMouseLeave",P="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=ir,Z="onPointerLeave",P="onPointerEnter",V="pointer"),st=Y==null?H:Dn(Y),B=pe==null?H:Dn(pe),H=new Ae(Z,V+"leave",Y,o,X),H.target=st,H.relatedTarget=B,Z=null,Vi(X)===q&&(Ae=new Ae(P,V+"enter",pe,o,X),Ae.target=B,Ae.relatedTarget=st,Z=Ae),st=Z,Y&&pe)t:{for(Ae=Iw,P=Y,V=pe,B=0,Z=P;Z;Z=Ae(Z))B++;Z=0;for(var Te=V;Te;Te=Ae(Te))Z++;for(;0<B-Z;)P=Ae(P),B--;for(;0<Z-B;)V=Ae(V),Z--;for(;B--;){if(P===V||V!==null&&P===V.alternate){Ae=P;break t}P=Ae(P),V=Ae(V)}Ae=null}else Ae=null;Y!==null&&RE(W,H,Y,Ae,!1),pe!==null&&st!==null&&RE(W,st,pe,Ae,!0)}}e:{if(H=q?Dn(q):window,Y=H.nodeName&&H.nodeName.toLowerCase(),Y==="select"||Y==="input"&&H.type==="file")var Fe=Fy;else if(qy(H))if(Hy)Fe=kA;else{Fe=LA;var _e=PA}else Y=H.nodeName,!Y||Y.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&ja(q.elementType)&&(Fe=Fy):Fe=UA;if(Fe&&(Fe=Fe(n,q))){jy(W,Fe,o,X);break e}_e&&_e(n,H,q),n==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&Cl(H,"number",H.value)}switch(_e=q?Dn(q):window,n){case"focusin":(qy(_e)||_e.contentEditable==="true")&&(Xa=_e,Dd=q,Bl=null);break;case"focusout":Bl=Dd=Xa=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,Zy(W,o,X);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":Zy(W,o,X)}var Ve;if(Ge)e:{switch(n){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else $a?Ks(n,o)&&(Le="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Le="onCompositionStart");Le&&(qi&&o.locale!=="ko"&&($a||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&$a&&(Ve=Ol()):(Ui=X,Nl="value"in Ui?Ui.value:Ui.textContent,$a=!0)),_e=kh(q,Le),0<_e.length&&(Le=new Bi(Le,n,null,o,X),W.push({event:Le,listeners:_e}),Ve?Le.data=Ve:(Ve=Ya(o),Ve!==null&&(Le.data=Ve)))),(Ve=Xn?VA(n,o):NA(n,o))&&(Le=kh(q,"onBeforeInput"),0<Le.length&&(_e=new Bi("onBeforeInput","beforeinput",null,o,X),W.push({event:_e,listeners:Le}),_e.data=Ve)),bw(W,n,q,o,X)}AE(W,r)})}function hu(n,r,o){return{instance:n,listener:r,currentTarget:o}}function kh(n,r){for(var o=r+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=di(n,o),f!=null&&u.unshift(hu(n,f,m)),f=di(n,r),f!=null&&u.push(hu(n,f,m))),n.tag===3)return u;n=n.return}return[]}function Iw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function RE(n,r,o,u,f){for(var m=r._reactName,_=[];o!==null&&o!==u;){var S=o,x=S.alternate,q=S.stateNode;if(S=S.tag,x!==null&&x===u)break;S!==5&&S!==26&&S!==27||q===null||(x=q,f?(q=di(o,m),q!=null&&_.unshift(hu(o,q,x))):f||(q=di(o,m),q!=null&&_.push(hu(o,q,x)))),o=o.return}_.length!==0&&n.push({event:r,listeners:_})}var Cw=/\r\n?/g,xw=/\u0000|\uFFFD/g;function IE(n){return(typeof n=="string"?n:""+n).replace(Cw,`
`).replace(xw,"")}function CE(n,r){return r=IE(r),IE(n)===r}function rt(n,r,o,u,f,m){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Tn(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Tn(n,""+u);break;case"className":Vn(n,"class",u);break;case"tabIndex":Vn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(n,o,u);break;case"style":Dl(n,u,m);break;case"data":if(r!=="object"){Vn(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Fa(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&rt(n,r,"name",f.name,f,null),rt(n,r,"formEncType",f.formEncType,f,null),rt(n,r,"formMethod",f.formMethod,f,null),rt(n,r,"formTarget",f.formTarget,f,null)):(rt(n,r,"encType",f.encType,f,null),rt(n,r,"method",f.method,f,null),rt(n,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Fa(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=fi);break;case"onScroll":u!=null&&Me("scroll",n);break;case"onScrollEnd":u!=null&&Me("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Fa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Me("beforetoggle",n),Me("toggle",n),Ba(n,"popover",u);break;case"xlinkActuate":Mt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Mt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Mt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Mt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Mt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Mt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Mt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ba(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=kc.get(o)||o,Ba(n,o,u))}}function np(n,r,o,u,f,m){switch(o){case"style":Dl(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Tn(n,u):(typeof u=="number"||typeof u=="bigint")&&Tn(n,""+u);break;case"onScroll":u!=null&&Me("scroll",n);break;case"onScrollEnd":u!=null&&Me("scrollend",n);break;case"onClick":u!=null&&(n.onclick=fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[$t]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ba(n,o,u)}}}function an(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",n),Me("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(n,r,m,_,o,null)}}f&&rt(n,r,"srcSet",o.srcSet,o,null),u&&rt(n,r,"src",o.src,o,null);return;case"input":Me("invalid",n);var S=m=_=f=null,x=null,q=null;for(u in o)if(o.hasOwnProperty(u)){var X=o[u];if(X!=null)switch(u){case"name":f=X;break;case"type":_=X;break;case"checked":x=X;break;case"defaultChecked":q=X;break;case"value":m=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:rt(n,r,u,X,o,null)}}Pc(n,m,S,x,q,_,f,!1);return;case"select":Me("invalid",n),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":_=S;break;case"multiple":u=S;default:rt(n,r,f,S,o,null)}r=m,o=_,n.multiple=!!u,r!=null?Nr(n,!!u,r,!1):o!=null&&Nr(n,!!u,o,!0);return;case"textarea":Me("invalid",n),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(S=o[_],S!=null))switch(_){case"value":u=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:rt(n,r,_,S,o,null)}Or(n,u,f,m);return;case"option":for(x in o)o.hasOwnProperty(x)&&(u=o[x],u!=null)&&(x==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":rt(n,r,x,u,o,null));return;case"dialog":Me("beforetoggle",n),Me("toggle",n),Me("cancel",n),Me("close",n);break;case"iframe":case"object":Me("load",n);break;case"video":case"audio":for(u=0;u<cu.length;u++)Me(cu[u],n);break;case"image":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"embed":case"source":case"link":Me("error",n),Me("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(u=o[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(n,r,q,u,o,null)}return;default:if(ja(r)){for(X in o)o.hasOwnProperty(X)&&(u=o[X],u!==void 0&&np(n,r,X,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&rt(n,r,S,u,o,null))}function Dw(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,S=null,x=null,q=null,X=null;for(Y in o){var W=o[Y];if(o.hasOwnProperty(Y)&&W!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":x=W;default:u.hasOwnProperty(Y)||rt(n,r,Y,null,u,W)}}for(var H in u){var Y=u[H];if(W=o[H],u.hasOwnProperty(H)&&(Y!=null||W!=null))switch(H){case"type":m=Y;break;case"name":f=Y;break;case"checked":q=Y;break;case"defaultChecked":X=Y;break;case"value":_=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:Y!==W&&rt(n,r,H,Y,u,W)}}qa(n,_,S,x,q,X,m,f);return;case"select":Y=_=S=H=null;for(m in o)if(x=o[m],o.hasOwnProperty(m)&&x!=null)switch(m){case"value":break;case"multiple":Y=x;default:u.hasOwnProperty(m)||rt(n,r,m,null,u,x)}for(f in u)if(m=u[f],x=o[f],u.hasOwnProperty(f)&&(m!=null||x!=null))switch(f){case"value":H=m;break;case"defaultValue":S=m;break;case"multiple":_=m;default:m!==x&&rt(n,r,f,m,u,x)}r=S,o=_,u=Y,H!=null?Nr(n,!!o,H,!1):!!u!=!!o&&(r!=null?Nr(n,!!o,r,!0):Nr(n,!!o,o?[]:"",!1));return;case"textarea":Y=H=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:rt(n,r,S,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":H=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&rt(n,r,_,f,u,m)}Lc(n,H,Y);return;case"option":for(var pe in o)H=o[pe],o.hasOwnProperty(pe)&&H!=null&&!u.hasOwnProperty(pe)&&(pe==="selected"?n.selected=!1:rt(n,r,pe,null,u,H));for(x in u)H=u[x],Y=o[x],u.hasOwnProperty(x)&&H!==Y&&(H!=null||Y!=null)&&(x==="selected"?n.selected=H&&typeof H!="function"&&typeof H!="symbol":rt(n,r,x,H,u,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)H=o[Ae],o.hasOwnProperty(Ae)&&H!=null&&!u.hasOwnProperty(Ae)&&rt(n,r,Ae,null,u,H);for(q in u)if(H=u[q],Y=o[q],u.hasOwnProperty(q)&&H!==Y&&(H!=null||Y!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,r));break;default:rt(n,r,q,H,u,Y)}return;default:if(ja(r)){for(var st in o)H=o[st],o.hasOwnProperty(st)&&H!==void 0&&!u.hasOwnProperty(st)&&np(n,r,st,void 0,u,H);for(X in u)H=u[X],Y=o[X],!u.hasOwnProperty(X)||H===Y||H===void 0&&Y===void 0||np(n,r,X,H,u,Y);return}}for(var P in o)H=o[P],o.hasOwnProperty(P)&&H!=null&&!u.hasOwnProperty(P)&&rt(n,r,P,null,u,H);for(W in u)H=u[W],Y=o[W],!u.hasOwnProperty(W)||H===Y||H==null&&Y==null||rt(n,r,W,H,u,Y)}function xE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,S=f.duration;if(m&&S&&xE(_)){for(_=0,S=f.responseEnd,u+=1;u<o.length;u++){var x=o[u],q=x.startTime;if(q>S)break;var X=x.transferSize,W=x.initiatorType;X&&xE(W)&&(x=x.responseEnd,_+=X*(x<S?1:(S-q)/(x-q)))}if(--u,r+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var ip=null,rp=null;function zh(n){return n.nodeType===9?n:n.ownerDocument}function DE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VE(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function sp(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ap=null;function Nw(){var n=window.event;return n&&n.type==="popstate"?n===ap?!1:(ap=n,!0):(ap=null,!1)}var NE=typeof setTimeout=="function"?setTimeout:void 0,Ow=typeof clearTimeout=="function"?clearTimeout:void 0,OE=typeof Promise=="function"?Promise:void 0,Mw=typeof queueMicrotask=="function"?queueMicrotask:typeof OE<"u"?function(n){return OE.resolve(null).then(n).catch(Pw)}:NE;function Pw(n){setTimeout(function(){throw n})}function ns(n){return n==="head"}function ME(n,r){var o=r,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),Ao(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")fu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,fu(o);for(var m=o.firstChild;m;){var _=m.nextSibling,S=m.nodeName;m[Di]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&fu(n.ownerDocument.body);o=f}while(o);Ao(r)}function PE(n,r){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function op(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":op(o),za(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Lw(n,r,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Di])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ii(n.nextSibling),n===null)break}return null}function Uw(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ii(n.nextSibling),n===null))return null;return n}function LE(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=ii(n.nextSibling),n===null))return null;return n}function lp(n){return n.data==="$?"||n.data==="$~"}function up(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function kw(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ii(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var cp=null;function UE(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return ii(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function kE(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function zE(n,r,o){switch(r=zh(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function fu(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);za(n)}var ri=new Map,BE=new Set;function Bh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var _r=ue.d;ue.d={f:zw,r:Bw,D:qw,C:jw,L:Fw,m:Hw,X:Kw,S:Gw,M:Qw};function zw(){var n=_r.f(),r=Vh();return n||r}function Bw(n){var r=Qn(n);r!==null&&r.tag===5&&r.type==="form"?iv(r):_r.r(n)}var To=typeof document>"u"?null:document;function qE(n,r,o){var u=To;if(u&&typeof r=="string"&&r){var f=En(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),BE.has(f)||(BE.add(f),n={rel:n,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),an(r,"link",n),Ot(r),u.head.appendChild(r)))}}function qw(n){_r.D(n),qE("dns-prefetch",n,null)}function jw(n,r){_r.C(n,r),qE("preconnect",n,r)}function Fw(n,r,o){_r.L(n,r,o);var u=To;if(u&&n&&r){var f='link[rel="preload"][as="'+En(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+En(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+En(o.imageSizes)+'"]')):f+='[href="'+En(n)+'"]';var m=f;switch(r){case"style":m=So(n);break;case"script":m=bo(n)}ri.has(m)||(n=T({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),ri.set(m,n),u.querySelector(f)!==null||r==="style"&&u.querySelector(du(m))||r==="script"&&u.querySelector(mu(m))||(r=u.createElement("link"),an(r,"link",n),Ot(r),u.head.appendChild(r)))}}function Hw(n,r){_r.m(n,r);var o=To;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+En(u)+'"][href="'+En(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=bo(n)}if(!ri.has(m)&&(n=T({rel:"modulepreload",href:n},r),ri.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(mu(m)))return}u=o.createElement("link"),an(u,"link",n),Ot(u),o.head.appendChild(u)}}}function Gw(n,r,o){_r.S(n,r,o);var u=To;if(u&&n){var f=Ni(u).hoistableStyles,m=So(n);r=r||"default";var _=f.get(m);if(!_){var S={loading:0,preload:null};if(_=u.querySelector(du(m)))S.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":r},o),(o=ri.get(m))&&hp(n,o);var x=_=u.createElement("link");Ot(x),an(x,"link",n),x._p=new Promise(function(q,X){x.onload=q,x.onerror=X}),x.addEventListener("load",function(){S.loading|=1}),x.addEventListener("error",function(){S.loading|=2}),S.loading|=4,qh(_,r,u)}_={type:"stylesheet",instance:_,count:1,state:S},f.set(m,_)}}}function Kw(n,r){_r.X(n,r);var o=To;if(o&&n){var u=Ni(o).hoistableScripts,f=bo(n),m=u.get(f);m||(m=o.querySelector(mu(f)),m||(n=T({src:n,async:!0},r),(r=ri.get(f))&&fp(n,r),m=o.createElement("script"),Ot(m),an(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Qw(n,r){_r.M(n,r);var o=To;if(o&&n){var u=Ni(o).hoistableScripts,f=bo(n),m=u.get(f);m||(m=o.querySelector(mu(f)),m||(n=T({src:n,async:!0,type:"module"},r),(r=ri.get(f))&&fp(n,r),m=o.createElement("script"),Ot(m),an(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function jE(n,r,o,u){var f=(f=De.current)?Bh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=So(o.href),o=Ni(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=So(o.href);var m=Ni(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(du(n)))&&!m._p&&(_.instance=m,_.state.loading=5),ri.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ri.set(n,o),m||Yw(f,n,o,_.state))),r&&u===null)throw Error(i(528,""));return _}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=bo(o),o=Ni(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function So(n){return'href="'+En(n)+'"'}function du(n){return'link[rel="stylesheet"]['+n+"]"}function FE(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function Yw(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),an(r,"link",o),Ot(r),n.head.appendChild(r))}function bo(n){return'[src="'+En(n)+'"]'}function mu(n){return"script[async]"+n}function HE(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+En(o.href)+'"]');if(u)return r.instance=u,Ot(u),u;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ot(u),an(u,"style",f),qh(u,o.precedence,n),r.instance=u;case"stylesheet":f=So(o.href);var m=n.querySelector(du(f));if(m)return r.state.loading|=4,r.instance=m,Ot(m),m;u=FE(o),(f=ri.get(f))&&hp(u,f),m=(n.ownerDocument||n).createElement("link"),Ot(m);var _=m;return _._p=new Promise(function(S,x){_.onload=S,_.onerror=x}),an(m,"link",u),r.state.loading|=4,qh(m,o.precedence,n),r.instance=m;case"script":return m=bo(o.src),(f=n.querySelector(mu(m)))?(r.instance=f,Ot(f),f):(u=o,(f=ri.get(m))&&(u=T({},o),fp(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ot(f),an(f,"link",u),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,qh(u,o.precedence,n));return r.instance}function qh(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var S=u[_];if(S.dataset.precedence===r)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function hp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function fp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var jh=null;function GE(n,r,o){if(jh===null){var u=new Map,f=jh=new Map;f.set(o,u)}else f=jh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Di]||m[Nt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(r)||"";_=n+_;var S=u.get(_);S?S.push(m):u.set(_,[m])}}return u}function KE(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function $w(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function QE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Xw(n,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=So(u.href),m=r.querySelector(du(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Fh.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=m,Ot(m);return}m=r.ownerDocument||r,u=FE(u),(f=ri.get(f))&&hp(u,f),m=m.createElement("link"),Ot(m);var _=m;_._p=new Promise(function(S,x){_.onload=S,_.onerror=x}),an(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Fh.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var dp=0;function Jw(n,r){return n.stylesheets&&n.count===0&&Gh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Gh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&dp===0&&(dp=62500*Vw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Gh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>dp?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Fh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Hh=null;function Gh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Hh=new Map,r.forEach(Zw,n),Hh=null,Fh.call(n))}function Zw(n,r){if(!(r.state.loading&4)){var o=Hh.get(n);if(o)var u=o.get(null);else{o=new Map,Hh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=r.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=Fh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var pu={$$typeof:ie,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function Ww(n,r,o,u,f,m,_,S,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function YE(n,r,o,u,f,m,_,S,x,q,X,W){return n=new Ww(n,r,o,_,x,q,X,W,S),r=1,m===!0&&(r|=24),m=On(3,null,null,r),n.current=m,m.stateNode=n,r=Kd(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:r},Xd(m),n}function $E(n){return n?(n=Wa,n):Wa}function XE(n,r,o,u,f,m){f=$E(f),u.context===null?u.context=f:u.pendingContext=f,u=Gr(r),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Kr(n,u,r),o!==null&&(Rn(o,n,r),Ql(o,n,r))}function JE(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function mp(n,r){JE(n,r),(n=n.alternate)&&JE(n,r)}function ZE(n){if(n.tag===13||n.tag===31){var r=$s(n,67108864);r!==null&&Rn(r,n,67108864),mp(n,67108864)}}function WE(n){if(n.tag===13||n.tag===31){var r=kn();r=Us(r);var o=$s(n,r);o!==null&&Rn(o,n,r),mp(n,r)}}var Kh=!0;function eR(n,r,o,u){var f=J.T;J.T=null;var m=ue.p;try{ue.p=2,pp(n,r,o,u)}finally{ue.p=m,J.T=f}}function tR(n,r,o,u){var f=J.T;J.T=null;var m=ue.p;try{ue.p=8,pp(n,r,o,u)}finally{ue.p=m,J.T=f}}function pp(n,r,o,u){if(Kh){var f=gp(u);if(f===null)tp(n,r,u,Qh,o),t0(n,u);else if(iR(f,n,r,o,u))u.stopPropagation();else if(t0(n,u),r&4&&-1<nR.indexOf(n)){for(;f!==null;){var m=Qn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Ri(m.pendingLanes);if(_!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var x=1<<31-At(_);S.entanglements[1]|=x,_&=~x}Gi(m),(Ke&6)===0&&(xh=gn()+500,uu(0))}}break;case 31:case 13:S=$s(m,2),S!==null&&Rn(S,m,2),Vh(),mp(m,2)}if(m=gp(u),m===null&&tp(n,r,u,Qh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else tp(n,r,u,null,o)}}function gp(n){return n=Yn(n),yp(n)}var Qh=null;function yp(n){if(Qh=null,n=Vi(n),n!==null){var r=l(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=c(r),n!==null)return n;n=null}else if(o===31){if(n=d(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Qh=n,null}function e0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Os()){case _l:return 2;case vl:return 8;case Dr:case bd:return 32;case wc:return 268435456;default:return 32}default:return 32}}var _p=!1,is=null,rs=null,ss=null,gu=new Map,yu=new Map,as=[],nR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t0(n,r){switch(n){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":gu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(r.pointerId)}}function _u(n,r,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Qn(r),r!==null&&ZE(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function iR(n,r,o,u,f){switch(r){case"focusin":return is=_u(is,n,r,o,u,f),!0;case"dragenter":return rs=_u(rs,n,r,o,u,f),!0;case"mouseover":return ss=_u(ss,n,r,o,u,f),!0;case"pointerover":var m=f.pointerId;return gu.set(m,_u(gu.get(m)||null,n,r,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,yu.set(m,_u(yu.get(m)||null,n,r,o,u,f)),!0}return!1}function n0(n){var r=Vi(n.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){n.blockedOn=r,ci(n.priority,function(){WE(o)});return}}else if(r===31){if(r=d(o),r!==null){n.blockedOn=r,ci(n.priority,function(){WE(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Yh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=gp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Vl=u,o.target.dispatchEvent(u),Vl=null}else return r=Qn(o),r!==null&&ZE(r),n.blockedOn=o,!1;r.shift()}return!0}function i0(n,r,o){Yh(n)&&o.delete(r)}function rR(){_p=!1,is!==null&&Yh(is)&&(is=null),rs!==null&&Yh(rs)&&(rs=null),ss!==null&&Yh(ss)&&(ss=null),gu.forEach(i0),yu.forEach(i0)}function $h(n,r){n.blockedOn===r&&(n.blockedOn=null,_p||(_p=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,rR)))}var Xh=null;function r0(n){Xh!==n&&(Xh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Xh===n&&(Xh=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],f=n[r+2];if(typeof u!="function"){if(yp(u||o)===null)continue;break}var m=Qn(o);m!==null&&(n.splice(r,3),r-=3,gm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Ao(n){function r(x){return $h(x,n)}is!==null&&$h(is,n),rs!==null&&$h(rs,n),ss!==null&&$h(ss,n),gu.forEach(r),yu.forEach(r);for(var o=0;o<as.length;o++){var u=as[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<as.length&&(o=as[0],o.blockedOn===null);)n0(o),o.blockedOn===null&&as.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[$t]||null;if(typeof m=="function")_||r0(o);else if(_){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[$t]||null)S=_.formAction;else if(yp(f)!==null)continue}else S=_.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),r0(o)}}}function s0(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function vp(n){this._internalRoot=n}Jh.prototype.render=vp.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=kn();XE(o,u,n,r,null,null)},Jh.prototype.unmount=vp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;XE(n.current,2,null,n,null,null),Vh(),r[xi]=null}};function Jh(n){this._internalRoot=n}Jh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Vc();n={blockedOn:null,target:n,priority:r};for(var o=0;o<as.length&&r!==0&&r<as[o].priority;o++);as.splice(o,0,n),o===0&&n0(n)}};var a0=e.version;if(a0!=="19.2.4")throw Error(i(527,a0,"19.2.4"));ue.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(r),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var sR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{li=Zh.inject(sR),en=Zh}catch{}}return Eu.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,u="",f=dv,m=mv,_=pv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=YE(n,1,!1,null,null,o,u,null,f,m,_,s0),n[xi]=r.current,ep(n),new vp(r)},Eu.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=dv,_=mv,S=pv,x=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(x=o.formState)),r=YE(n,1,!0,r,o??null,u,f,x,m,_,S,s0),r.context=$E(null),o=r.current,u=kn(),u=Us(u),f=Gr(u),f.callback=null,Kr(o,f,u),o=u,r.current.lanes=o,Ps(r,o),Gi(r),n[xi]=r.current,ep(n),new Jh(r)},Eu.version="19.2.4",Eu}var g0;function gR(){if(g0)return Sp.exports;g0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Sp.exports=pR(),Sp.exports}var yR=gR();var y0="popstate";function _R(s={}){function e(a,l){let{pathname:c="/",search:d="",hash:p=""}=Da(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Kp("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=a.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:Ku(l))}function i(a,l){ai(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return ER(e,t,i,s)}function yt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ai(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vR(){return Math.random().toString(36).substring(2,10)}function _0(s,e){return{usr:s.state,key:s.key,idx:e}}function Kp(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Da(e):e,state:t,key:e&&e.key||i||vR()}}function Ku({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Da(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function ER(s,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function T(){d="POP";let z=v(),ne=z==null?null:z-g;g=z,p&&p({action:d,location:K.location,delta:ne})}function b(z,ne){d="PUSH";let te=Kp(K.location,z,ne);t&&t(te,z),g=v()+1;let ie=_0(te,g),ye=K.createHref(te);try{c.pushState(ie,"",ye)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;a.location.assign(ye)}l&&p&&p({action:d,location:K.location,delta:1})}function D(z,ne){d="REPLACE";let te=Kp(K.location,z,ne);t&&t(te,z),g=v();let ie=_0(te,g),ye=K.createHref(te);c.replaceState(ie,"",ye),l&&p&&p({action:d,location:K.location,delta:0})}function F(z){return TR(z)}let K={get action(){return d},get location(){return s(a,c)},listen(z){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(y0,T),p=z,()=>{a.removeEventListener(y0,T),p=null}},createHref(z){return e(a,z)},createURL:F,encodeLocation(z){let ne=F(z);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:b,replace:D,go(z){return c.go(z)}};return K}function TR(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),yt(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Ku(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function fS(s,e,t="/"){return SR(s,e,t,!1)}function SR(s,e,t,i){let a=typeof e=="string"?Da(e):e,l=Tr(a.pathname||"/",t);if(l==null)return null;let c=dS(s);bR(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=MR(l);d=NR(c[p],g,i)}return d}function dS(s,e=[],t=[],i="",a=!1){let l=(c,d,p=a,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&p)return;yt(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let T=Er([i,v.relativePath]),b=t.concat(v);c.children&&c.children.length>0&&(yt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),dS(c.children,e,b,T,p)),!(c.path==null&&!c.index)&&e.push({path:T,score:DR(T,c.index),routesMeta:b})};return s.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of mS(c.path))l(c,d,!0,p)}),e}function mS(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=mS(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>s.startsWith("/")&&p===""?"/":p)}function bR(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:VR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var AR=/^:[\w-]+$/,wR=3,RR=2,IR=1,CR=10,xR=-2,v0=s=>s==="*";function DR(s,e){let t=s.split("/"),i=t.length;return t.some(v0)&&(i+=xR),e&&(i+=RR),t.filter(a=>!v0(a)).reduce((a,l)=>a+(AR.test(l)?wR:l===""?IR:CR),i)}function VR(s,e){return s.length===e.length&&s.slice(0,-1).every((i,a)=>i===e[a])?s[s.length-1]-e[e.length-1]:0}function NR(s,e,t=!1){let{routesMeta:i}=s,a={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",T=Af({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),b=p.route;if(!T&&g&&t&&!i[i.length-1].route.index&&(T=Af({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Er([l,T.pathname]),pathnameBase:kR(Er([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=Er([l,T.pathnameBase]))}return c}function Af(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=OR(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:v,isOptional:T},b)=>{if(v==="*"){let F=d[b]||"";c=l.slice(0,l.length-F.length).replace(/(.)\/+$/,"$1")}const D=d[b];return T&&!D?g[v]=void 0:g[v]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:s}}function OR(s,e=!1,t=!0){ai(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function MR(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ai(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Tr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var PR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function LR(s,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof s=="string"?Da(s):s,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=E0(t.substring(1),"/"):l=E0(t,e)):l=e,{pathname:l,search:zR(i),hash:BR(a)}}function E0(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Rp(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function UR(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Og(s){let e=UR(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Mg(s,e,t,i=!1){let a;typeof s=="string"?a=Da(s):(a={...s},yt(!a.pathname||!a.pathname.includes("?"),Rp("?","pathname","search",a)),yt(!a.pathname||!a.pathname.includes("#"),Rp("#","pathname","hash",a)),yt(!a.search||!a.search.includes("#"),Rp("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}d=T>=0?e[T]:"/"}let p=LR(a,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Er=s=>s.join("/").replace(/\/\/+/g,"/"),kR=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),zR=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,BR=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,qR=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function jR(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function FR(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var pS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gS(s,e){let t=s;if(typeof t!="string"||!PR.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(pS)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Tr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{ai(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yS=["POST","PUT","PATCH","DELETE"];new Set(yS);var HR=["GET",...yS];new Set(HR);var al=j.createContext(null);al.displayName="DataRouter";var Qf=j.createContext(null);Qf.displayName="DataRouterState";var GR=j.createContext(!1),_S=j.createContext({isTransitioning:!1});_S.displayName="ViewTransition";var KR=j.createContext(new Map);KR.displayName="Fetchers";var QR=j.createContext(null);QR.displayName="Await";var Gn=j.createContext(null);Gn.displayName="Navigation";var cc=j.createContext(null);cc.displayName="Location";var bi=j.createContext({outlet:null,matches:[],isDataRoute:!1});bi.displayName="Route";var Pg=j.createContext(null);Pg.displayName="RouteError";var vS="REACT_ROUTER_ERROR",YR="REDIRECT",$R="ROUTE_ERROR_RESPONSE";function XR(s){if(s.startsWith(`${vS}:${YR}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function JR(s){if(s.startsWith(`${vS}:${$R}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new qR(e.status,e.statusText,e.data)}catch{}}function ZR(s,{relative:e}={}){yt(ol(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=j.useContext(Gn),{hash:a,pathname:l,search:c}=hc(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Er([t,l])),i.createHref({pathname:d,search:c,hash:a})}function ol(){return j.useContext(cc)!=null}function Rr(){return yt(ol(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(cc).location}var ES="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TS(s){j.useContext(Gn).static||j.useLayoutEffect(s)}function SS(){let{isDataRoute:s}=j.useContext(bi);return s?hI():WR()}function WR(){yt(ol(),"useNavigate() may be used only in the context of a <Router> component.");let s=j.useContext(al),{basename:e,navigator:t}=j.useContext(Gn),{matches:i}=j.useContext(bi),{pathname:a}=Rr(),l=JSON.stringify(Og(i)),c=j.useRef(!1);return TS(()=>{c.current=!0}),j.useCallback((p,g={})=>{if(ai(c.current,ES),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=Mg(p,JSON.parse(l),a,g.relative==="path");s==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Er([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,a,s])}j.createContext(null);function P4(){let{matches:s}=j.useContext(bi),e=s[s.length-1];return e?e.params:{}}function hc(s,{relative:e}={}){let{matches:t}=j.useContext(bi),{pathname:i}=Rr(),a=JSON.stringify(Og(t));return j.useMemo(()=>Mg(s,JSON.parse(a),i,e==="path"),[s,a,i,e])}function eI(s,e){return bS(s,e)}function bS(s,e,t,i,a){yt(ol(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=j.useContext(Gn),{matches:c}=j.useContext(bi),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",T=d&&d.route;{let te=T&&T.path||"";wS(g,!T||te.endsWith("*")||te.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${te}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${te}"> to <Route path="${te==="/"?"*":`${te}/*`}">.`)}let b=Rr(),D;if(e){let te=typeof e=="string"?Da(e):e;yt(v==="/"||te.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${te.pathname}" was given in the \`location\` prop.`),D=te}else D=b;let F=D.pathname||"/",K=F;if(v!=="/"){let te=v.replace(/^\//,"").split("/");K="/"+F.replace(/^\//,"").split("/").slice(te.length).join("/")}let z=fS(s,{pathname:K});ai(T||z!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),ai(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ne=sI(z&&z.map(te=>Object.assign({},te,{params:Object.assign({},p,te.params),pathname:Er([v,l.encodeLocation?l.encodeLocation(te.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:te.pathname]),pathnameBase:te.pathnameBase==="/"?v:Er([v,l.encodeLocation?l.encodeLocation(te.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:te.pathnameBase])})),c,t,i,a);return e&&ne?j.createElement(cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},ne):ne}function tI(){let s=cI(),e=jR(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:a},t):null,c)}var nI=j.createElement(tI,null),AS=class extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=JR(s.digest);t&&(s=t)}let e=s!==void 0?j.createElement(bi.Provider,{value:this.props.routeContext},j.createElement(Pg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?j.createElement(iI,{error:s},e):e}};AS.contextType=GR;var Ip=new WeakMap;function iI({children:s,error:e}){let{basename:t}=j.useContext(Gn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=XR(e.digest);if(i){let a=Ip.get(e);if(a)throw a;let l=gS(i.location,t);if(pS&&!Ip.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Ip.set(e,c),c}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return s}function rI({routeContext:s,match:e,children:t}){let i=j.useContext(al);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(bi.Provider,{value:s},t)}function sI(s,e=[],t=null,i=null,a=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let l=s,c=t?.errors;if(c!=null){let v=l.findIndex(T=>T.route.id&&c?.[T.route.id]!==void 0);yt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let T=l[v];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=v),T.route.id){let{loaderData:b,errors:D}=t,F=T.route.loader&&!b.hasOwnProperty(T.route.id)&&(!D||D[T.route.id]===void 0);if(T.route.lazy||F){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&i?(v,T)=>{i(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:FR(t.matches),errorInfo:T})}:void 0;return l.reduceRight((v,T,b)=>{let D,F=!1,K=null,z=null;t&&(D=c&&T.route.id?c[T.route.id]:void 0,K=T.route.errorElement||nI,d&&(p<0&&b===0?(wS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,z=null):p===b&&(F=!0,z=T.route.hydrateFallbackElement||null)));let ne=e.concat(l.slice(0,b+1)),te=()=>{let ie;return D?ie=K:F?ie=z:T.route.Component?ie=j.createElement(T.route.Component,null):T.route.element?ie=T.route.element:ie=v,j.createElement(rI,{match:T,routeContext:{outlet:v,matches:ne,isDataRoute:t!=null},children:ie})};return t&&(T.route.ErrorBoundary||T.route.errorElement||b===0)?j.createElement(AS,{location:t.location,revalidation:t.revalidation,component:K,error:D,children:te(),routeContext:{outlet:null,matches:ne,isDataRoute:!0},onError:g}):te()},null)}function Lg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aI(s){let e=j.useContext(al);return yt(e,Lg(s)),e}function oI(s){let e=j.useContext(Qf);return yt(e,Lg(s)),e}function lI(s){let e=j.useContext(bi);return yt(e,Lg(s)),e}function Ug(s){let e=lI(s),t=e.matches[e.matches.length-1];return yt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function uI(){return Ug("useRouteId")}function cI(){let s=j.useContext(Pg),e=oI("useRouteError"),t=Ug("useRouteError");return s!==void 0?s:e.errors?.[t]}function hI(){let{router:s}=aI("useNavigate"),e=Ug("useNavigate"),t=j.useRef(!1);return TS(()=>{t.current=!0}),j.useCallback(async(a,l={})=>{ai(t.current,ES),t.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var T0={};function wS(s,e,t){!e&&!T0[s]&&(T0[s]=!0,ai(!1,t))}j.memo(fI);function fI({routes:s,future:e,state:t,onError:i}){return bS(s,void 0,t,i,e)}function Qp({to:s,replace:e,state:t,relative:i}){yt(ol(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=j.useContext(Gn);ai(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=j.useContext(bi),{pathname:c}=Rr(),d=SS(),p=Mg(s,Og(l),c,i==="path"),g=JSON.stringify(p);return j.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:i})},[d,g,i,e,t]),null}function zt(s){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dI({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){yt(!ol(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=Da(t));let{pathname:g="/",search:v="",hash:T="",state:b=null,key:D="default"}=t,F=j.useMemo(()=>{let K=Tr(g,d);return K==null?null:{location:{pathname:K,search:v,hash:T,state:b,key:D},navigationType:i}},[d,g,v,T,b,D,i]);return ai(F!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${T}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:j.createElement(Gn.Provider,{value:p},j.createElement(cc.Provider,{children:e,value:F}))}function mI({children:s,location:e}){return eI(Yp(s),e)}function Yp(s,e=[]){let t=[];return j.Children.forEach(s,(i,a)=>{if(!j.isValidElement(i))return;let l=[...e,a];if(i.type===j.Fragment){t.push.apply(t,Yp(i.props.children,l));return}yt(i.type===zt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Yp(i.props.children,l)),t.push(c)}),t}var cf="get",hf="application/x-www-form-urlencoded";function Yf(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function pI(s){return Yf(s)&&s.tagName.toLowerCase()==="button"}function gI(s){return Yf(s)&&s.tagName.toLowerCase()==="form"}function yI(s){return Yf(s)&&s.tagName.toLowerCase()==="input"}function _I(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function vI(s,e){return s.button===0&&(!e||e==="_self")&&!_I(s)}var Wh=null;function EI(){if(Wh===null)try{new FormData(document.createElement("form"),0),Wh=!1}catch{Wh=!0}return Wh}var TI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cp(s){return s!=null&&!TI.has(s)?(ai(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hf}"`),null):s}function SI(s,e){let t,i,a,l,c;if(gI(s)){let d=s.getAttribute("action");i=d?Tr(d,e):null,t=s.getAttribute("method")||cf,a=Cp(s.getAttribute("enctype"))||hf,l=new FormData(s)}else if(pI(s)||yI(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||d.getAttribute("action");if(i=p?Tr(p,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||cf,a=Cp(s.getAttribute("formenctype"))||Cp(d.getAttribute("enctype"))||hf,l=new FormData(d,s),!EI()){let{name:g,type:v,value:T}=s;if(v==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,T)}}else{if(Yf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cf,i=null,a=hf,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function bI(s,e,t,i){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&Tr(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function AI(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wI(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function RI(s,e,t){let i=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await AI(l,t);return c.links?c.links():[]}return[]}));return DI(i.flat(1).filter(wI).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function S0(s,e,t,i,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let v=i.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function II(s,e,{includeHydrateFallback:t}={}){return CI(s.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function CI(s){return[...new Set(s)]}function xI(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function DI(s,e){let t=new Set;return new Set(e),s.reduce((i,a)=>{let l=JSON.stringify(xI(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function RS(){let s=j.useContext(al);return kg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function VI(){let s=j.useContext(Qf);return kg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var zg=j.createContext(void 0);zg.displayName="FrameworkContext";function IS(){let s=j.useContext(zg);return kg(s,"You must render this element inside a <HydratedRouter> element"),s}function NI(s,e){let t=j.useContext(zg),[i,a]=j.useState(!1),[l,c]=j.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:T}=e,b=j.useRef(null);j.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let K=ne=>{ne.forEach(te=>{c(te.isIntersecting)})},z=new IntersectionObserver(K,{threshold:.5});return b.current&&z.observe(b.current),()=>{z.disconnect()}}},[s]),j.useEffect(()=>{if(i){let K=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(K)}}},[i]);let D=()=>{a(!0)},F=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,b,{}]:[l,b,{onFocus:Tu(d,D),onBlur:Tu(p,F),onMouseEnter:Tu(g,D),onMouseLeave:Tu(v,F),onTouchStart:Tu(T,D)}]:[!1,b,{}]}function Tu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function OI({page:s,...e}){let{router:t}=RS(),i=j.useMemo(()=>fS(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?j.createElement(PI,{page:s,matches:i,...e}):null}function MI(s){let{manifest:e,routeModules:t}=IS(),[i,a]=j.useState([]);return j.useEffect(()=>{let l=!1;return RI(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),i}function PI({page:s,matches:e,...t}){let i=Rr(),{future:a,manifest:l,routeModules:c}=IS(),{basename:d}=RS(),{loaderData:p,matches:g}=VI(),v=j.useMemo(()=>S0(s,e,g,l,i,"data"),[s,e,g,l,i]),T=j.useMemo(()=>S0(s,e,g,l,i,"assets"),[s,e,g,l,i]),b=j.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let K=new Set,z=!1;if(e.forEach(te=>{let ie=l.routes[te.route.id];!ie||!ie.hasLoader||(!v.some(ye=>ye.route.id===te.route.id)&&te.route.id in p&&c[te.route.id]?.shouldRevalidate||ie.hasClientLoader?z=!0:K.add(te.route.id))}),K.size===0)return[];let ne=bI(s,d,a.unstable_trailingSlashAwareDataRequests,"data");return z&&K.size>0&&ne.searchParams.set("_routes",e.filter(te=>K.has(te.route.id)).map(te=>te.route.id).join(",")),[ne.pathname+ne.search]},[d,a.unstable_trailingSlashAwareDataRequests,p,i,l,v,e,s,c]),D=j.useMemo(()=>II(T,l),[T,l]),F=MI(T);return j.createElement(j.Fragment,null,b.map(K=>j.createElement("link",{key:K,rel:"prefetch",as:"fetch",href:K,...t})),D.map(K=>j.createElement("link",{key:K,rel:"modulepreload",href:K,...t})),F.map(({key:K,link:z})=>j.createElement("link",{key:K,nonce:t.nonce,...z,crossOrigin:z.crossOrigin??t.crossOrigin})))}function LI(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var UI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{UI&&(window.__reactRouterVersion="7.13.0")}catch{}function kI({basename:s,children:e,unstable_useTransitions:t,window:i}){let a=j.useRef();a.current==null&&(a.current=_R({window:i,v5Compat:!0}));let l=a.current,[c,d]=j.useState({action:l.action,location:l.location}),p=j.useCallback(g=>{t===!1?d(g):j.startTransition(()=>d(g))},[t]);return j.useLayoutEffect(()=>l.listen(p),[l,p]),j.createElement(dI,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var CS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xS=j.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:T,unstable_defaultShouldRevalidate:b,...D},F){let{basename:K,unstable_useTransitions:z}=j.useContext(Gn),ne=typeof g=="string"&&CS.test(g),te=gS(g,K);g=te.to;let ie=ZR(g,{relative:a}),[ye,de,Ee]=NI(i,D),R=qI(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:a,viewTransition:T,unstable_defaultShouldRevalidate:b,unstable_useTransitions:z});function w(M){e&&e(M),M.defaultPrevented||R(M)}let I=j.createElement("a",{...D,...Ee,href:te.absoluteURL||ie,onClick:te.isExternal||l?e:w,ref:LI(F,de),target:p,"data-discover":!ne&&t==="render"?"true":void 0});return ye&&!ne?j.createElement(j.Fragment,null,I,j.createElement(OI,{page:ie})):I});xS.displayName="Link";var DS=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},v){let T=hc(c,{relative:g.relative}),b=Rr(),D=j.useContext(Qf),{navigator:F,basename:K}=j.useContext(Gn),z=D!=null&&KI(T)&&d===!0,ne=F.encodeLocation?F.encodeLocation(T).pathname:T.pathname,te=b.pathname,ie=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||(te=te.toLowerCase(),ie=ie?ie.toLowerCase():null,ne=ne.toLowerCase()),ie&&K&&(ie=Tr(ie,K)||ie);const ye=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let de=te===ne||!a&&te.startsWith(ne)&&te.charAt(ye)==="/",Ee=ie!=null&&(ie===ne||!a&&ie.startsWith(ne)&&ie.charAt(ne.length)==="/"),R={isActive:de,isPending:Ee,isTransitioning:z},w=de?e:void 0,I;typeof i=="function"?I=i(R):I=[i,de?"active":null,Ee?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(R):l;return j.createElement(xS,{...g,"aria-current":w,className:I,ref:v,style:M,to:c,viewTransition:d},typeof p=="function"?p(R):p)});DS.displayName="NavLink";var zI=j.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=cf,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:T,unstable_defaultShouldRevalidate:b,...D},F)=>{let{unstable_useTransitions:K}=j.useContext(Gn),z=HI(),ne=GI(d,{relative:g}),te=c.toLowerCase()==="get"?"get":"post",ie=typeof d=="string"&&CS.test(d),ye=de=>{if(p&&p(de),de.defaultPrevented)return;de.preventDefault();let Ee=de.nativeEvent.submitter,R=Ee?.getAttribute("formmethod")||c,w=()=>z(Ee||de.currentTarget,{fetcherKey:e,method:R,navigate:t,replace:a,state:l,relative:g,preventScrollReset:v,viewTransition:T,unstable_defaultShouldRevalidate:b});K&&t!==!1?j.startTransition(()=>w()):w()};return j.createElement("form",{ref:F,method:te,action:ne,onSubmit:i?p:ye,...D,"data-discover":!ie&&s==="render"?"true":void 0})});zI.displayName="Form";function BI(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VS(s){let e=j.useContext(al);return yt(e,BI(s)),e}function qI(s,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=SS(),v=Rr(),T=hc(s,{relative:l});return j.useCallback(b=>{if(vI(b,e)){b.preventDefault();let D=t!==void 0?t:Ku(v)===Ku(T),F=()=>g(s,{replace:D,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?j.startTransition(()=>F()):F()}},[v,g,T,t,i,e,s,a,l,c,d,p])}var jI=0,FI=()=>`__${String(++jI)}__`;function HI(){let{router:s}=VS("useSubmit"),{basename:e}=j.useContext(Gn),t=uI(),i=s.fetch,a=s.navigate;return j.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:v,body:T}=SI(l,e);if(c.navigate===!1){let b=c.fetcherKey||FI();await i(b,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:T,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:T,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,t])}function GI(s,{relative:e}={}){let{basename:t}=j.useContext(Gn),i=j.useContext(bi);yt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...hc(s||".",{relative:e})},c=Rr();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let v=d.toString();l.search=v?`?${v}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Er([t,l.pathname])),Ku(l)}function KI(s,{relative:e}={}){let t=j.useContext(_S);yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=VS("useViewTransitionState"),a=hc(s,{relative:e});if(!t.isTransitioning)return!1;let l=Tr(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Tr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Af(a.pathname,c)!=null||Af(a.pathname,l)!=null}const QI="modulepreload",YI=function(s){return"/Sistema_ISP/"+s},b0={},Qt=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=p(t.map(g=>{if(g=YI(g),g in b0)return;b0[g]=!0;const v=g.endsWith(".css"),T=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${T}`))return;const b=document.createElement("link");if(b.rel=v?"stylesheet":QI,v||(b.as="script"),b.crossOrigin="",b.href=g,d&&b.setAttribute("nonce",d),document.head.appendChild(b),v)return new Promise((D,F)=>{b.addEventListener("load",D),b.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},A0=s=>{let e;const t=new Set,i=(g,v)=>{const T=typeof g=="function"?g(e):g;if(!Object.is(T,e)){const b=e;e=v??(typeof T!="object"||T===null)?T:Object.assign({},e,T),t.forEach(D=>D(e,b))}},a=()=>e,d={setState:i,getState:a,getInitialState:()=>p,subscribe:g=>(t.add(g),()=>t.delete(g))},p=e=s(i,a,d);return d},$I=(s=>s?A0(s):A0),XI=s=>s;function JI(s,e=XI){const t=Cu.useSyncExternalStore(s.subscribe,Cu.useCallback(()=>e(s.getState()),[s,e]),Cu.useCallback(()=>e(s.getInitialState()),[s,e]));return Cu.useDebugValue(t),t}const w0=s=>{const e=$I(s),t=i=>JI(e,i);return Object.assign(t,e),t},NS=(s=>s?w0(s):w0),ZI=()=>{};var R0={};const OS=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},WI=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const a=s[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=s[t++],c=s[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},MS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,p=a+2<s.length,g=p?s[a+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,D=g&63;p||(D=64,c||(b=64)),i.push(t[v],t[T],t[b],t[D])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(OS(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):WI(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const g=a<s.length?t[s.charAt(a)]:64;++a;const T=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new e2;const b=l<<2|d>>4;if(i.push(b),g!==64){const D=d<<4&240|g>>2;if(i.push(D),T!==64){const F=g<<6&192|T;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class e2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const t2=function(s){const e=OS(s);return MS.encodeByteArray(e,!0)},PS=function(s){return t2(s).replace(/\./g,"")},n2=function(s){try{return MS.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const i2=()=>LS().__FIREBASE_DEFAULTS__,r2=()=>{if(typeof process>"u"||typeof R0>"u")return;const s=R0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},s2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&n2(s[1]);return e&&JSON.parse(e)},$f=()=>{try{return ZI()||i2()||r2()||s2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},L4=s=>$f()?.emulatorHosts?.[s],US=()=>$f()?.config,U4=s=>$f()?.[`_${s}`];class a2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Bg(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function o2(s){return(await fetch(s,{credentials:"include"})).ok}const Pu={};function l2(){const s={prod:[],emulator:[]};for(const e of Object.keys(Pu))Pu[e]?s.emulator.push(e):s.prod.push(e);return s}function u2(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let I0=!1;function k4(s,e){if(typeof window>"u"||typeof document>"u"||!Bg(window.location.host)||Pu[s]===e||Pu[s]||I0)return;Pu[s]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=l2().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,D){b.setAttribute("width","24"),b.setAttribute("id",D),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{I0=!0,c()},b}function v(b,D){b.setAttribute("id",D),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=u2(i),D=t("text"),F=document.getElementById(D)||document.createElement("span"),K=t("learnmore"),z=document.getElementById(K)||document.createElement("a"),ne=t("preprendIcon"),te=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const ie=b.element;d(ie),v(z,K);const ye=g();p(te,ne),ie.append(te,F,z,ye),document.body.appendChild(ie)}l?(F.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Bo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bo())}function kS(){const s=$f()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q4(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function j4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F4(){const s=Bo();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function zS(){return!kS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BS(){return!kS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function qS(){try{return typeof indexedDB=="object"}catch{return!1}}function c2(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const h2="FirebaseError";class ll extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=h2,Object.setPrototypeOf(this,ll.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jS.prototype.create)}}class jS{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?f2(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new ll(a,d,i)}}function f2(s,e){return s.replace(d2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const d2=/\{\$([^}]+)}/g;function H4(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function wf(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=s[a],c=e[a];if(C0(l)&&C0(c)){if(!wf(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function C0(s){return s!==null&&typeof s=="object"}function G4(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function K4(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Q4(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function Y4(s,e){const t=new m2(s,e);return t.subscribe.bind(t)}class m2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");p2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=xp),a.error===void 0&&(a.error=xp),a.complete===void 0&&(a.complete=xp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p2(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function xp(){}function oi(s){return s&&s._delegate?s._delegate:s}class Qu{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ua="[DEFAULT]";class g2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new a2;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_2(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:y2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y2(s){return s===ua?void 0:s}function _2(s){return s.instantiationMode==="EAGER"}class v2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new g2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qe||(qe={}));const E2={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},T2=qe.INFO,S2={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},b2=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=S2[e];if(a)console[a](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class FS{constructor(e){this.name=e,this._logLevel=T2,this._logHandler=b2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const A2=(s,e)=>e.some(t=>s instanceof t);let x0,D0;function w2(){return x0||(x0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R2(){return D0||(D0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HS=new WeakMap,$p=new WeakMap,GS=new WeakMap,Dp=new WeakMap,qg=new WeakMap;function I2(s){const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(ps(s.result)),a()},c=()=>{i(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&HS.set(t,s)}).catch(()=>{}),qg.set(e,s),e}function C2(s){if($p.has(s))return;const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});$p.set(s,e)}let Xp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return $p.get(s);if(e==="objectStoreNames")return s.objectStoreNames||GS.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ps(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function x2(s){Xp=s(Xp)}function D2(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Vp(this),e,...t);return GS.set(i,e.sort?e.sort():[e]),ps(i)}:R2().includes(s)?function(...e){return s.apply(Vp(this),e),ps(HS.get(this))}:function(...e){return ps(s.apply(Vp(this),e))}}function V2(s){return typeof s=="function"?D2(s):(s instanceof IDBTransaction&&C2(s),A2(s,w2())?new Proxy(s,Xp):s)}function ps(s){if(s instanceof IDBRequest)return I2(s);if(Dp.has(s))return Dp.get(s);const e=V2(s);return e!==s&&(Dp.set(s,e),qg.set(e,s)),e}const Vp=s=>qg.get(s);function N2(s,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=ps(c);return i&&c.addEventListener("upgradeneeded",p=>{i(ps(c.result),p.oldVersion,p.newVersion,ps(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const O2=["get","getKey","getAll","getAllKeys","count"],M2=["put","add","delete","clear"],Np=new Map;function V0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Np.get(e))return Np.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=M2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||O2.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return Np.set(e,l),l}x2(s=>({...s,get:(e,t,i)=>V0(e,t)||s.get(e,t,i),has:(e,t)=>!!V0(e,t)||s.has(e,t)}));class P2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(L2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function L2(s){return s.getComponent()?.type==="VERSION"}const Jp="@firebase/app",N0="0.14.8";const Sr=new FS("@firebase/app"),U2="@firebase/app-compat",k2="@firebase/analytics-compat",z2="@firebase/analytics",B2="@firebase/app-check-compat",q2="@firebase/app-check",j2="@firebase/auth",F2="@firebase/auth-compat",H2="@firebase/database",G2="@firebase/data-connect",K2="@firebase/database-compat",Q2="@firebase/functions",Y2="@firebase/functions-compat",$2="@firebase/installations",X2="@firebase/installations-compat",J2="@firebase/messaging",Z2="@firebase/messaging-compat",W2="@firebase/performance",eC="@firebase/performance-compat",tC="@firebase/remote-config",nC="@firebase/remote-config-compat",iC="@firebase/storage",rC="@firebase/storage-compat",sC="@firebase/firestore",aC="@firebase/ai",oC="@firebase/firestore-compat",lC="firebase",uC="12.9.0";const Zp="[DEFAULT]",cC={[Jp]:"fire-core",[U2]:"fire-core-compat",[z2]:"fire-analytics",[k2]:"fire-analytics-compat",[q2]:"fire-app-check",[B2]:"fire-app-check-compat",[j2]:"fire-auth",[F2]:"fire-auth-compat",[H2]:"fire-rtdb",[G2]:"fire-data-connect",[K2]:"fire-rtdb-compat",[Q2]:"fire-fn",[Y2]:"fire-fn-compat",[$2]:"fire-iid",[X2]:"fire-iid-compat",[J2]:"fire-fcm",[Z2]:"fire-fcm-compat",[W2]:"fire-perf",[eC]:"fire-perf-compat",[tC]:"fire-rc",[nC]:"fire-rc-compat",[iC]:"fire-gcs",[rC]:"fire-gcs-compat",[sC]:"fire-fst",[oC]:"fire-fst-compat",[aC]:"fire-vertex","fire-js":"fire-js",[lC]:"fire-js-all"};const Rf=new Map,hC=new Map,Wp=new Map;function O0(s,e){try{s.container.addComponent(e)}catch(t){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function If(s){const e=s.name;if(Wp.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;Wp.set(e,s);for(const t of Rf.values())O0(t,s);for(const t of hC.values())O0(t,s);return!0}function fC(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function dC(s){return s==null?!1:s.settings!==void 0}const mC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new jS("app","Firebase",mC);class pC{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Qu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}const gC=uC;function KS(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:Zp,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw gs.create("bad-app-name",{appName:String(a)});if(t||(t=US()),!t)throw gs.create("no-options");const l=Rf.get(a);if(l){if(wf(t,l.options)&&wf(i,l.config))return l;throw gs.create("duplicate-app",{appName:a})}const c=new v2(a);for(const p of Wp.values())c.addComponent(p);const d=new pC(t,i,c);return Rf.set(a,d),d}function $4(s=Zp){const e=Rf.get(s);if(!e&&s===Zp&&US())return KS();if(!e)throw gs.create("no-app",{appName:s});return e}function Uo(s,e,t){let i=cC[s]??s;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(c.join(" "));return}If(new Qu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const yC="firebase-heartbeat-database",_C=1,Yu="firebase-heartbeat-store";let Op=null;function QS(){return Op||(Op=N2(yC,_C,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Yu)}catch(t){console.warn(t)}}}}).catch(s=>{throw gs.create("idb-open",{originalErrorMessage:s.message})})),Op}async function vC(s){try{const t=(await QS()).transaction(Yu),i=await t.objectStore(Yu).get(YS(s));return await t.done,i}catch(e){if(e instanceof ll)Sr.warn(e.message);else{const t=gs.create("idb-get",{originalErrorMessage:e?.message});Sr.warn(t.message)}}}async function M0(s,e){try{const i=(await QS()).transaction(Yu,"readwrite");await i.objectStore(Yu).put(e,YS(s)),await i.done}catch(t){if(t instanceof ll)Sr.warn(t.message);else{const i=gs.create("idb-set",{originalErrorMessage:t?.message});Sr.warn(i.message)}}}function YS(s){return`${s.name}!${s.options.appId}`}const EC=1024,TC=30;class SC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=P0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>TC){const a=wC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Sr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=P0(),{heartbeatsToSend:t,unsentEntries:i}=bC(this._heartbeatsCache.heartbeats),a=PS(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Sr.warn(e),""}}}function P0(){return new Date().toISOString().substring(0,10)}function bC(s,e=EC){const t=[];let i=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),L0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),L0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class AC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qS()?c2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return M0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return M0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function L0(s){return PS(JSON.stringify({version:2,heartbeats:s})).length}function wC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function RC(s){If(new Qu("platform-logger",e=>new P2(e),"PRIVATE")),If(new Qu("heartbeat",e=>new SC(e),"PRIVATE")),Uo(Jp,N0,s),Uo(Jp,N0,"esm2020"),Uo("fire-js","")}RC("");var IC="firebase",CC="12.9.0";Uo(IC,CC,"app");var U0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ys,$S;(function(){var s;function e(R,w){function I(){}I.prototype=w.prototype,R.F=w.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(M,N,L){for(var C=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)C[ht-2]=arguments[ht];return w.prototype[N].apply(M,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,w,I){I||(I=0);const M=Array(16);if(typeof w=="string")for(var N=0;N<16;++N)M[N]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(N=0;N<16;++N)M[N]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=R.g[0],I=R.g[1],N=R.g[2];let L=R.g[3],C;C=w+(L^I&(N^L))+M[0]+3614090360&4294967295,w=I+(C<<7&4294967295|C>>>25),C=L+(N^w&(I^N))+M[1]+3905402710&4294967295,L=w+(C<<12&4294967295|C>>>20),C=N+(I^L&(w^I))+M[2]+606105819&4294967295,N=L+(C<<17&4294967295|C>>>15),C=I+(w^N&(L^w))+M[3]+3250441966&4294967295,I=N+(C<<22&4294967295|C>>>10),C=w+(L^I&(N^L))+M[4]+4118548399&4294967295,w=I+(C<<7&4294967295|C>>>25),C=L+(N^w&(I^N))+M[5]+1200080426&4294967295,L=w+(C<<12&4294967295|C>>>20),C=N+(I^L&(w^I))+M[6]+2821735955&4294967295,N=L+(C<<17&4294967295|C>>>15),C=I+(w^N&(L^w))+M[7]+4249261313&4294967295,I=N+(C<<22&4294967295|C>>>10),C=w+(L^I&(N^L))+M[8]+1770035416&4294967295,w=I+(C<<7&4294967295|C>>>25),C=L+(N^w&(I^N))+M[9]+2336552879&4294967295,L=w+(C<<12&4294967295|C>>>20),C=N+(I^L&(w^I))+M[10]+4294925233&4294967295,N=L+(C<<17&4294967295|C>>>15),C=I+(w^N&(L^w))+M[11]+2304563134&4294967295,I=N+(C<<22&4294967295|C>>>10),C=w+(L^I&(N^L))+M[12]+1804603682&4294967295,w=I+(C<<7&4294967295|C>>>25),C=L+(N^w&(I^N))+M[13]+4254626195&4294967295,L=w+(C<<12&4294967295|C>>>20),C=N+(I^L&(w^I))+M[14]+2792965006&4294967295,N=L+(C<<17&4294967295|C>>>15),C=I+(w^N&(L^w))+M[15]+1236535329&4294967295,I=N+(C<<22&4294967295|C>>>10),C=w+(N^L&(I^N))+M[1]+4129170786&4294967295,w=I+(C<<5&4294967295|C>>>27),C=L+(I^N&(w^I))+M[6]+3225465664&4294967295,L=w+(C<<9&4294967295|C>>>23),C=N+(w^I&(L^w))+M[11]+643717713&4294967295,N=L+(C<<14&4294967295|C>>>18),C=I+(L^w&(N^L))+M[0]+3921069994&4294967295,I=N+(C<<20&4294967295|C>>>12),C=w+(N^L&(I^N))+M[5]+3593408605&4294967295,w=I+(C<<5&4294967295|C>>>27),C=L+(I^N&(w^I))+M[10]+38016083&4294967295,L=w+(C<<9&4294967295|C>>>23),C=N+(w^I&(L^w))+M[15]+3634488961&4294967295,N=L+(C<<14&4294967295|C>>>18),C=I+(L^w&(N^L))+M[4]+3889429448&4294967295,I=N+(C<<20&4294967295|C>>>12),C=w+(N^L&(I^N))+M[9]+568446438&4294967295,w=I+(C<<5&4294967295|C>>>27),C=L+(I^N&(w^I))+M[14]+3275163606&4294967295,L=w+(C<<9&4294967295|C>>>23),C=N+(w^I&(L^w))+M[3]+4107603335&4294967295,N=L+(C<<14&4294967295|C>>>18),C=I+(L^w&(N^L))+M[8]+1163531501&4294967295,I=N+(C<<20&4294967295|C>>>12),C=w+(N^L&(I^N))+M[13]+2850285829&4294967295,w=I+(C<<5&4294967295|C>>>27),C=L+(I^N&(w^I))+M[2]+4243563512&4294967295,L=w+(C<<9&4294967295|C>>>23),C=N+(w^I&(L^w))+M[7]+1735328473&4294967295,N=L+(C<<14&4294967295|C>>>18),C=I+(L^w&(N^L))+M[12]+2368359562&4294967295,I=N+(C<<20&4294967295|C>>>12),C=w+(I^N^L)+M[5]+4294588738&4294967295,w=I+(C<<4&4294967295|C>>>28),C=L+(w^I^N)+M[8]+2272392833&4294967295,L=w+(C<<11&4294967295|C>>>21),C=N+(L^w^I)+M[11]+1839030562&4294967295,N=L+(C<<16&4294967295|C>>>16),C=I+(N^L^w)+M[14]+4259657740&4294967295,I=N+(C<<23&4294967295|C>>>9),C=w+(I^N^L)+M[1]+2763975236&4294967295,w=I+(C<<4&4294967295|C>>>28),C=L+(w^I^N)+M[4]+1272893353&4294967295,L=w+(C<<11&4294967295|C>>>21),C=N+(L^w^I)+M[7]+4139469664&4294967295,N=L+(C<<16&4294967295|C>>>16),C=I+(N^L^w)+M[10]+3200236656&4294967295,I=N+(C<<23&4294967295|C>>>9),C=w+(I^N^L)+M[13]+681279174&4294967295,w=I+(C<<4&4294967295|C>>>28),C=L+(w^I^N)+M[0]+3936430074&4294967295,L=w+(C<<11&4294967295|C>>>21),C=N+(L^w^I)+M[3]+3572445317&4294967295,N=L+(C<<16&4294967295|C>>>16),C=I+(N^L^w)+M[6]+76029189&4294967295,I=N+(C<<23&4294967295|C>>>9),C=w+(I^N^L)+M[9]+3654602809&4294967295,w=I+(C<<4&4294967295|C>>>28),C=L+(w^I^N)+M[12]+3873151461&4294967295,L=w+(C<<11&4294967295|C>>>21),C=N+(L^w^I)+M[15]+530742520&4294967295,N=L+(C<<16&4294967295|C>>>16),C=I+(N^L^w)+M[2]+3299628645&4294967295,I=N+(C<<23&4294967295|C>>>9),C=w+(N^(I|~L))+M[0]+4096336452&4294967295,w=I+(C<<6&4294967295|C>>>26),C=L+(I^(w|~N))+M[7]+1126891415&4294967295,L=w+(C<<10&4294967295|C>>>22),C=N+(w^(L|~I))+M[14]+2878612391&4294967295,N=L+(C<<15&4294967295|C>>>17),C=I+(L^(N|~w))+M[5]+4237533241&4294967295,I=N+(C<<21&4294967295|C>>>11),C=w+(N^(I|~L))+M[12]+1700485571&4294967295,w=I+(C<<6&4294967295|C>>>26),C=L+(I^(w|~N))+M[3]+2399980690&4294967295,L=w+(C<<10&4294967295|C>>>22),C=N+(w^(L|~I))+M[10]+4293915773&4294967295,N=L+(C<<15&4294967295|C>>>17),C=I+(L^(N|~w))+M[1]+2240044497&4294967295,I=N+(C<<21&4294967295|C>>>11),C=w+(N^(I|~L))+M[8]+1873313359&4294967295,w=I+(C<<6&4294967295|C>>>26),C=L+(I^(w|~N))+M[15]+4264355552&4294967295,L=w+(C<<10&4294967295|C>>>22),C=N+(w^(L|~I))+M[6]+2734768916&4294967295,N=L+(C<<15&4294967295|C>>>17),C=I+(L^(N|~w))+M[13]+1309151649&4294967295,I=N+(C<<21&4294967295|C>>>11),C=w+(N^(I|~L))+M[4]+4149444226&4294967295,w=I+(C<<6&4294967295|C>>>26),C=L+(I^(w|~N))+M[11]+3174756917&4294967295,L=w+(C<<10&4294967295|C>>>22),C=N+(w^(L|~I))+M[2]+718787259&4294967295,N=L+(C<<15&4294967295|C>>>17),C=I+(L^(N|~w))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+N&4294967295,R.g[3]=R.g[3]+L&4294967295}i.prototype.v=function(R,w){w===void 0&&(w=R.length);const I=w-this.blockSize,M=this.C;let N=this.h,L=0;for(;L<w;){if(N==0)for(;L<=I;)a(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<w;)if(M[N++]=R.charCodeAt(L++),N==this.blockSize){a(this,M),N=0;break}}else for(;L<w;)if(M[N++]=R[L++],N==this.blockSize){a(this,M),N=0;break}}this.h=N,this.o+=w},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,I=0;I<4;++I)for(let M=0;M<32;M+=8)R[w++]=this.g[I]>>>M&255;return R};function l(R,w){var I=d;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=w(R)}function c(R,w){this.h=w;const I=[];let M=!0;for(let N=R.length-1;N>=0;N--){const L=R[N]|0;M&&L==w||(I[N]=L,M=!1)}this.g=I}var d={};function p(R){return-128<=R&&R<128?l(R,function(w){return new c([w|0],w<0?-1:0)}):new c([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return z(g(-R));const w=[];let I=1;for(let M=0;R>=I;M++)w[M]=R/I|0,I*=4294967296;return new c(w,0)}function v(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return z(v(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(w,8));let M=T;for(let L=0;L<R.length;L+=8){var N=Math.min(8,R.length-L);const C=parseInt(R.substring(L,L+N),w);N<8?(N=g(Math.pow(w,N)),M=M.j(N).add(g(C))):(M=M.j(I),M=M.add(g(C)))}return M}var T=p(0),b=p(1),D=p(16777216);s=c.prototype,s.m=function(){if(K(this))return-z(this).m();let R=0,w=1;for(let I=0;I<this.g.length;I++){const M=this.i(I);R+=(M>=0?M:4294967296+M)*w,w*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(F(this))return"0";if(K(this))return"-"+z(this).toString(R);const w=g(Math.pow(R,6));var I=this;let M="";for(;;){const N=ye(I,w).g;I=ne(I,N.j(w));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=N,F(I))return L+M;for(;L.length<6;)L="0"+L;M=L+M}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function F(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function K(R){return R.h==-1}s.l=function(R){return R=ne(this,R),K(R)?-1:F(R)?0:1};function z(R){const w=R.g.length,I=[];for(let M=0;M<w;M++)I[M]=~R.g[M];return new c(I,~R.h).add(b)}s.abs=function(){return K(this)?z(this):this},s.add=function(R){const w=Math.max(this.g.length,R.g.length),I=[];let M=0;for(let N=0;N<=w;N++){let L=M+(this.i(N)&65535)+(R.i(N)&65535),C=(L>>>16)+(this.i(N)>>>16)+(R.i(N)>>>16);M=C>>>16,L&=65535,C&=65535,I[N]=C<<16|L}return new c(I,I[I.length-1]&-2147483648?-1:0)};function ne(R,w){return R.add(z(w))}s.j=function(R){if(F(this)||F(R))return T;if(K(this))return K(R)?z(this).j(z(R)):z(z(this).j(R));if(K(R))return z(this.j(z(R)));if(this.l(D)<0&&R.l(D)<0)return g(this.m()*R.m());const w=this.g.length+R.g.length,I=[];for(var M=0;M<2*w;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(let N=0;N<R.g.length;N++){const L=this.i(M)>>>16,C=this.i(M)&65535,ht=R.i(N)>>>16,Ft=R.i(N)&65535;I[2*M+2*N]+=C*Ft,te(I,2*M+2*N),I[2*M+2*N+1]+=L*Ft,te(I,2*M+2*N+1),I[2*M+2*N+1]+=C*ht,te(I,2*M+2*N+1),I[2*M+2*N+2]+=L*ht,te(I,2*M+2*N+2)}for(R=0;R<w;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=w;R<2*w;R++)I[R]=0;return new c(I,0)};function te(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function ie(R,w){this.g=R,this.h=w}function ye(R,w){if(F(w))throw Error("division by zero");if(F(R))return new ie(T,T);if(K(R))return w=ye(z(R),w),new ie(z(w.g),z(w.h));if(K(w))return w=ye(R,z(w)),new ie(z(w.g),w.h);if(R.g.length>30){if(K(R)||K(w))throw Error("slowDivide_ only works with positive integers.");for(var I=b,M=w;M.l(R)<=0;)I=de(I),M=de(M);var N=Ee(I,1),L=Ee(M,1);for(M=Ee(M,2),I=Ee(I,2);!F(M);){var C=L.add(M);C.l(R)<=0&&(N=N.add(I),L=C),M=Ee(M,1),I=Ee(I,1)}return w=ne(R,N.j(w)),new ie(N,w)}for(N=T;R.l(w)>=0;){for(I=Math.max(1,Math.floor(R.m()/w.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),L=g(I),C=L.j(w);K(C)||C.l(R)>0;)I-=M,L=g(I),C=L.j(w);F(L)&&(L=b),N=N.add(L),R=ne(R,C)}return new ie(N,R)}s.B=function(R){return ye(this,R).h},s.and=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)&R.i(M);return new c(I,this.h&R.h)},s.or=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)|R.i(M);return new c(I,this.h|R.h)},s.xor=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)^R.i(M);return new c(I,this.h^R.h)};function de(R){const w=R.g.length+1,I=[];for(let M=0;M<w;M++)I[M]=R.i(M)<<1|R.i(M-1)>>>31;return new c(I,R.h)}function Ee(R,w){const I=w>>5;w%=32;const M=R.g.length-I,N=[];for(let L=0;L<M;L++)N[L]=w>0?R.i(L+I)>>>w|R.i(L+I+1)<<32-w:R.i(L+I);return new c(N,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,$S=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,ys=c}).apply(typeof U0<"u"?U0:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var XS,xu,JS,ff,eg,ZS,WS,eb;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var k=h[A];if(!(k in E))break e;E=E[k]}h=h[h.length-1],A=E[h],y=y(A),y!=A&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&E.push([A,y[A]]);return E}});var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=p,g.apply(null,arguments)}function v(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,k,Q){for(var oe=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)oe[Ce-2]=arguments[Ce];return y.prototype[k].apply(A,oe)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function D(h){const y=h.length;if(y>0){const E=Array(y);for(let A=0;A<y;A++)E[A]=h[A];return E}return[]}function F(h,y){for(let A=1;A<arguments.length;A++){const k=arguments[A];var E=typeof k;if(E=E!="object"?E:k?Array.isArray(k)?"array":E:"null",E=="array"||E=="object"&&typeof k.length=="number"){E=h.length||0;const Q=k.length||0;h.length=E+Q;for(let oe=0;oe<Q;oe++)h[E+oe]=k[oe]}else h.push(k)}}class K{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(h){c.setTimeout(()=>{throw h},0)}function ne(){var h=R;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class te{constructor(){this.h=this.g=null}add(y,E){const A=ie.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var ie=new K(()=>new ye,h=>h.reset());class ye{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Ee=!1,R=new te,w=()=>{const h=Promise.resolve(void 0);de=()=>{h.then(I)}};function I(){for(var h;h=ne();){try{h.h.call(h.g)}catch(E){z(E)}var y=ie;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Ee=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function ht(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(ht,N),ht.prototype.init=function(h,y){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ht.Z.h.call(this)},ht.prototype.h=function(){ht.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ft="closure_listenable_"+(Math.random()*1e6|0),J=0;function ue(h,y,E,A,k){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=k,this.key=++J,this.da=this.fa=!1}function be(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function je(h,y,E){for(const A in h)y.call(E,h[A],A,h)}function $e(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function O(h){const y={};for(const E in h)y[E]=h[E];return y}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,y){let E,A;for(let k=1;k<arguments.length;k++){A=arguments[k];for(E in A)h[E]=A[E];for(let Q=0;Q<ee.length;Q++)E=ee[Q],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function fe(h){this.src=h,this.g={},this.h=0}fe.prototype.add=function(h,y,E,A,k){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const oe=De(h,y,A,k);return oe>-1?(y=h[oe],E||(y.fa=!1)):(y=new ue(y,this.src,Q,!!A,k),y.fa=E,h.push(y)),y};function we(h,y){const E=y.type;if(E in h.g){var A=h.g[E],k=Array.prototype.indexOf.call(A,y,void 0),Q;(Q=k>=0)&&Array.prototype.splice.call(A,k,1),Q&&(be(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function De(h,y,E,A){for(let k=0;k<h.length;++k){const Q=h[k];if(!Q.da&&Q.listener==y&&Q.capture==!!E&&Q.ha==A)return k}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Ht={};function ft(h,y,E,A,k){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)ft(h,y[Q],E,A,k);return null}return E=yl(E),h&&h[Ft]?h.J(y,E,d(A)?!!A.capture:!1,k):Vs(h,y,E,!1,A,k)}function Vs(h,y,E,A,k,Q){if(!y)throw Error("Invalid event type");const oe=d(k)?!!k.capture:!!k;let Ce=Ns(h);if(Ce||(h[ze]=Ce=new fe(h)),E=Ce.add(y,E,A,oe,Q),E.proxy)return E;if(A=Ma(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)L||(k=oe),k===void 0&&(k=!1),h.addEventListener(y.toString(),A,k);else if(h.attachEvent)h.attachEvent(Ai(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ma(){function h(E){return y.call(h.src,h.listener,E)}const y=pl;return h}function Pa(h,y,E,A,k){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Pa(h,y[Q],E,A,k);else A=d(A)?!!A.capture:!!A,E=yl(E),h&&h[Ft]?(h=h.i,Q=String(y).toString(),Q in h.g&&(y=h.g[Q],E=De(y,E,A,k),E>-1&&(be(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[Q],h.h--)))):h&&(h=Ns(h))&&(y=h.g[y.toString()],h=-1,y&&(h=De(y,E,A,k)),(E=h>-1?y[h]:null)&&La(E))}function La(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ft])we(y.i,h);else{var E=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(E,A,h.capture):y.detachEvent?y.detachEvent(Ai(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=Ns(y))?(we(E,h),E.h==0&&(E.src=null,y[ze]=null)):be(h)}}}function Ai(h){return h in Ht?Ht[h]:Ht[h]="on"+h}function pl(h,y){if(h.da)h=!0;else{y=new ht(y,this);const E=h.listener,A=h.ha||h.src;h.fa&&La(h),h=E.call(A,y)}return h}function Ns(h){return h=h[ze],h instanceof fe?h:null}var gl="__closure_events_fn_"+(Math.random()*1e9>>>0);function yl(h){return typeof h=="function"?h:(h[gl]||(h[gl]=function(y){return h.handleEvent(y)}),h[gl])}function Dt(){M.call(this),this.i=new fe(this),this.M=this,this.G=null}T(Dt,M),Dt.prototype[Ft]=!0,Dt.prototype.removeEventListener=function(h,y,E,A){Pa(this,h,y,E,A)};function Gt(h,y){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var k=y;y=new N(A,h),ce(y,k)}k=!0;let Q,oe;if(E)for(oe=E.length-1;oe>=0;oe--)Q=y.g=E[oe],k=xr(Q,A,!0,y)&&k;if(Q=y.g=h,k=xr(Q,A,!0,y)&&k,k=xr(Q,A,!1,y)&&k,E)for(oe=0;oe<E.length;oe++)Q=y.g=E[oe],k=xr(Q,A,!1,y)&&k}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let A=0;A<E.length;A++)be(E[A]);delete h.g[y],h.h--}}this.G=null},Dt.prototype.J=function(h,y,E,A){return this.i.add(String(h),y,!1,E,A)},Dt.prototype.K=function(h,y,E,A){return this.i.add(String(h),y,!0,E,A)};function xr(h,y,E,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let k=!0;for(let Q=0;Q<y.length;++Q){const oe=y[Q];if(oe&&!oe.da&&oe.capture==E){const Ce=oe.listener,wt=oe.ha||oe.src;oe.fa&&we(h.i,oe),k=Ce.call(wt,A)!==!1&&k}}return k&&!A.defaultPrevented}function Sd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Ac(h){h.g=Sd(()=>{h.g=null,h.i&&(h.i=!1,Ac(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class gn extends M{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ac(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(h){M.call(this),this.h=h,this.g={}}T(Os,M);var _l=[];function vl(h){je(h.g,function(y,E){this.g.hasOwnProperty(E)&&La(y)},h),h.g={}}Os.prototype.N=function(){Os.Z.N.call(this),vl(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dr=c.JSON.stringify,bd=c.JSON.parse,wc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Rc(){}function Ic(){}var li={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function en(){N.call(this,"d")}T(en,N);function Kn(){N.call(this,"c")}T(Kn,N);var At={},Cc=null;function Ua(){return Cc=Cc||new Dt}At.Ia="serverreachability";function xc(h){N.call(this,At.Ia,h)}T(xc,N);function wi(h){const y=Ua();Gt(y,new xc(y))}At.STAT_EVENT="statevent";function Ms(h,y){N.call(this,At.STAT_EVENT,h),this.stat=y}T(Ms,N);function Vt(h){const y=Ua();Gt(y,new Ms(y,h))}At.Ja="timingevent";function Ri(h,y){N.call(this,At.Ja,h),this.size=y}T(Ri,N);function Ii(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ui(){this.g=!0}ui.prototype.ua=function(){this.g=!1};function Ad(h,y,E,A,k,Q){h.info(function(){if(h.g)if(Q){var oe="",Ce=Q.split("&");for(let Ge=0;Ge<Ce.length;Ge++){var wt=Ce[Ge].split("=");if(wt.length>1){const dt=wt[0];wt=wt[1];const Xn=dt.split("_");oe=Xn.length>=2&&Xn[1]=="type"?oe+(dt+"="+wt+"&"):oe+(dt+"=redacted&")}}}else oe=null;else oe=Q;return"XMLHTTP REQ ("+A+") [attempt "+k+"]: "+y+`
`+E+`
`+oe})}function Dc(h,y,E,A,k,Q,oe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+k+"]: "+y+`
`+E+`
`+Q+" "+oe})}function Ci(h,y,E,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+wd(h,E)+(A?" "+A:"")})}function Ps(h,y){h.info(function(){return"TIMEOUT: "+y})}ui.prototype.info=function(){};function wd(h,y){if(!h.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var E=Q[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var k=A[0];if(k!="noop"&&k!="stop"&&k!="close")for(let oe=1;oe<A.length;oe++)A[oe]=""}}}}return Dr(Q)}catch{return y}}var Ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},El={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tl;function Us(){}T(Us,Rc),Us.prototype.g=function(){return new XMLHttpRequest},Tl=new Us;function er(h){return encodeURIComponent(String(h))}function Vc(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function ci(h,y,E,A){this.j=h,this.i=y,this.l=E,this.S=A||1,this.V=new Os(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hi}function hi(){this.i=null,this.g="",this.h=!1}var Nt={},$t={};function xi(h,y,E){h.M=1,h.A=ks(Mt(y)),h.u=E,h.R=!0,ka(h,null)}function ka(h,y){h.F=Date.now(),Di(h),h.B=Mt(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),ja(E.i,"t",A),h.C=0,E=h.j.L,h.h=new hi,h.g=Kc(h.j,E?y:null,!h.u),h.P>0&&(h.O=new gn(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,A=h.ba;var k="readystatechange";Array.isArray(k)||(k&&(_l[0]=k.toString()),k=_l);for(let Q=0;Q<k.length;Q++){const oe=ft(E,k[Q],A||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),wi(),Ad(h.i,h.v,h.B,h.l,h.S,h.u)}ci.prototype.ba=function(h){h=h.target;const y=this.O;y&&mi(h)==3?y.j():this.Y(h)},ci.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=mi(this.g),wt=this.g.ya(),Ge=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||Ce!=4||wt==7||(wt==8||Ge<=0?wi(3):wi(2)),Vi(this);var y=this.g.ca();this.X=y;var E=Rd(this);if(this.o=y==200,Dc(this.i,this.v,this.B,this.l,this.S,Ce,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,k=this.g;if((A=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var Q=A;break t}}Q=null}if(h=Q)Ci(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ni(this,h);else{this.o=!1,this.m=3,Vt(12),Dn(this),Qn(this);break e}}if(this.R){h=!0;let dt;for(;!this.K&&this.C<E.length;)if(dt=Oc(this,E),dt==$t){Ce==4&&(this.m=4,Vt(14),h=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==Nt){this.m=4,Vt(15),Ci(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Ci(this.i,this.l,dt,null),Ni(this,dt);if(Nc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||E.length!=0||this.h.h||(this.m=1,Vt(16),h=!1),this.o=this.o&&h,!h)Ci(this.i,this.l,E,"[Invalid Chunked Response]"),Dn(this),Qn(this);else if(E.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Ll(oe),oe.P=!0,Vt(11))}}else Ci(this.i,this.l,E,null),Ni(this,E);Ce==4&&Dn(this),this.o&&!this.K&&(Ce==4?jc(this.j,this):(this.o=!1,Di(this)))}else nr(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Dn(this),Qn(this)}}}catch{}};function Rd(h){if(!Nc(h))return h.g.la();const y=tn(h.g);if(y==="")return"";let E="";const A=y.length,k=mi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Dn(h),Qn(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<A;Q++)h.h.h=!0,E+=h.h.i.decode(y[Q],{stream:!(k&&Q==A-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Nc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Oc(h,y){var E=h.C,A=y.indexOf(`
`,E);return A==-1?$t:(E=Number(y.substring(E,A)),isNaN(E)?Nt:(A+=1,A+E>y.length?$t:(y=y.slice(A,A+E),h.C=A+E,y)))}ci.prototype.cancel=function(){this.K=!0,Dn(this)};function Di(h){h.T=Date.now()+h.H,za(h,h.H)}function za(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ii(g(h.aa,h),y)}function Vi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ci.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ps(this.i,this.B),this.M!=2&&(wi(),Vt(17)),Dn(this),this.m=2,Qn(this)):za(this,this.T-h)};function Qn(h){h.j.I==0||h.K||jc(h.j,h)}function Dn(h){Vi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,vl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ni(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||Mi(E.h,h))){if(!h.L&&Mi(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var k=A;if(k[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Qa(E),kr(E);else break e;Gs(E),Vt(18)}}else E.xa=k[1],0<E.xa-E.K&&k[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ii(g(E.Va,E),6e3));Oi(E.h)<=1&&E.ta&&(E.ta=void 0)}else Bi(E,11)}else if((h.L||E.g==h)&&Qa(E),!C(y))for(k=E.Ba.g.parse(y),y=0;y<k.length;y++){let Ge=k[y];const dt=Ge[0];if(!(dt<=E.K))if(E.K=dt,Ge=Ge[1],E.I==2)if(Ge[0]=="c"){E.M=Ge[1],E.ba=Ge[2];const Xn=Ge[3];Xn!=null&&(E.ka=Xn,E.j.info("VER="+E.ka));const qi=Ge[4];qi!=null&&(E.za=qi,E.j.info("SVER="+E.za));const pi=Ge[5];pi!=null&&typeof pi=="number"&&pi>0&&(A=1.5*pi,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const gi=h.g;if(gi){const Ks=gi.g?gi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var Q=A.h;Q.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Al(Q,Q.h),Q.h=null))}if(A.G){const Ya=gi.g?gi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ya&&(A.wa=Ya,Xe(A.J,A.G,Ya))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var oe=h;if(A.na=Gc(A,A.L?A.ba:null,A.W),oe.L){wl(A.h,oe);var Ce=oe,wt=A.O;wt&&(Ce.H=wt),Ce.D&&(Vi(Ce),Di(Ce)),A.g=oe}else Bc(A);E.i.length>0&&zi(E)}else Ge[0]!="stop"&&Ge[0]!="close"||Bi(E,7);else E.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Bi(E,7):Ml(E):Ge[0]!="noop"&&E.l&&E.l.qa(Ge),E.A=0)}}wi(4)}catch{}}var Ot=class{constructor(h,y){this.g=h,this.map=y}};function Sl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Oi(h){return h.h?1:h.g?h.g.size:0}function Mi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Al(h,y){h.g?h.g.add(y):h.h=y}function wl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Sl.prototype.cancel=function(){if(this.i=Rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Rl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return D(h.i)}var Mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let k,Q=null;A>=0?(k=h[E].substring(0,A),Q=h[E].substring(A+1)):k=h[E],y(k,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Vn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Vn?(this.l=h.l,Xt(this,h.j),this.o=h.o,this.g=h.g,Vr(this,h.u),this.h=h.h,Il(this,kc(h.i)),this.m=h.m):h&&(y=String(h).match(Mc))?(this.l=!1,Xt(this,y[1]||"",!0),this.o=Pi(y[2]||""),this.g=Pi(y[3]||"",!0),Vr(this,y[4]),this.h=Pi(y[5]||"",!0),Il(this,y[6]||"",!0),this.m=Pi(y[7]||"")):(this.l=!1,this.i=new Or(null,this.l))}Vn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(zs(y,qa,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(zs(y,qa,!0),"@"),h.push(er(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(zs(E,E.charAt(0)=="/"?Cl:Pc,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",zs(E,Lc)),h.join("")},Vn.prototype.resolve=function(h){const y=Mt(this);let E=!!h.j;E?Xt(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var A=h.h;if(E)Vr(y,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var k=y.h.lastIndexOf("/");k!=-1&&(A=y.h.slice(0,k+1)+A)}if(k=A,k==".."||k==".")A="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){A=k.lastIndexOf("/",0)==0,k=k.split("/");const Q=[];for(let oe=0;oe<k.length;){const Ce=k[oe++];Ce=="."?A&&oe==k.length&&Q.push(""):Ce==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),A&&oe==k.length&&Q.push("")):(Q.push(Ce),A=!0)}A=Q.join("/")}else A=k}return E?y.h=A:E=h.i.toString()!=="",E?Il(y,kc(h.i)):E=!!h.m,E&&(y.m=h.m),y};function Mt(h){return new Vn(h)}function Xt(h,y,E){h.j=E?Pi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Vr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Il(h,y,E){y instanceof Or?(h.i=y,Fa(h.i,h.l)):(E||(y=zs(y,Nr)),h.i=new Or(y,h.l))}function Xe(h,y,E){h.i.set(y,E)}function ks(h){return Xe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Pi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function zs(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,En),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function En(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var qa=/[#\/\?@]/g,Pc=/[#\?:]/g,Cl=/[#\?]/g,Nr=/[#\?@]/g,Lc=/#/g;function Or(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Tn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ba(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}s=Or.prototype,s.add=function(h,y){Tn(this),this.i=null,h=Mr(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function Uc(h,y){Tn(h),y=Mr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function xl(h,y){return Tn(h),y=Mr(h,y),h.g.has(y)}s.forEach=function(h,y){Tn(this),this.g.forEach(function(E,A){E.forEach(function(k){h.call(y,k,A,this)},this)},this)};function Dl(h,y){Tn(h);let E=[];if(typeof y=="string")xl(h,y)&&(E=E.concat(h.g.get(Mr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}s.set=function(h,y){return Tn(this),this.i=null,h=Mr(this,h),xl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Dl(this,h),h.length>0?String(h[0]):y):y};function ja(h,y,E){Uc(h,y),E.length>0&&(h.i=null,h.g.set(Mr(h,y),D(E)),h.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var E=y[A];const k=er(E);E=Dl(this,E);for(let Q=0;Q<E.length;Q++){let oe=k;E[Q]!==""&&(oe+="="+er(E[Q])),h.push(oe)}}return this.i=h.join("&")};function kc(h){const y=new Or;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Mr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Fa(h,y){y&&!h.j&&(Tn(h),h.i=null,h.g.forEach(function(E,A){const k=A.toLowerCase();A!=k&&(Uc(this,A),ja(this,k,E))},h)),h.j=y}function fi(h,y){const E=new ui;if(c.Image){const A=new Image;A.onload=v(Yn,E,"TestLoadImage: loaded",!0,y,A),A.onerror=v(Yn,E,"TestLoadImage: error",!1,y,A),A.onabort=v(Yn,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=v(Yn,E,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function Vl(h,y){const E=new ui,A=new AbortController,k=setTimeout(()=>{A.abort(),Yn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(Q=>{clearTimeout(k),Q.ok?Yn(E,"TestPingServer: ok",!0,y):Yn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(k),Yn(E,"TestPingServer: error",!1,y)})}function Yn(h,y,E,A,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),A(E)}catch{}}function Pr(){this.g=new wc}function Li(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Li,Rc),Li.prototype.g=function(){return new Bs(this.i,this.h)};function Bs(h,y){Dt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Bs,Dt),s=Bs.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,di(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ha(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ha(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Lr(this):di(this),this.readyState==3&&Ha(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Lr(this))},s.Na=function(h){this.g&&(this.response=h,Lr(this))},s.ga=function(){this.g&&Lr(this)};function Lr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,di(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function di(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function $n(h){let y="";return je(h,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function qs(h,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=$n(E),typeof h=="string"?E!=null&&er(E):Xe(h,y,E))}function nt(h){Dt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,Dt);var Ui=/^https?$/i,Nl=["POST","PUT"];s=nt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tl.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){js(this,Q);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var k in A)E.set(k,A[k]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())E.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),k=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Nl,y,void 0)>=0)||A||k||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,oe]of E)this.g.setRequestHeader(Q,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){js(this,Q)}};function js(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ol(h),tr(h)}function Ol(h){h.A||(h.A=!0,Gt(h,"complete"),Gt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Gt(this,"complete"),Gt(this,"abort"),tr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tr(this,!0)),nt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Fs(this):this.Xa())},s.Xa=function(){Fs(this)};function Fs(h){if(h.h&&typeof l<"u"){if(h.v&&mi(h)==4)setTimeout(h.Ca.bind(h),0);else if(Gt(h,"readystatechange"),mi(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=Q===0){let oe=String(h.D).match(Mc)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),A=!Ui.test(oe?oe.toLowerCase():"")}E=A}if(E)Gt(h,"complete"),Gt(h,"success");else{h.o=6;try{var k=mi(h)>2?h.g.statusText:""}catch{k=""}h.l=k+" ["+h.ca()+"]",Ol(h)}}finally{tr(h)}}}}function tr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||Gt(h,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function mi(h){return h.g?h.g.readyState:0}s.ca=function(){try{return mi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),bd(y)}};function tn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function nr(h){const y={};h=(h.g&&mi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(C(h[A]))continue;var E=Vc(h[A]);const k=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=y[k]||[];y[k]=Q,Q.push(E)}$e(y,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function Ur(h){this.za=0,this.i=[],this.j=new ui,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,h),this.Za=ki("retryDelaySeedMs",1e4,h),this.Ta=ki("forwardChannelMaxRetries",2,h),this.va=ki("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Sl(h&&h.concurrentRequestLimit),this.Ba=new Pr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ur.prototype,s.ka=8,s.I=1,s.connect=function(h,y,E,A){Vt(0),this.W=h,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Gc(this,null,this.W),zi(this)};function Ml(h){if(Ga(h),h.I==3){var y=h.V++,E=Mt(h.J);if(Xe(E,"SID",h.M),Xe(E,"RID",y),Xe(E,"TYPE","terminate"),Hs(h,E),y=new ci(h,h.j,y),y.M=2,y.A=ks(Mt(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=Kc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Di(y)}Hc(h)}function kr(h){h.g&&(Ll(h),h.g.cancel(),h.g=null)}function Ga(h){kr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Qa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function zi(h){if(!bl(h.h)&&!h.m){h.m=!0;var y=h.Ea;de||w(),Ee||(de(),Ee=!0),R.add(y,h),h.D=0}}function Ka(h,y){return Oi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ii(g(h.Ea,h,y),Fc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const k=new ci(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=O(Q),ce(Q,this.U)):Q=this.U),this.u!==null||this.R||(k.J=Q,Q=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=zc(this,k,y),E=Mt(this.J),Xe(E,"RID",h),Xe(E,"CVER",22),this.G&&Xe(E,"X-HTTP-Session-Id",this.G),Hs(this,E),Q&&(this.R?y="headers="+er($n(Q))+"&"+y:this.u&&qs(E,this.u,Q)),Al(this.h,k),this.Ra&&Xe(E,"TYPE","init"),this.S?(Xe(E,"$req",y),Xe(E,"SID","null"),k.U=!0,xi(k,E,null)):xi(k,E,y),this.I=2}}else this.I==3&&(h?Pl(this,h):this.i.length==0||bl(this.h)||Pl(this))};function Pl(h,y){var E;y?E=y.l:E=h.V++;const A=Mt(h.J);Xe(A,"SID",h.M),Xe(A,"RID",E),Xe(A,"AID",h.K),Hs(h,A),h.u&&h.o&&qs(A,h.u,h.o),E=new ci(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=zc(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Al(h.h,E),xi(E,A,y)}function Hs(h,y){h.H&&je(h.H,function(E,A){Xe(y,A,E)}),h.l&&je({},function(E,A){Xe(y,A,E)})}function zc(h,y,E){E=Math.min(h.i.length,E);const A=h.l?g(h.l.Ka,h.l,h):null;e:{var k=h.i;let Ce=-1;for(;;){const wt=["count="+E];Ce==-1?E>0?(Ce=k[0].g,wt.push("ofs="+Ce)):Ce=0:wt.push("ofs="+Ce);let Ge=!0;for(let dt=0;dt<E;dt++){var Q=k[dt].g;const Xn=k[dt].map;if(Q-=Ce,Q<0)Ce=Math.max(0,k[dt].g-100),Ge=!1;else try{Q="req"+Q+"_"||"";try{var oe=Xn instanceof Map?Xn:Object.entries(Xn);for(const[qi,pi]of oe){let gi=pi;d(pi)&&(gi=Dr(pi)),wt.push(Q+qi+"="+encodeURIComponent(gi))}}catch(qi){throw wt.push(Q+"type="+encodeURIComponent("_badmap")),qi}}catch{A&&A(Xn)}}if(Ge){oe=wt.join("&");break e}}oe=void 0}return h=h.i.splice(0,E),y.G=h,oe}function Bc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;de||w(),Ee||(de(),Ee=!0),R.add(y,h),h.A=0}}function Gs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ii(g(h.Da,h),Fc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,qc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ii(g(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),kr(this),qc(this))};function Ll(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function qc(h){h.g=new ci(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Mt(h.na);Xe(y,"RID","rpc"),Xe(y,"SID",h.M),Xe(y,"AID",h.K),Xe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Xe(y,"TO",h.ia),Xe(y,"TYPE","xmlhttp"),Hs(h,y),h.u&&h.o&&qs(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=ks(Mt(y)),E.u=null,E.R=!0,ka(E,h)}s.Va=function(){this.C!=null&&(this.C=null,kr(this),Gs(this),Vt(19))};function Qa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function jc(h,y){var E=null;if(h.g==y){Qa(h),Ll(h),h.g=null;var A=2}else if(Mi(h.h,y))E=y.G,wl(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var k=h.D;A=Ua(),Gt(A,new Ri(A,E)),zi(h)}else Bc(h);else if(k=y.m,k==3||k==0&&y.X>0||!(A==1&&Ka(h,y)||A==2&&Gs(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),k){case 1:Bi(h,5);break;case 4:Bi(h,10);break;case 3:Bi(h,6);break;default:Bi(h,2)}}}function Fc(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function Bi(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),A=h.Ua;const k=!A;A=new Vn(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Xt(A,"https"),ks(A),k?fi(A.toString(),E):Vl(A.toString(),E)}else Vt(2);h.I=0,h.l&&h.l.pa(y),Hc(h),Ga(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Hc(h){if(h.I=0,h.ja=[],h.l){const y=Rl(h.h);(y.length!=0||h.i.length!=0)&&(F(h.ja,y),F(h.ja,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.oa()}}function Gc(h,y,E){var A=E instanceof Vn?Mt(E):new Vn(E);if(A.g!="")y&&(A.g=y+"."+A.g),Vr(A,A.u);else{var k=c.location;A=k.protocol,y=y?y+"."+k.hostname:k.hostname,k=+k.port;const Q=new Vn(null);A&&Xt(Q,A),y&&(Q.g=y),k&&Vr(Q,k),E&&(Q.h=E),A=Q}return E=h.G,y=h.wa,E&&y&&Xe(A,E,y),Xe(A,"VER",h.ka),Hs(h,A),A}function Kc(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new nt(new Li({ab:E})):new nt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qc(){}s=Qc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function zr(){}zr.prototype.g=function(h,y){return new yn(h,y)};function yn(h,y){Dt.call(this),this.g=new Ur(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ir(this)}T(yn,Dt),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Ml(this.g)},yn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Dr(h),h=E);y.i.push(new Ot(y.Ya++,h)),y.I==3&&zi(y)},yn.prototype.N=function(){this.g.l=null,delete this.j,Ml(this.g),delete this.g,yn.Z.N.call(this)};function Yc(h){en.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Yc,en);function $c(){Kn.call(this),this.status=1}T($c,Kn);function ir(h){this.g=h}T(ir,Qc),ir.prototype.ra=function(){Gt(this.g,"a")},ir.prototype.qa=function(h){Gt(this.g,new Yc(h))},ir.prototype.pa=function(h){Gt(this.g,new $c)},ir.prototype.oa=function(){Gt(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,eb=function(){return new zr},WS=function(){return Ua()},ZS=At,eg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,ff=Ls,El.COMPLETE="complete",JS=El,Ic.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,xu=Ic,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,XS=nt}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");let ul="12.9.0";function xC(s){ul=s}const Sa=new FS("@firebase/firestore");function No(){return Sa.logLevel}function re(s,...e){if(Sa.logLevel<=qe.DEBUG){const t=e.map(jg);Sa.debug(`Firestore (${ul}): ${s}`,...t)}}function Ct(s,...e){if(Sa.logLevel<=qe.ERROR){const t=e.map(jg);Sa.error(`Firestore (${ul}): ${s}`,...t)}}function qo(s,...e){if(Sa.logLevel<=qe.WARN){const t=e.map(jg);Sa.warn(`Firestore (${ul}): ${s}`,...t)}}function jg(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function me(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,tb(s,i,t)}function tb(s,e,t){let i=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ct(i),new Error(i)}function ve(s,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,s||tb(e,a,i)}function ge(s,e){return s}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends ll{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ji{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class DC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class NC{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ji,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ji)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string",31837,{l:i}),new DC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class OC{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class MC{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new OC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dC(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const i=l=>{l.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new k0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new k0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function LC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class Fg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=LC(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Re(s,e){return s<e?-1:s>e?1:0}function tg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const a=s.charAt(i),l=e.charAt(i);if(a!==l)return Mp(a)===Mp(l)?Re(a,l):Mp(a)?1:-1}return Re(s.length,e.length)}const UC=55296,kC=57343;function Mp(s){const e=s.charCodeAt(0);return e>=UC&&e<=kC}function jo(s,e,t){return s.length===e.length&&s.every(((i,a)=>t(i,e[a])))}function nb(s){return s+"\0"}const z0="__name__";class Qi{constructor(e,t,i){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&me(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Qi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Qi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Re(e.length,t.length)}static compareSegments(e,t){const i=Qi.isNumericId(e),a=Qi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Qi.extractNumericId(e).compare(Qi.extractNumericId(t)):tg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class Qe extends Qi{construct(e,t,i){return new Qe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const zC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Qi{construct(e,t,i){return new _t(e,t,i)}static isValidIdentifier(e){return zC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z0}static keyField(){return new _t([z0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ae($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ae($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ae($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new ae($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(t)}static emptyPath(){return new _t([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(Qe.fromString(e))}static fromName(e){return new le(Qe.fromString(e).popFirst(5))}static empty(){return new le(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Qe(e.slice()))}}function ib(s,e,t){if(!t)throw new ae($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function BC(s,e,t,i){if(e===!0&&i===!0)throw new ae($.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function B0(s){if(!le.isDocumentKey(s))throw new ae($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function q0(s){if(le.isDocumentKey(s))throw new ae($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function rb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Xf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":me(12329,{type:typeof s})}function jn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ae($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xf(s);throw new ae($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function jt(s,e){const t={typeString:s};return e&&(t.value=e),t}function fc(s,e){if(!rb(s))throw new ae($.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const c=s[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ae($.INVALID_ARGUMENT,t);return!0}const j0=-62135596800,F0=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*F0);return new We(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<j0)throw new ae($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F0}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fc(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-j0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:jt("string",We._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new We(0,0))}static max(){return new Se(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Fo=-1;class Cf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function ng(s){return s.fields.find((e=>e.kind===2))}function ca(s){return s.fields.filter((e=>e.kind!==2))}Cf.UNKNOWN_ID=-1;class df{constructor(e,t){this.fieldPath=e,this.kind=t}}class $u{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $u(0,Hn.min())}}function sb(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Se.fromTimestamp(i===1e9?new We(t+1,0):new We(t,i));return new Hn(a,le.empty(),e)}function ab(s){return new Hn(s.readTime,s.key,Fo)}class Hn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Hn(Se.min(),le.empty(),Fo)}static max(){return new Hn(Se.max(),le.empty(),Fo)}}function Hg(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(s.documentKey,e.documentKey),t!==0?t:Re(s.largestBatchId,e.largestBatchId))}const ob="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Rs(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==ob)throw s;re("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):U.reject(t)}static resolve(e){return new U(((t,i)=>{t(e)}))}static reject(e){return new U(((t,i)=>{i(e)}))}static waitFor(e){return new U(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>i(p)))})),c=!0,l===a&&t()}))}static or(e){let t=U.resolve(!1);for(const i of e)t=t.next((a=>a?U.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new U(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&i(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new U(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}const zn="SimpleDb";class Jf{static open(e,t,i,a){try{return new Jf(t,e.transaction(a,i))}catch(l){throw new Lu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ji,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Lu(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=Gg(i.target.error);this.S.reject(new Lu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(re(zn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jC(t)}}class _s{static delete(e){return re(zn,"Removing database:",e),fa(LS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!qS())return!1;if(_s.F())return!0;const e=Bo(),t=_s.M(e),i=0<t&&t<10,a=ub(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,_s.M(Bo())===12.2&&Ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(re(zn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new Lu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new ae($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new ae($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Lu(e,c))},a.onupgradeneeded=l=>{re(zn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{re(zn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=Jf.open(this.db,e,l?"readonly":"readwrite",i),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),U.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(re(zn,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ub(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class qC{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return fa(this.U.delete())}}class Lu extends ae{constructor(e,t){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Is(s){return s.name==="IndexedDbTransactionError"}class jC{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(re(zn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(re(zn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),fa(i)}add(e){return re(zn,"ADD",this.store.name,e,e),fa(this.store.add(e))}get(e){return fa(this.store.get(e)).next((t=>(t===void 0&&(t=null),re(zn,"GET",this.store.name,e,t),t)))}delete(e){return re(zn,"DELETE",this.store.name,e),fa(this.store.delete(e))}count(){return re(zn,"COUNT",this.store.name),fa(this.store.count())}H(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new U(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new U(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}X(e,t){re(zn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const a=this.cursor(i);return this.J(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.J(a,t)}te(e){const t=this.cursor({});return new U(((i,a)=>{t.onerror=l=>{const c=Gg(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}J(e,t){const i=[];return new U(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new qC(d),g=t(d.primaryKey,d.value,p);if(g instanceof U){const v=g.catch((T=>(p.done(),U.reject(T))));i.push(v)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>U.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fa(s){return new U(((e,t)=>{s.onsuccess=i=>{const a=i.target.result;e(a)},s.onerror=i=>{const a=Gg(i.target.error);t(a)}}))}let H0=!1;function Gg(s){const e=_s.M(Bo());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const i=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return H0||(H0=!0,setTimeout((()=>{throw i}),0)),i}}return s}const Uu="IndexBackfiller";class FC{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){re(Uu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();re(Uu,`Documents written: ${t}`)}catch(t){Is(t)?re(Uu,"Ignoring IndexedDB error during index backfill: ",t):await Rs(t)}await this.re(6e4)}))}}class HC{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return U.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return re(Uu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(re(Uu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=ab(l);Hg(c,i)>0&&(i=c)})),new Hn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Cn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cn.ce=-1;const ya=-1;function Zf(s){return s==null}function Xu(s){return s===0&&1/s==-1/0}function cb(s){return typeof s=="number"&&Number.isInteger(s)&&!Xu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const xf="";function pn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=G0(e)),e=GC(s.get(t),e);return G0(e)}function GC(s,e){let t=e;const i=s.length;for(let a=0;a<i;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case xf:t+="";break;default:t+=l}}return t}function G0(s){return s+xf+""}function $i(s){const e=s.length;if(ve(e>=2,64408,{path:s}),e===2)return ve(s.charAt(0)===xf&&s.charAt(1)==="",56145,{path:s}),Qe.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=s.indexOf(xf,l);switch((c<0||c>t)&&me(50515,{path:s}),s.charAt(c+1)){case"":const d=s.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),i.push(p);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:me(61167,{path:s})}l=c+2}return new Qe(i)}const ha="remoteDocuments",dc="owner",wo="owner",Ju="mutationQueues",KC="userId",Ei="mutations",K0="batchId",ga="userMutationsIndex",Q0=["userId","batchId"];function mf(s,e){return[s,pn(e)]}function hb(s,e,t){return[s,pn(e),t]}const QC={},Ho="documentMutations",Df="remoteDocumentsV14",YC=["prefixPath","collectionGroup","readTime","documentId"],pf="documentKeyIndex",$C=["prefixPath","collectionGroup","documentId"],fb="collectionGroupIndex",XC=["collectionGroup","readTime","prefixPath","documentId"],Zu="remoteDocumentGlobal",ig="remoteDocumentGlobalKey",Go="targets",db="queryTargetsIndex",JC=["canonicalId","targetId"],Ko="targetDocuments",ZC=["targetId","path"],Kg="documentTargetsIndex",WC=["path","targetId"],Vf="targetGlobalKey",_a="targetGlobal",Wu="collectionParents",ex=["collectionId","parent"],Qo="clientMetadata",tx="clientId",Wf="bundles",nx="bundleId",ed="namedQueries",ix="name",Qg="indexConfiguration",rx="indexId",rg="collectionGroupIndex",sx="collectionGroup",ku="indexState",ax=["indexId","uid"],mb="sequenceNumberIndex",ox=["uid","sequenceNumber"],zu="indexEntries",lx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pb="documentKeyIndex",ux=["indexId","uid","orderedDocumentKey"],td="documentOverlays",cx=["userId","collectionPath","documentId"],sg="collectionPathOverlayIndex",hx=["userId","collectionPath","largestBatchId"],gb="collectionGroupOverlayIndex",fx=["userId","collectionGroup","largestBatchId"],Yg="globals",dx="name",yb=[Ju,Ei,Ho,ha,Go,dc,_a,Ko,Qo,Zu,Wu,Wf,ed],mx=[...yb,td],_b=[Ju,Ei,Ho,Df,Go,dc,_a,Ko,Qo,Zu,Wu,Wf,ed,td],vb=_b,$g=[...vb,Qg,ku,zu],px=$g,Eb=[...$g,Yg],gx=Eb;class ag extends lb{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Yt(s,e){const t=ge(s);return _s.O(t.le,e)}function Y0(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Cs(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Tb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class lt{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tf(this.root,e,this.comparator,!0)}}class tf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??on.RED,this.left=a??on.EMPTY,this.right=l??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new on(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return on.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $0(this.data.getIterator())}getIteratorFrom(e){return new $0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tt(this.comparator);return t.data=e,t}}class $0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ro(s){return s.hasNext()?s.getNext():void 0}class xn{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new xn([])}unionWith(e){let t=new tt(_t.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Sb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Sb("Invalid base64 string: "+l):l}})(e);return new xt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const yx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(s){if(ve(!!s,39018),typeof s=="string"){let e=0;const t=yx.exec(s);if(ve(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:pt(s.seconds),nanos:pt(s.nanos)}}function pt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ar(s){return typeof s=="string"?xt.fromBase64String(s):xt.fromUint8Array(s)}const bb="server_timestamp",Ab="__type__",wb="__previous_value__",Rb="__local_write_time__";function Xg(s){return(s?.mapValue?.fields||{})[Ab]?.stringValue===bb}function nd(s){const e=s.mapValue.fields[wb];return Xg(e)?nd(e):e}function ec(s){const e=br(s.mapValue.fields[Rb].timestampValue);return new We(e.seconds,e.nanos)}class _x{constructor(e,t,i,a,l,c,d,p,g,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=T}}const Nf="(default)";class ba{constructor(e,t){this.projectId=e,this.database=t||Nf}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===Nf}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}function vx(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ae($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(s.options.projectId,e)}const Jg="__type__",Ib="__max__",ms={mapValue:{fields:{__type__:{stringValue:Ib}}}},Zg="__vector__",Yo="value",gf={nullValue:"NULL_VALUE"};function Ts(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Xg(s)?4:Cb(s)?9007199254740991:id(s)?10:11:me(28295,{value:s})}function Wi(s,e){if(s===e)return!0;const t=Ts(s);if(t!==Ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ec(s).isEqual(ec(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=br(a.timestampValue),d=br(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return Ar(a.bytesValue).isEqual(Ar(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return pt(a.geoPointValue.latitude)===pt(l.geoPointValue.latitude)&&pt(a.geoPointValue.longitude)===pt(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return pt(a.integerValue)===pt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=pt(a.doubleValue),d=pt(l.doubleValue);return c===d?Xu(c)===Xu(d):isNaN(c)&&isNaN(d)}return!1})(s,e);case 9:return jo(s.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Y0(c)!==Y0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Wi(c[p],d[p])))return!1;return!0})(s,e);default:return me(52216,{left:s})}}function tc(s,e){return(s.values||[]).find((t=>Wi(t,e)))!==void 0}function Ss(s,e){if(s===e)return 0;const t=Ts(s),i=Ts(e);if(t!==i)return Re(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(s.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=pt(l.integerValue||l.doubleValue),p=pt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(s,e);case 3:return X0(s.timestampValue,e.timestampValue);case 4:return X0(ec(s),ec(e));case 5:return tg(s.stringValue,e.stringValue);case 6:return(function(l,c){const d=Ar(l),p=Ar(c);return d.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=Re(d[g],p[g]);if(v!==0)return v}return Re(d.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Re(pt(l.latitude),pt(c.latitude));return d!==0?d:Re(pt(l.longitude),pt(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return J0(s.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[Yo]?.arrayValue,v=p[Yo]?.arrayValue,T=Re(g?.values?.length||0,v?.values?.length||0);return T!==0?T:J0(g,v)})(s.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ms.mapValue&&c===ms.mapValue)return 0;if(l===ms.mapValue)return 1;if(c===ms.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const b=tg(p[T],v[T]);if(b!==0)return b;const D=Ss(d[p[T]],g[v[T]]);if(D!==0)return D}return Re(p.length,v.length)})(s.mapValue,e.mapValue);default:throw me(23264,{he:t})}}function X0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Re(s,e);const t=br(s),i=br(e),a=Re(t.seconds,i.seconds);return a!==0?a:Re(t.nanos,i.nanos)}function J0(s,e){const t=s.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Ss(t[a],i[a]);if(l)return l}return Re(t.length,i.length)}function $o(s){return og(s)}function og(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=br(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ar(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return le.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=og(l);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${og(t.fields[c])}`;return a+"}"})(s.mapValue):me(61005,{value:s})}function yf(s){switch(Ts(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nd(s);return e?16+yf(e):16;case 5:return 2*s.stringValue.length;case 6:return Ar(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+yf(l)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return Cs(i.fields,((l,c)=>{a+=l.length+yf(c)})),a})(s.mapValue);default:throw me(13486,{value:s})}}function nc(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function lg(s){return!!s&&"integerValue"in s}function ic(s){return!!s&&"arrayValue"in s}function Z0(s){return!!s&&"nullValue"in s}function W0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function _f(s){return!!s&&"mapValue"in s}function id(s){return(s?.mapValue?.fields||{})[Jg]?.stringValue===Zg}function Bu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Cs(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Bu(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bu(s.arrayValue.values[t]);return e}return{...s}}function Cb(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Ib}const xb={mapValue:{fields:{[Jg]:{stringValue:Zg},[Yo]:{arrayValue:{}}}}};function Ex(s){return"nullValue"in s?gf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?nc(ba.empty(),le.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?id(s)?xb:{mapValue:{}}:me(35942,{value:s})}function Tx(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?nc(ba.empty(),le.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?xb:"mapValue"in s?id(s)?{mapValue:{}}:ms:me(61959,{value:s})}function eT(s,e){const t=Ss(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function tT(s,e){const t=Ss(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!_f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(t)}setAll(e){let t=_t.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=Bu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());_f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];_f(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Cs(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new mn(Bu(this.value))}}function Db(s){const e=[];return Cs(s.fields,((t,i)=>{const a=new _t([t]);if(_f(i)){const l=Db(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new xn(e)}class Tt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Tt(e,0,Se.min(),Se.min(),Se.min(),mn.empty(),0)}static newFoundDocument(e,t,i,a){return new Tt(e,1,t,Se.min(),i,a,0)}static newNoDocument(e,t){return new Tt(e,2,t,Se.min(),Se.min(),mn.empty(),0)}static newUnknownDocument(e,t){return new Tt(e,3,t,Se.min(),Se.min(),mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xo{constructor(e,t){this.position=e,this.inclusive=t}}function nT(s,e,t){let i=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?i=le.comparator(le.fromName(c.referenceValue),t.key):i=Ss(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function iT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Wi(s.position[t],e.position[t]))return!1;return!0}class rc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Sx(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Vb{}class Ue extends Vb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new bx(e,t,i):t==="array-contains"?new Rx(e,i):t==="in"?new Ub(e,i):t==="not-in"?new Ix(e,i):t==="array-contains-any"?new Cx(e,i):new Ue(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Ax(e,i):new wx(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ss(t,this.value)):t!==null&&Ts(this.value)===Ts(t)&&this.matchesComparison(Ss(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class et extends Vb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new et(e,t)}matches(e){return Jo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Jo(s){return s.op==="and"}function ug(s){return s.op==="or"}function Wg(s){return Nb(s)&&Jo(s)}function Nb(s){for(const e of s.filters)if(e instanceof et)return!1;return!0}function cg(s){if(s instanceof Ue)return s.field.canonicalString()+s.op.toString()+$o(s.value);if(Wg(s))return s.filters.map((e=>cg(e))).join(",");{const e=s.filters.map((t=>cg(t))).join(",");return`${s.op}(${e})`}}function Ob(s,e){return s instanceof Ue?(function(i,a){return a instanceof Ue&&i.op===a.op&&i.field.isEqual(a.field)&&Wi(i.value,a.value)})(s,e):s instanceof et?(function(i,a){return a instanceof et&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&Ob(c,a.filters[d])),!0):!1})(s,e):void me(19439)}function Mb(s,e){const t=s.filters.concat(e);return et.create(t,s.op)}function Pb(s){return s instanceof Ue?(function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`})(s):s instanceof et?(function(t){return t.op.toString()+" {"+t.getFilters().map(Pb).join(" ,")+"}"})(s):"Filter"}class bx extends Ue{constructor(e,t,i){super(e,t,i),this.key=le.fromName(i.referenceValue)}matches(e){const t=le.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ax extends Ue{constructor(e,t){super(e,"in",t),this.keys=Lb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wx extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=Lb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Lb(s,e){return(e.arrayValue?.values||[]).map((t=>le.fromName(t.referenceValue)))}class Rx extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ic(t)&&tc(t.arrayValue,this.value)}}class Ub extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tc(this.value.arrayValue,t)}}class Ix extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tc(this.value.arrayValue,t)}}class Cx extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ic(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>tc(this.value.arrayValue,i)))}}class xx{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function hg(s,e=null,t=[],i=[],a=null,l=null,c=null){return new xx(s,e,t,i,a,l,c)}function Aa(s){const e=ge(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>cg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Zf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>$o(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>$o(i))).join(",")),e.Te=t}return e.Te}function mc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Sx(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Ob(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!iT(s.startAt,e.startAt)&&iT(s.endAt,e.endAt)}function Of(s){return le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Mf(s,e){return s.filters.filter((t=>t instanceof Ue&&t.field.isEqual(e)))}function rT(s,e,t){let i=gf,a=!0;for(const l of Mf(s,e)){let c=gf,d=!0;switch(l.op){case"<":case"<=":c=Ex(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=gf}eT({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];eT({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function sT(s,e,t){let i=ms,a=!0;for(const l of Mf(s,e)){let c=ms,d=!0;switch(l.op){case">=":case">":c=Tx(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ms}tT({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];tT({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}class cl{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function kb(s,e,t,i,a,l,c,d){return new cl(s,e,t,i,a,l,c,d)}function pc(s){return new cl(s)}function aT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Dx(s){return le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function zb(s){return s.collectionGroup!==null}function qu(s){const e=ge(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new tt(_t.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new rc(l,i))})),t.has(_t.keyField().canonicalString())||e.Ie.push(new rc(_t.keyField(),i))}return e.Ie}function Fn(s){const e=ge(s);return e.Ee||(e.Ee=Vx(e,qu(s))),e.Ee}function Vx(s,e){if(s.limitType==="F")return hg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new rc(a.field,l)}));const t=s.endAt?new Xo(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Xo(s.startAt.position,s.startAt.inclusive):null;return hg(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function fg(s,e){const t=s.filters.concat([e]);return new cl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Nx(s,e){const t=s.explicitOrderBy.concat([e]);return new cl(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function dg(s,e,t){return new cl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function rd(s,e){return mc(Fn(s),Fn(e))&&s.limitType===e.limitType}function Bb(s){return`${Aa(Fn(s))}|lt:${s.limitType}`}function Oo(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>Pb(a))).join(", ")}]`),Zf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>$o(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>$o(a))).join(",")),`Target(${i})`})(Fn(s))}; limitType=${s.limitType})`}function gc(s,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):le.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(s,e)&&(function(i,a){for(const l of qu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,p){const g=nT(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,qu(i),a)||i.endAt&&!(function(c,d,p){const g=nT(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,qu(i),a))})(s,e)}function qb(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function jb(s){return(e,t)=>{let i=!1;for(const a of qu(s)){const l=Ox(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function Ox(s,e,t){const i=s.field.isKeyField()?le.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Ss(p,g):me(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:s.dir})}}class Ir{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return Tb(this.inner)}size(){return this.innerSize}}const Mx=new lt(le.comparator);function qn(){return Mx}const Fb=new lt(le.comparator);function Du(...s){let e=Fb;for(const t of s)e=e.insert(t.key,t);return e}function Hb(s){let e=Fb;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Xi(){return ju()}function Gb(){return ju()}function ju(){return new Ir((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Px=new lt(le.comparator),Lx=new tt(le.comparator);function Ne(...s){let e=Lx;for(const t of s)e=e.add(t);return e}const Ux=new tt(Re);function ey(){return Ux}function ty(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xu(e)?"-0":e}}function Kb(s){return{integerValue:""+s}}function kx(s,e){return cb(e)?Kb(e):ty(s,e)}class sd{constructor(){this._=void 0}}function zx(s,e,t){return s instanceof sc?(function(a,l){const c={fields:{[Ab]:{stringValue:bb},[Rb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Xg(l)&&(l=nd(l)),l&&(c.fields[wb]=l),{mapValue:c}})(t,e):s instanceof Zo?Yb(s,e):s instanceof Wo?$b(s,e):(function(a,l){const c=Qb(a,l),d=oT(c)+oT(a.Ae);return lg(c)&&lg(a.Ae)?Kb(d):ty(a.serializer,d)})(s,e)}function Bx(s,e,t){return s instanceof Zo?Yb(s,e):s instanceof Wo?$b(s,e):t}function Qb(s,e){return s instanceof ac?(function(i){return lg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class sc extends sd{}class Zo extends sd{constructor(e){super(),this.elements=e}}function Yb(s,e){const t=Xb(e);for(const i of s.elements)t.some((a=>Wi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Wo extends sd{constructor(e){super(),this.elements=e}}function $b(s,e){let t=Xb(e);for(const i of s.elements)t=t.filter((a=>!Wi(a,i)));return{arrayValue:{values:t}}}class ac extends sd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function oT(s){return pt(s.integerValue||s.doubleValue)}function Xb(s){return ic(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class qx{constructor(e,t){this.field=e,this.transform=t}}function jx(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof Zo&&a instanceof Zo||i instanceof Wo&&a instanceof Wo?jo(i.elements,a.elements,Wi):i instanceof ac&&a instanceof ac?Wi(i.Ae,a.Ae):i instanceof sc&&a instanceof sc})(s.transform,e.transform)}class Fx{constructor(e,t){this.version=e,this.transformResults=t}}class Wt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ad{}function Jb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new yc(s.key,Wt.none()):new hl(s.key,s.data,Wt.none());{const t=s.data,i=mn.empty();let a=new tt(_t.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Cr(s.key,i,new xn(a.toArray()),Wt.none())}}function Hx(s,e,t){s instanceof hl?(function(a,l,c){const d=a.value.clone(),p=uT(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(s,e,t):s instanceof Cr?(function(a,l,c){if(!vf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=uT(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Zb(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(s,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Fu(s,e,t,i){return s instanceof hl?(function(l,c,d,p){if(!vf(l.precondition,c))return d;const g=l.value.clone(),v=cT(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(s,e,t,i):s instanceof Cr?(function(l,c,d,p){if(!vf(l.precondition,c))return d;const g=cT(l.fieldTransforms,p,c),v=c.data;return v.setAll(Zb(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(s,e,t,i):(function(l,c,d){return vf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(s,e,t)}function Gx(s,e){let t=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),l=Qb(i.transform,a||null);l!=null&&(t===null&&(t=mn.empty()),t.set(i.field,l))}return t||null}function lT(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&jo(i,a,((l,c)=>jx(l,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class hl extends ad{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Cr extends ad{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Zb(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function uT(s,e,t){const i=new Map;ve(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,Bx(c,d,t[a]))}return i}function cT(s,e,t){const i=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);i.set(a.field,zx(l,c,e))}return i}class yc extends ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wb extends ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ny{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Hx(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Fu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Fu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Gb();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=Jb(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,((t,i)=>lT(t,i)))&&jo(this.baseMutations,e.baseMutations,((t,i)=>lT(t,i)))}}class iy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ve(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return Px})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new iy(e,t,i,a)}}class ry{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Kx{constructor(e,t){this.count=e,this.unchangedNames=t}}var Bt,Be;function Qx(s){switch(s){case $.OK:return me(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return me(15467,{code:s})}}function e1(s){if(s===void 0)return Ct("GRPC error has no .code"),$.UNKNOWN;switch(s){case Bt.OK:return $.OK;case Bt.CANCELLED:return $.CANCELLED;case Bt.UNKNOWN:return $.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return $.INTERNAL;case Bt.UNAVAILABLE:return $.UNAVAILABLE;case Bt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Bt.NOT_FOUND:return $.NOT_FOUND;case Bt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Bt.ABORTED:return $.ABORTED;case Bt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Bt.DATA_LOSS:return $.DATA_LOSS;default:return me(39323,{code:s})}}(Be=Bt||(Bt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";function Yx(){return new TextEncoder}const $x=new ys([4294967295,4294967295],0);function hT(s){const e=Yx().encode(s),t=new $S;return t.update(e),new Uint8Array(t.digest())}function fT(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ys([t,i],0),new ys([a,l],0)]}class sy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Vu(`Invalid padding: ${t}`);if(i<0)throw new Vu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Vu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Vu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ys.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(ys.fromNumber(i)));return a.compare($x)===1&&(a=new ys([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=hT(e),[i,a]=fT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new sy(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=hT(e),[i,a]=fT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _c{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new _c(Se.min(),a,new lt(Re),qn(),Ne())}}class vc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new vc(i,t,Ne(),Ne(),Ne())}}class Ef{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class t1{constructor(e,t){this.targetId=e,this.Ce=t}}class n1{constructor(e,t,i=xt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class dT{constructor(){this.ve=0,this.Fe=mT(),this.Me=xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),t=Ne(),i=Ne();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:me(38017,{changeType:l})}})),new vc(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=mT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Xx{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.He=nf(),this.Je=nf(),this.Ze=new lt(Re)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Of(l))if(i===0){const c=new le(l.path);this.et(t,c,Tt.newNoDocument(c,Se.min()))}else ve(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Ar(i).toUint8Array()}catch(p){if(p instanceof Sb)return qo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new sy(c,a,l)}catch(p){return qo(p instanceof Vu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Of(d.target)){const p=new le(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Tt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=Ne();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new _c(e,t,this.Ze,this.je,i);return this.je=qn(),this.He=nf(),this.Je=nf(),this.Ze=new lt(Re),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new dT,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new tt(Re),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new tt(Re),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nf(){return new lt(le.comparator)}function mT(){return new lt(le.comparator)}const Jx={asc:"ASCENDING",desc:"DESCENDING"},Zx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wx={and:"AND",or:"OR"};class eD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mg(s,e){return s.useProto3Json||Zf(e)?e:{value:e}}function el(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function tD(s,e){return el(s,e.toTimestamp())}function vn(s){return ve(!!s,49232),Se.fromTimestamp((function(t){const i=br(t);return new We(i.seconds,i.nanos)})(s))}function ay(s,e){return pg(s,e).canonicalString()}function pg(s,e){const t=(function(a){return new Qe(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function r1(s){const e=Qe.fromString(s);return ve(d1(e),10190,{key:e.toString()}),e}function Pf(s,e){return ay(s.databaseId,e.path)}function va(s,e){const t=r1(e);if(t.get(1)!==s.databaseId.projectId)throw new ae($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ae($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new le(o1(t))}function s1(s,e){return ay(s.databaseId,e)}function a1(s){const e=r1(s);return e.length===4?Qe.emptyPath():o1(e)}function gg(s){return new Qe(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function o1(s){return ve(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function pT(s,e,t){return{name:Pf(s,e),fields:t.value.mapValue.fields}}function nD(s,e,t){const i=va(s,e.name),a=vn(e.updateTime),l=e.createTime?vn(e.createTime):Se.min(),c=new mn({mapValue:{fields:e.fields}}),d=Tt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function iD(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:me(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(ve(v===void 0||typeof v=="string",58123),xt.fromBase64String(v||"")):(ve(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),xt.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?$.UNKNOWN:e1(g.code);return new ae(v,g.message||"")})(c);t=new n1(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=va(s,i.document.name),l=vn(i.document.updateTime),c=i.document.createTime?vn(i.document.createTime):Se.min(),d=new mn({mapValue:{fields:i.document.fields}}),p=Tt.newFoundDocument(a,l,c,d),g=i.targetIds||[],v=i.removedTargetIds||[];t=new Ef(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=va(s,i.document),l=i.readTime?vn(i.readTime):Se.min(),c=Tt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Ef([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=va(s,i.document),l=i.removedTargetIds||[];t=new Ef([],l,a,null)}else{if(!("filter"in e))return me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new Kx(a,l),d=i.targetId;t=new t1(d,c)}}return t}function Lf(s,e){let t;if(e instanceof hl)t={update:pT(s,e.key,e.value)};else if(e instanceof yc)t={delete:Pf(s,e.key)};else if(e instanceof Cr)t={update:pT(s,e.key,e.data),updateMask:uD(e.fieldMask)};else{if(!(e instanceof Wb))return me(16599,{dt:e.type});t={verify:Pf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof sc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Zo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Wo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ac)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw me(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:tD(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:me(27497)})(s,e.precondition)),t}function yg(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Wt.updateTime(vn(l.updateTime)):l.exists!==void 0?Wt.exists(l.exists):Wt.none()})(e.currentDocument):Wt.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)ve(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new sc;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];p=new Zo(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];p=new Wo(v)}else"increment"in d?p=new ac(c,d.increment):me(16584,{proto:d});const g=_t.fromServerFormat(d.fieldPath);return new qx(g,p)})(s,a))):[];if(e.update){e.update.name;const a=va(s,e.update.name),l=new mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new xn(g.map((v=>_t.fromServerFormat(v))))})(e.updateMask);return new Cr(a,l,c,t,i)}return new hl(a,l,t,i)}if(e.delete){const a=va(s,e.delete);return new yc(a,t)}if(e.verify){const a=va(s,e.verify);return new Wb(a,t)}return me(1463,{proto:e})}function rD(s,e){return s&&s.length>0?(ve(e!==void 0,14353),s.map((t=>(function(a,l){let c=a.updateTime?vn(a.updateTime):vn(l);return c.isEqual(Se.min())&&(c=vn(l)),new Fx(c,a.transformResults||[])})(t,e)))):[]}function l1(s,e){return{documents:[s1(s,e.path)]}}function u1(s,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=s1(s,a);const l=(function(g){if(g.length!==0)return f1(et.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(b){return{field:Mo(b.field),direction:aD(b.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=mg(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function c1(s){let e=a1(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ve(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const b=h1(T);return b instanceof et&&Wg(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((b=>(function(F){return new rc(Po(F.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let b;return b=typeof T=="object"?T.value:T,Zf(b)?null:b})(t.limit));let p=null;t.startAt&&(p=(function(T){const b=!!T.before,D=T.values||[];return new Xo(D,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const b=!T.before,D=T.values||[];return new Xo(D,b)})(t.endAt)),kb(e,a,c,l,d,"F",p,g)}function sD(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function h1(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Po(t.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Po(t.unaryFilter.field);return Ue.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Po(t.unaryFilter.field);return Ue.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Po(t.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ue.create(Po(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return et.create(t.compositeFilter.filters.map((i=>h1(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(s):me(30097,{filter:s})}function aD(s){return Jx[s]}function oD(s){return Zx[s]}function lD(s){return Wx[s]}function Mo(s){return{fieldPath:s.canonicalString()}}function Po(s){return _t.fromServerFormat(s.fieldPath)}function f1(s){return s instanceof Ue?(function(t){if(t.op==="=="){if(W0(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NAN"}};if(Z0(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(W0(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NAN"}};if(Z0(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(t.field),op:oD(t.op),value:t.value}}})(s):s instanceof et?(function(t){const i=t.getFilters().map((a=>f1(a)));return i.length===1?i[0]:{compositeFilter:{op:lD(t.op),filters:i}}})(s):me(54877,{filter:s})}function uD(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function d1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function m1(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class vr{constructor(e,t,i,a,l=Se.min(),c=Se.min(),d=xt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class p1{constructor(e){this.yt=e}}function cD(s,e){let t;if(e.document)t=nD(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=le.fromSegments(e.noDocument.path),a=Ra(e.noDocument.readTime);t=Tt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return me(56709);{const i=le.fromSegments(e.unknownDocument.path),a=Ra(e.unknownDocument.version);t=Tt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new We(a[0],a[1]);return Se.fromTimestamp(l)})(e.readTime)),t}function gT(s,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:Pf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:el(l,c.version.toTimestamp()),createTime:el(l,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:wa(e.version)};else{if(!e.isUnknownDocument())return me(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:wa(e.version)}}return i}function Uf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function wa(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ra(s){const e=new We(s.seconds,s.nanoseconds);return Se.fromTimestamp(e)}function da(s,e){const t=(e.baseMutations||[]).map((l=>yg(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>yg(s.yt,l))),a=We.fromMillis(e.localWriteTimeMs);return new ny(e.batchId,a,t,i)}function Nu(s){const e=Ra(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Ra(s.lastLimboFreeSnapshotVersion):Se.min();let i;return i=(function(l){return l.documents!==void 0})(s.query)?(function(l){const c=l.documents.length;return ve(c===1,1966,{count:c}),Fn(pc(a1(l.documents[0])))})(s.query):(function(l){return Fn(c1(l))})(s.query),new vr(i,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,xt.fromBase64String(s.resumeToken))}function g1(s,e){const t=wa(e.snapshotVersion),i=wa(e.lastLimboFreeSnapshotVersion);let a;a=Of(e.target)?l1(s.yt,e.target):u1(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function y1(s){const e=c1({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?dg(e,e.limit,"L"):e}function Pp(s,e){return new ry(e.largestBatchId,yg(s.yt,e.overlayMutation))}function yT(s,e){const t=e.path.lastSegment();return[s,pn(e.path.popLast()),t]}function _T(s,e,t,i){return{indexId:s,uid:e,sequenceNumber:t,readTime:wa(i.readTime),documentKey:pn(i.documentKey.path),largestBatchId:i.largestBatchId}}class hD{getBundleMetadata(e,t){return vT(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Ra(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return vT(e).put((function(a){return{bundleId:a.id,createTime:wa(vn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return ET(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:y1(l.bundledQuery),readTime:Ra(l.readTime)}})(i)}))}saveNamedQuery(e,t){return ET(e).put((function(a){return{name:a.name,readTime:wa(vn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function vT(s){return Yt(s,Wf)}function ET(s){return Yt(s,ed)}class od{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new od(e,i)}getOverlay(e,t){return Su(e).get(yT(this.userId,t)).next((i=>i?Pp(this.serializer,i):null))}getOverlays(e,t){const i=Xi();return U.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new ry(t,c);a.push(this.bt(e,d))})),U.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(pn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Su(e).X(sg,d))})),U.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Xi(),l=pn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Su(e).H(sg,c).next((d=>{for(const p of d){const g=Pp(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Xi();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Su(e).ee({index:gb,range:d},((p,g,v)=>{const T=Pp(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return Su(e).put((function(a,l,c){const[d,p,g]=yT(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Lf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Su(s){return Yt(s,td)}class fD{St(e){return Yt(e,Yg)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const i=t?.value;return i?xt.fromUint8Array(i):xt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ma{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(pt(e.integerValue));else if("doubleValue"in e){const i=pt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Xu(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=br(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ar(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?Cb(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):id(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):me(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const a=Yo,l=i[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(pt(l)),this.Ot(a,t),this.Ct(i[a],t)}qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),le.fromName(e).path.forEach((i=>{this.Ft(t,60),this.$t(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ma.Wt=new ma;const Io=255;function dD(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function TT(s){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=dD(255&i[l]);if(a+=c,c!==8)break}return a})(s);return Math.ceil(e/8)}class mD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ht(i.value),i=t.next();this.Jt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),i=TT(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=TT(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Io),this.sn(255)}_n(){this.an(Io),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Io?(this.sn(Io),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Io?(this.an(Io),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class pD{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class gD{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class bu{constructor(){this.cn=new mD,this.ascending=new pD(this.cn),this.descending=new gD(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class pa{constructor(e,t,i,a){this.hn=e,this.Pn=t,this.Tn=i,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.In,0),t!==e?i.set([0],this.In.length):++i[i.length-1],new pa(this.hn,this.Pn,this.Tn,i)}Rn(e,t,i){return{indexId:this.hn,uid:e,arrayValue:Tf(this.Tn),directionalValue:Tf(this.In),orderedDocumentKey:Tf(t),documentKey:i.path.toArray()}}An(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ls(s,e){let t=s.hn-e.hn;return t!==0?t:(t=ST(s.Tn,e.Tn),t!==0?t:(t=ST(s.In,e.In),t!==0?t:le.comparator(s.Pn,e.Pn)))}function ST(s,e){for(let t=0;t<s.length&&t<e.length;++t){const i=s[t]-e[t];if(i!==0)return i}return s.length-e.length}function Tf(s){return BS()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(s):s}function bT(s){return typeof s!="string"?s:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(s)}class AT{constructor(e){this.Vn=new tt(((t,i)=>_t.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=ng(e);if(t!==void 0&&!this.pn(t))return!1;const i=ca(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.pn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=i[l];if(!this.yn(d,p)||!this.wn(this.dn[c++],p))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.dn.length||!this.wn(this.dn[c++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new tt(_t.comparator);const t=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new df(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new df(i.field,0))}for(const i of this.dn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new df(i.field,i.dir==="asc"?0:1)));return new Cf(Cf.UNKNOWN_ID,this.collectionId,t,$u.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function _1(s){if(ve(s instanceof Ue||s instanceof et,20012),s instanceof Ue){if(s instanceof Ub){const t=s.value.arrayValue?.values?.map((i=>Ue.create(s.field,"==",i)))||[];return et.create(t,"or")}return s}const e=s.filters.map((t=>_1(t)));return et.create(e,s.op)}function yD(s){if(s.getFilters().length===0)return[];const e=Eg(_1(s));return ve(v1(e),7391),_g(e)||vg(e)?[e]:e.getFilters()}function _g(s){return s instanceof Ue}function vg(s){return s instanceof et&&Wg(s)}function v1(s){return _g(s)||vg(s)||(function(t){if(t instanceof et&&ug(t)){for(const i of t.getFilters())if(!_g(i)&&!vg(i))return!1;return!0}return!1})(s)}function Eg(s){if(ve(s instanceof Ue||s instanceof et,34018),s instanceof Ue)return s;if(s.filters.length===1)return Eg(s.filters[0]);const e=s.filters.map((i=>Eg(i)));let t=et.create(e,s.op);return t=kf(t),v1(t)?t:(ve(t instanceof et,64498),ve(Jo(t),40251),ve(t.filters.length>1,57927),t.filters.reduce(((i,a)=>oy(i,a))))}function oy(s,e){let t;return ve(s instanceof Ue||s instanceof et,38388),ve(e instanceof Ue||e instanceof et,25473),t=s instanceof Ue?e instanceof Ue?(function(a,l){return et.create([a,l],"and")})(s,e):wT(s,e):e instanceof Ue?wT(e,s):(function(a,l){if(ve(a.filters.length>0&&l.filters.length>0,48005),Jo(a)&&Jo(l))return Mb(a,l.getFilters());const c=ug(a)?a:l,d=ug(a)?l:a,p=c.filters.map((g=>oy(g,d)));return et.create(p,"or")})(s,e),kf(t)}function wT(s,e){if(Jo(e))return Mb(e,s.getFilters());{const t=e.filters.map((i=>oy(s,i)));return et.create(t,"or")}}function kf(s){if(ve(s instanceof Ue||s instanceof et,11850),s instanceof Ue)return s;const e=s.getFilters();if(e.length===1)return kf(e[0]);if(Nb(s))return s;const t=e.map((a=>kf(a))),i=[];return t.forEach((a=>{a instanceof Ue?i.push(a):a instanceof et&&(a.op===s.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:et.create(i,s.op)}class _D{constructor(){this.Sn=new ly}addToCollectionParentIndex(e,t){return this.Sn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Hn.min())}updateCollectionGroup(e,t,i){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class ly{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new tt(Qe.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new tt(Qe.comparator)).toArray()}}const RT="IndexedDbIndexManager",rf=new Uint8Array(0);class vD{constructor(e,t){this.databaseId=t,this.Dn=new ly,this.Cn=new Ir((i=>Aa(i)),((i,a)=>mc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:i,parent:pn(a)};return IT(e).put(l)}return U.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[nb(t),""],!1,!0);return IT(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push($i(c.parent))}return i}))}addFieldIndex(e,t){const i=Au(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=xo(e);return l.next((d=>{c.put(_T(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Au(e),a=xo(e),l=Co(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Au(e),i=Co(e),a=xo(e);return t.X().next((()=>i.X())).next((()=>a.X()))}createTargetIndexes(e,t){return U.forEach(this.vn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new AT(i).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=Co(e);let a=!0;const l=new Map;return U.forEach(this.vn(t),(c=>this.Fn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Ne();const d=[];return U.forEach(l,((p,g)=>{re(RT,`Using index ${(function(ie){return`id=${ie.indexId}|cg=${ie.collectionGroup}|f=${ie.fields.map((ye=>`${ye.fieldPath}:${ye.kind}`)).join(",")}`})(p)} to execute ${Aa(t)}`);const v=(function(ie,ye){const de=ng(ye);if(de===void 0)return null;for(const Ee of Mf(ie,de.fieldPath))switch(Ee.op){case"array-contains-any":return Ee.value.arrayValue.values||[];case"array-contains":return[Ee.value]}return null})(g,p),T=(function(ie,ye){const de=new Map;for(const Ee of ca(ye))for(const R of Mf(ie,Ee.fieldPath))switch(R.op){case"==":case"in":de.set(Ee.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return de.set(Ee.fieldPath.canonicalString(),R.value),Array.from(de.values())}return null})(g,p),b=(function(ie,ye){const de=[];let Ee=!0;for(const R of ca(ye)){const w=R.kind===0?rT(ie,R.fieldPath,ie.startAt):sT(ie,R.fieldPath,ie.startAt);de.push(w.value),Ee&&(Ee=w.inclusive)}return new Xo(de,Ee)})(g,p),D=(function(ie,ye){const de=[];let Ee=!0;for(const R of ca(ye)){const w=R.kind===0?sT(ie,R.fieldPath,ie.endAt):rT(ie,R.fieldPath,ie.endAt);de.push(w.value),Ee&&(Ee=w.inclusive)}return new Xo(de,Ee)})(g,p),F=this.Mn(p,g,b),K=this.Mn(p,g,D),z=this.xn(p,g,T),ne=this.On(p.indexId,v,F,b.inclusive,K,D.inclusive,z);return U.forEach(ne,(te=>i.Z(te,t.limit).next((ie=>{ie.forEach((ye=>{const de=le.fromSegments(ye.documentKey);c.has(de)||(c=c.add(de),d.push(de))}))}))))})).next((()=>d))}return U.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=yD(et.create(e.filters,"and")).map((i=>hg(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,i,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(i.length,l.length),g=p/(t!=null?t.length:1),v=[];for(let T=0;T<p;++T){const b=t?this.Nn(t[T/g]):rf,D=this.Bn(e,b,i[T%g],a),F=this.Ln(e,b,l[T%g],c),K=d.map((z=>this.Bn(e,b,z,!0)));v.push(...this.createRange(D,F,K))}return v}Bn(e,t,i,a){const l=new pa(e,le.empty(),t,i);return a?l:l.En()}Ln(e,t,i,a){const l=new pa(e,le.empty(),t,i);return a?l.En():l}Fn(e,t){const i=new AT(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.gn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.vn(t);return U.forEach(a,(l=>this.Fn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new tt(_t.comparator),v=!1;for(const T of p.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?v=!0:g=g.add(b.field));for(const T of p.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(v?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}kn(e,t){const i=new bu;for(const a of ca(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.ln(a.kind);ma.Wt.Dt(l,c)}return i.un()}Nn(e){const t=new bu;return ma.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const i=new bu;return ma.Wt.Dt(nc(this.databaseId,t),i.ln((function(l){const c=ca(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}xn(e,t,i){if(i===null)return[];let a=[];a.push(new bu);let l=0;for(const c of ca(e)){const d=i[l++];for(const p of a)if(this.qn(t,c.fieldPath)&&ic(d))a=this.Un(a,c,d);else{const g=p.ln(c.kind);ma.Wt.Dt(d,g)}}return this.$n(a)}Mn(e,t,i){return this.xn(e,t,i.position)}$n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Un(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const p=new bu;p.seed(d.un()),ma.Wt.Dt(c,p.ln(t.kind)),l.push(p)}return l}qn(e,t){return!!e.filters.find((i=>i instanceof Ue&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Au(e),a=xo(e);return(t?i.H(rg,IDBKeyRange.bound(t,t)):i.H()).next((l=>{const c=[];return U.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(v,T){const b=T?new $u(T.sequenceNumber,new Hn(Ra(T.readTime),new le($i(T.documentKey)),T.largestBatchId)):$u.empty(),D=v.fields.map((([F,K])=>new df(_t.fromServerFormat(F),K)));return new Cf(v.indexId,v.collectionGroup,D,b)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Re(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Au(e),l=xo(e);return this.Wn(e).next((c=>a.H(rg,IDBKeyRange.bound(t,t)).next((d=>U.forEach(d,(p=>l.put(_T(p.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return U.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?U.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),U.forEach(d,(p=>this.Qn(e,a,p).next((g=>{const v=this.Gn(l,p);return g.isEqual(v)?U.resolve():this.zn(e,l,p,g,v)})))))))}))}jn(e,t,i,a){return Co(e).put(a.Rn(this.uid,this.Kn(i,t.key),t.key))}Hn(e,t,i,a){return Co(e).delete(a.An(this.uid,this.Kn(i,t.key),t.key))}Qn(e,t,i){const a=Co(e);let l=new tt(ls);return a.ee({index:pb,range:IDBKeyRange.only([i.indexId,this.uid,Tf(this.Kn(i,t))])},((c,d)=>{l=l.add(new pa(i.indexId,t,bT(d.arrayValue),bT(d.directionalValue)))})).next((()=>l))}Gn(e,t){let i=new tt(ls);const a=this.kn(t,e);if(a==null)return i;const l=ng(t);if(l!=null){const c=e.data.field(l.fieldPath);if(ic(c))for(const d of c.arrayValue.values||[])i=i.add(new pa(t.indexId,e.key,this.Nn(d),a))}else i=i.add(new pa(t.indexId,e.key,rf,a));return i}zn(e,t,i,a,l){re(RT,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,v,T,b){const D=p.getIterator(),F=g.getIterator();let K=Ro(D),z=Ro(F);for(;K||z;){let ne=!1,te=!1;if(K&&z){const ie=v(K,z);ie<0?te=!0:ie>0&&(ne=!0)}else K!=null?te=!0:ne=!0;ne?(T(z),z=Ro(F)):te?(b(K),K=Ro(D)):(K=Ro(D),z=Ro(F))}})(a,l,ls,(d=>{c.push(this.jn(e,t,i,d))}),(d=>{c.push(this.Hn(e,t,i,d))})),U.waitFor(c)}Wn(e){let t=1;return xo(e).ee({index:mb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>ls(c,d))).filter(((c,d,p)=>!d||ls(c,p[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=ls(c,e),p=ls(c,t);if(d===0)a[0]=e.En();else if(d>0&&p<0)a.push(c),a.push(c.En());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const d=a[c].An(this.uid,rf,le.empty()),p=a[c+1].An(this.uid,rf,le.empty());l.push(IDBKeyRange.bound(d,p))}return l}Jn(e,t){return ls(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(CT)}getMinOffset(e,t){return U.mapArray(this.vn(t),(i=>this.Fn(e,i).next((a=>a||me(44426))))).next(CT)}}function IT(s){return Yt(s,Wu)}function Co(s){return Yt(s,zu)}function Au(s){return Yt(s,Qg)}function xo(s){return Yt(s,ku)}function CT(s){ve(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<s.length;i++){const a=s[i].indexState.offset;Hg(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Hn(e.readTime,e.documentKey,t)}const xT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E1=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function T1(s,e,t){const i=s.store(Ei),a=s.store(Ho),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=i.ee({range:c},((v,T,b)=>(d++,b.delete())));l.push(p.next((()=>{ve(d===1,47070,{batchId:t.batchId})})));const g=[];for(const v of t.mutations){const T=hb(e,v.key.path,t.batchId);l.push(a.delete(T)),g.push(v.key)}return U.waitFor(l).next((()=>g))}function zf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw me(14731);e=s.noDocument}return JSON.stringify(e).length}dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(E1,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);class ld{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Zn={}}static wt(e,t,i,a){ve(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new ld(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return us(e).ee({index:ga,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=Lo(e),c=us(e);return c.add({}).next((d=>{ve(typeof d=="number",49019);const p=new ny(d,t,i,a),g=(function(D,F,K){const z=K.baseMutations.map((te=>Lf(D.yt,te))),ne=K.mutations.map((te=>Lf(D.yt,te)));return{userId:F,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:z,mutations:ne}})(this.serializer,this.userId,p),v=[];let T=new tt(((b,D)=>Re(b.canonicalString(),D.canonicalString())));for(const b of a){const D=hb(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),v.push(c.put(g)),v.push(l.put(D,QC))}return T.forEach((b=>{v.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),U.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return us(e).get(t).next((i=>i?(ve(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),da(this.serializer,i)):null))}Xn(e,t){return this.Zn[t]?U.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return us(e).ee({index:ga,range:a},((c,d,p)=>{d.userId===this.userId&&(ve(d.batchId>=i,47524,{Yn:i}),l=da(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=ya;return us(e).ee({index:ga,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ya],[this.userId,Number.POSITIVE_INFINITY]);return us(e).H(ga,t).next((i=>i.map((a=>da(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=mf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return Lo(e).ee({range:a},((c,d,p)=>{const[g,v,T]=c,b=$i(v);if(g===this.userId&&t.path.isEqual(b))return us(e).get(T).next((D=>{if(!D)throw me(61480,{er:c,batchId:T});ve(D.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:D.userId,batchId:T}),l.push(da(this.serializer,D))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(Re);const a=[];return t.forEach((l=>{const c=mf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Lo(e).ee({range:d},((g,v,T)=>{const[b,D,F]=g,K=$i(D);b===this.userId&&l.path.isEqual(K)?i=i.add(F):T.done()}));a.push(p)})),U.waitFor(a).next((()=>this.tr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=mf(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new tt(Re);return Lo(e).ee({range:c},((p,g,v)=>{const[T,b,D]=p,F=$i(b);T===this.userId&&i.isPrefixOf(F)?F.length===a&&(d=d.add(D)):v.done()})).next((()=>this.tr(e,d)))}tr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(us(e).get(l).next((c=>{if(c===null)throw me(35274,{batchId:l});ve(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(da(this.serializer,c))})))})),U.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return T1(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),U.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return U.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Lo(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const p=$i(l[1]);a.push(p)}else d.done()})).next((()=>{ve(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return S1(e,this.userId,t)}ir(e){return b1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ya,lastStreamToken:""}))}}function S1(s,e,t){const i=mf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Lo(s).ee({range:l,Y:!0},((d,p,g)=>{const[v,T,b]=d;v===e&&T===a&&(c=!0),g.done()})).next((()=>c))}function us(s){return Yt(s,Ei)}function Lo(s){return Yt(s,Ho)}function b1(s){return Yt(s,Ju)}class Ia{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ia(0)}static ar(){return new Ia(-1)}}class ED{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const i=new Ia(t.highestTargetId);return t.highestTargetId=i.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Se.fromTimestamp(new We(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((i=>(i.targetCount+=1,this.hr(t,i),this.cr(e,i))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Do(e).delete(t.targetId))).next((()=>this.ur(e))).next((i=>(ve(i.targetCount>0,8065),i.targetCount-=1,this.cr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Do(e).ee(((c,d)=>{const p=Nu(d);p.sequenceNumber<=t&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>U.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Do(e).ee(((i,a)=>{const l=Nu(a);t(l)}))}ur(e){return DT(e).get(Vf).next((t=>(ve(t!==null,2888),t)))}cr(e,t){return DT(e).put(Vf,t)}lr(e,t){return Do(e).put(g1(this.serializer,t))}hr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Aa(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Do(e).ee({range:a,index:db},((c,d,p)=>{const g=Nu(d);mc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=fs(e);return t.forEach((c=>{const d=pn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),U.waitFor(a)}removeMatchingKeys(e,t,i){const a=fs(e);return U.forEach(t,(l=>{const c=pn(l.path);return U.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=fs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=fs(e);let l=Ne();return a.ee({range:i,Y:!0},((c,d,p)=>{const g=$i(c[1]),v=new le(g);l=l.add(v)})).next((()=>l))}containsKey(e,t){const i=pn(t.path),a=IDBKeyRange.bound([i],[nb(i)],!1,!0);let l=0;return fs(e).ee({index:Kg,Y:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Do(e).get(t).next((i=>i?Nu(i):null))}}function Do(s){return Yt(s,Go)}function DT(s){return Yt(s,_a)}function fs(s){return Yt(s,Ko)}const VT="LruGarbageCollector",A1=1048576;function NT([s,e],[t,i]){const a=Re(s,t);return a===0?Re(e,i):a}class TD{constructor(e){this.Pr=e,this.buffer=new tt(NT),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();NT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class w1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){re(VT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Is(t)?re(VT,"Ignoring IndexedDB error during garbage collection: ",t):await Rs(t)}await this.Ar(3e5)}))}}class SD{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return U.resolve(Cn.ce);const i=new TD(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(xT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xT):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(g=Date.now(),No()<=qe.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function R1(s,e){return new SD(s,e)}class bD{constructor(e,t){this.db=e,this.garbageCollector=R1(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((i,a)=>t(a)))}addReference(e,t,i){return sf(e,i)}removeReference(e,t,i){return sf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return sf(e,t)}wr(e,t){return(function(a,l){let c=!1;return b1(a).te((d=>S1(a,d,l).next((p=>(p&&(c=!0),U.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,d)=>{if(d<=t){const p=this.wr(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Se.min()),fs(e).delete((function(T){return[0,pn(T.path)]})(c)))))}));a.push(p)}})).next((()=>U.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return sf(e,t)}yr(e,t){const i=fs(e);let a,l=Cn.ce;return i.ee({index:Kg},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==Cn.ce&&t(new le($i(a)),l),l=g,a=p):l=Cn.ce})).next((()=>{l!==Cn.ce&&t(new le($i(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sf(s,e){return fs(s).put((function(i,a){return{targetId:0,path:pn(i.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}class I1{constructor(){this.changes=new Ir((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?U.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class AD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return la(e).put(i)}removeEntry(e,t,i){return la(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Uf(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.br(e,i))))}getEntry(e,t){let i=Tt.newInvalidDocument(t);return la(e).ee({index:pf,range:IDBKeyRange.only(wu(t))},((a,l)=>{i=this.Sr(t,l)})).next((()=>i))}Dr(e,t){let i={size:0,document:Tt.newInvalidDocument(t)};return la(e).ee({index:pf,range:IDBKeyRange.only(wu(t))},((a,l)=>{i={document:this.Sr(t,l),size:zf(l)}})).next((()=>i))}getEntries(e,t){let i=qn();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);i=i.insert(a,c)})).next((()=>i))}vr(e,t){let i=qn(),a=new lt(le.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Sr(l,c);i=i.insert(l,d),a=a.insert(l,zf(c))})).next((()=>({documents:i,Fr:a})))}Cr(e,t,i){if(t.isEmpty())return U.resolve();let a=new tt(PT);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(wu(a.first()),wu(a.last())),c=a.getIterator();let d=c.getNext();return la(e).ee({index:pf,range:l},((p,g,v)=>{const T=le.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&PT(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?v.j(wu(d)):v.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Uf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return la(e).H(IDBKeyRange.bound(d,p,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let v=qn();for(const T of g){const b=this.Sr(le.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(gc(t,b)||a.has(b.key))&&(v=v.insert(b.key,b))}return v}))}getAllFromCollectionGroup(e,t,i,a){let l=qn();const c=MT(t,i),d=MT(t,Hn.max());return la(e).ee({index:fb,range:IDBKeyRange.bound(c,d,!0)},((p,g,v)=>{const T=this.Sr(le.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new wD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return OT(e).get(ig).next((t=>(ve(!!t,20021),t)))}br(e,t){return OT(e).put(ig,t)}Sr(e,t){if(t){const i=cD(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Se.min())))return i}return Tt.newInvalidDocument(e)}}function C1(s){return new AD(s)}class wD extends I1{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Ir((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new tt(((l,c)=>Re(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=gT(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=zf(p);i+=g-d.size,t.push(this.Mr.addEntry(e,l,p))}else if(i-=d.size,this.trackRemovals){const p=gT(this.Mr.serializer,c.convertToNoDocument(Se.min()));t.push(this.Mr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,i)),U.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((i=>(this.Or.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:i,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function OT(s){return Yt(s,Zu)}function la(s){return Yt(s,Df)}function wu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function MT(s,e){const t=e.documentKey.path.toArray();return[s,Uf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function PT(s,e){const t=s.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Re(t[l],i[l]),a)return a;return a=Re(t.length,i.length),a||(a=Re(t[t.length-2],i[i.length-2]),a||Re(t[t.length-1],i[i.length-1]))}class RD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class x1{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Fu(i.mutation,a,xn.empty(),We.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ne()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ne()){const a=Xi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Du();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Xi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ne())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=qn();const c=ju(),d=(function(){return ju()})();return t.forEach(((p,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Cr)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Fu(v.mutation,g,v.mutation.getFieldMask(),We.now())):c.set(g.key,xn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new RD(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=ju();let a=new lt(((c,d)=>c-d)),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=i.get(p)||xn.empty();v=d.applyToLocalView(g,v),i.set(p,v);const T=(a.get(d.batchId)||Ne()).add(p);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,T=Gb();v.forEach((b=>{if(!l.has(b)){const D=Jb(t.get(b),i.get(b));D!==null&&T.set(b,D),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return U.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return Dx(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):U.resolve(Xi());let d=Fo,p=l;return c.next((g=>U.forEach(g,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?U.resolve():this.remoteDocumentCache.getEntry(e,v).next((b=>{p=p.insert(v,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ne()))).next((v=>({batchId:d,changes:Hb(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next((i=>{let a=Du();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Du();return this.indexManager.getCollectionParents(e,l).next((d=>U.forEach(d,(p=>{const g=(function(T,b){return new cl(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((v=>{v.forEach(((T,b)=>{c=c.insert(T,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,Tt.newInvalidDocument(v)))}));let d=Du();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Fu(v.mutation,g,xn.empty(),We.now()),gc(t,g)&&(d=d.insert(p,g))})),d}))}}class ID{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return U.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:vn(a.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:y1(a.bundledQuery),readTime:vn(a.readTime)}})(t)),U.resolve()}}class CD{constructor(){this.overlays=new lt(le.comparator),this.Lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Xi();return U.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),U.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),U.resolve()}getOverlaysForCollection(e,t,i){const a=Xi(),l=t.length+1,c=new le(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return U.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new lt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=Xi(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Xi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return U.resolve(d)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new ry(t,i));let l=this.Lr.get(t);l===void 0&&(l=Ne(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}class xD{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}class uy{constructor(){this.kr=new tt(Zt.Kr),this.qr=new tt(Zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Zt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Zt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new le(new Qe([])),i=new Zt(t,e),a=new Zt(t,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new le(new Qe([])),i=new Zt(t,e),a=new Zt(t,e+1);let l=Ne();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Zt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Zt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return le.comparator(e.key,t.key)||Re(e.Hr,t.Hr)}static Ur(e,t){return Re(e.Hr,t.Hr)||le.comparator(e.key,t.key)}}class DD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new tt(Zt.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ny(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Jr=this.Jr.add(new Zt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return U.resolve(c)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return U.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ya:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Zt(t,0),a=new Zt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),U.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(Re);return t.forEach((a=>{const l=new Zt(a,0),c=new Zt(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{i=i.add(d.Hr)}))})),U.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;le.isDocumentKey(l)||(l=l.child(""));const c=new Zt(new le(l),0);let d=new tt(Re);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)}),c),U.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ve(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return U.forEach(t.mutations,(a=>{const l=new Zt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Zt(t,0),a=this.Jr.firstAfterOrEqual(i);return U.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class VD{constructor(e){this.ti=e,this.docs=(function(){return new lt(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return U.resolve(i?i.document.mutableCopy():Tt.newInvalidDocument(t))}getEntries(e,t){let i=qn();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Tt.newInvalidDocument(a))})),U.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=qn();const c=t.path,d=new le(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Hg(ab(v),i)<=0||(a.has(v.key)||gc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return U.resolve(l)}getAllFromCollectionGroup(e,t,i,a){me(9500)}ni(e,t){return U.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new ND(this)}getSize(e){return U.resolve(this.size)}}class ND extends I1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),U.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class OD{constructor(e){this.persistence=e,this.ri=new Ir((t=>Aa(t)),mc),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.ii=0,this.si=new uy,this.targetCount=0,this.oi=Ia._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),U.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ia(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.lr(t),U.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),U.waitFor(l).next((()=>a))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return U.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),U.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),U.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return U.resolve(i)}containsKey(e,t){return U.resolve(this.si.containsKey(t))}}class cy{constructor(e,t){this._i={},this.overlays={},this.ai=new Cn(0),this.ui=!1,this.ui=!0,this.ci=new xD,this.referenceDelegate=e(this),this.li=new OD(this),this.indexManager=new _D,this.remoteDocumentCache=(function(a){return new VD(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new p1(t),this.Pi=new ID(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new DD(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){re("MemoryPersistence","Starting transaction:",e);const a=new MD(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return U.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class MD extends lb{constructor(e){super(),this.currentSequenceNumber=e}}class ud{constructor(e){this.persistence=e,this.Ri=new uy,this.Ai=null}static Vi(e){return new ud(e)}get di(){if(this.Ai)return this.Ai;throw me(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),U.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,(i=>{const a=le.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Se.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Bf{constructor(e,t){this.persistence=e,this.fi=new Ir((i=>pn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=R1(this,t)}static Vi(e,t){return new Bf(e,t)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return U.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?U.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),U.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yf(e.data.value)),t}wr(e,t,i){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return U.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class PD{constructor(e){this.serializer=e}k(e,t,i,a){const l=new Jf("createOrUpgrade",t);i<1&&a>=1&&((function(p){p.createObjectStore(dc)})(e),(function(p){p.createObjectStore(Ju,{keyPath:KC}),p.createObjectStore(Ei,{keyPath:K0,autoIncrement:!0}).createIndex(ga,Q0,{unique:!0}),p.createObjectStore(Ho)})(e),LT(e),(function(p){p.createObjectStore(ha)})(e));let c=U.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(Ko),p.deleteObjectStore(Go),p.deleteObjectStore(_a)})(e),LT(e)),c=c.next((()=>(function(p){const g=p.store(_a),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return g.put(Vf,v)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(Ei).H().next((T=>{p.deleteObjectStore(Ei),p.createObjectStore(Ei,{keyPath:K0,autoIncrement:!0}).createIndex(ga,Q0,{unique:!0});const b=g.store(Ei),D=T.map((F=>b.put(F)));return U.waitFor(D)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(Qo,{keyPath:tx})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.gi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(Zu)})(e),this.pi(l))))),i<7&&a>=7&&(c=c.next((()=>this.yi(l)))),i<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.bi(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(Wf,{keyPath:nx})})(e),(function(p){p.createObjectStore(ed,{keyPath:ix})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(td,{keyPath:cx});g.createIndex(sg,hx,{unique:!1}),g.createIndex(gb,fx,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(Df,{keyPath:YC});g.createIndex(pf,$C),g.createIndex(fb,XC)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(ha)))),i<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(Qg,{keyPath:rx,autoIncrement:!0}).createIndex(rg,sx,{unique:!1}),p.createObjectStore(ku,{keyPath:ax}).createIndex(mb,ox,{unique:!1}),p.createObjectStore(zu,{keyPath:lx}).createIndex(pb,ux,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(ku).clear()})).next((()=>{t.objectStore(zu).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(Yg,{keyPath:dx})})(e)}))),i<18&&a>=18&&BS()&&(c=c.next((()=>{t.objectStore(ku).clear()})).next((()=>{t.objectStore(zu).clear()}))),c}pi(e){let t=0;return e.store(ha).ee(((i,a)=>{t+=zf(a)})).next((()=>{const i={byteSize:t};return e.store(Zu).put(ig,i)}))}gi(e){const t=e.store(Ju),i=e.store(Ei);return t.H().next((a=>U.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,ya],[l.userId,l.lastAcknowledgedBatchId]);return i.H(ga,c).next((d=>U.forEach(d,(p=>{ve(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=da(this.serializer,p);return T1(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(Ko),i=e.store(ha);return e.store(_a).get(Vf).next((a=>{const l=[];return i.ee(((c,d)=>{const p=new Qe(c),g=(function(T){return[0,pn(T)]})(p);l.push(t.get(g).next((v=>v?U.resolve():(T=>t.put({targetId:0,path:pn(T),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>U.waitFor(l)))}))}wi(e,t){e.createObjectStore(Wu,{keyPath:ex});const i=t.store(Wu),a=new ly,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:pn(p)})}};return t.store(ha).ee({Y:!0},((c,d)=>{const p=new Qe(c);return l(p.popLast())})).next((()=>t.store(Ho).ee({Y:!0},(([c,d,p],g)=>{const v=$i(d);return l(v.popLast())}))))}bi(e){const t=e.store(Go);return t.ee(((i,a)=>{const l=Nu(a),c=g1(this.serializer,l);return t.put(c)}))}Si(e,t){const i=t.store(ha),a=[];return i.ee(((l,c)=>{const d=t.store(Df),p=(function(T){return T.document?new le(Qe.fromString(T.document.name).popFirst(5)):T.noDocument?le.fromSegments(T.noDocument.path):T.unknownDocument?le.fromSegments(T.unknownDocument.path):me(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>U.waitFor(a)))}Di(e,t){const i=t.store(Ei),a=C1(this.serializer),l=new cy(ud.Vi,this.serializer.yt);return i.H().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??Ne();da(this.serializer,p).keys().forEach((v=>g=g.add(v))),d.set(p.userId,g)})),U.forEach(d,((p,g)=>{const v=new fn(g),T=od.wt(this.serializer,v),b=l.getIndexManager(v),D=ld.wt(v,this.serializer,b,l.referenceDelegate);return new x1(a,D,T,b).recalculateAndSaveOverlaysForDocumentKeys(new ag(t,Cn.ce),p).next()}))}))}}function LT(s){s.createObjectStore(Ko,{keyPath:ZC}).createIndex(Kg,WC,{unique:!0}),s.createObjectStore(Go,{keyPath:"targetId"}).createIndex(db,JC,{unique:!0}),s.createObjectStore(_a)}const cs="IndexedDbPersistence",Lp=18e5,Up=5e3,kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",LD="main";class hy{constructor(e,t,i,a,l,c,d,p,g,v,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ci=l,this.window=c,this.document=d,this.Fi=g,this.Mi=v,this.xi=T,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=b=>Promise.resolve(),!hy.v())throw new ae($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bD(this,a),this.Ki=t+LD,this.serializer=new p1(p),this.qi=new _s(this.Ki,this.xi,new PD(this.serializer)),this.ci=new fD,this.li=new ED(this.referenceDelegate,this.serializer),this.remoteDocumentCache=C1(this.serializer),this.Pi=new hD,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&Ct(cs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae($.FAILED_PRECONDITION,kp);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Cn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>af(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Is(e))return re(cs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(cs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Ru(e).get(wo).next((t=>U.resolve(this.Xi(t))))}Yi(e){return af(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Lp)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Yt(t,Qo);return i.H().next((a=>{const l=this.ns(a,Lp),c=a.filter((d=>l.indexOf(d)===-1));return U.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?U.resolve(!0):Ru(e).get(wo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Up)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ae($.FAILED_PRECONDITION,kp);return!1}}return!(!this.networkEnabled||!this.inForeground)||af(e).H().next((i=>this.ns(i,Up).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&re(cs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[dc,Qo],(e=>{const t=new ag(e,Cn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((i=>this.ts(i.updateTimeMs,t)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>af(e).H().next((t=>this.ns(t,Lp).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return ld.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vD(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return od.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,i){re(cs,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?gx:p===17?Eb:p===16?px:p===15?$g:p===14?vb:p===13?_b:p===12?mx:p===11?yb:void me(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(d=>(c=new ag(d,this.ai?this.ai.next():Cn.ce),t==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw Ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ae($.FAILED_PRECONDITION,ob);return i(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ps(e){return Ru(e).get(wo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Up)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae($.FAILED_PRECONDITION,kp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ru(e).put(wo,t)}static v(){return _s.v()}Ji(e){const t=Ru(e);return t.get(wo).next((i=>this.Xi(i)?(re(cs,"Releasing primary lease."),t.delete(wo)):U.resolve()))}ts(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Ct(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;zS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return re(cs,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ct(cs,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Ct("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ru(s){return Yt(s,dc)}function af(s){return Yt(s,Qo)}function D1(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class fy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=Ne(),a=Ne();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new fy(e,t.fromCache,i,a)}}class UD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class V1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return zS()?8:ub(Bo())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new UD;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(No()<=qe.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(No()<=qe.DEBUG&&re("QueryEngine","Query:",Oo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(No()<=qe.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):U.resolve())}gs(e,t){if(aT(t))return U.resolve(null);let i=Fn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=dg(t,null,"F"),i=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Ne(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,dg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,i,a){return aT(t)||a.isEqual(Se.min())?U.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,a)?U.resolve(null):(No()<=qe.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Oo(t)),this.Ds(e,c,t,sb(a,Fo)).next((d=>d)))}))}bs(e,t){let i=new tt(jb(e));return t.forEach(((a,l)=>{gc(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return No()<=qe.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Oo(t)),this.fs.getDocumentsMatchingQuery(e,t,Hn.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const dy="LocalStore",kD=3e8;class zD{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new lt(Re),this.Fs=new Ir((l=>Aa(l)),mc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function N1(s,e,t,i){return new zD(s,e,t,i)}async function O1(s,e){const t=ge(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=Ne();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function BD(s,e){const t=ge(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const T=g.batch,b=T.keys();let D=U.resolve();return b.forEach((F=>{D=D.next((()=>v.getEntry(p,F))).next((K=>{const z=g.docVersions.get(F);ve(z!==null,48541),K.version.compareTo(z)<0&&(T.applyToRemoteDocument(K,g),K.isValidDocument()&&(K.setReadTime(g.commitVersion),v.addEntry(K)))}))})),D.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Ne();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function M1(s){const e=ge(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function qD(s,e){const t=ge(s),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const d=[];e.targetChanges.forEach(((v,T)=>{const b=a.get(T);if(!b)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,T))));let D=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?D=D.withResumeToken(xt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):v.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(v.resumeToken,i)),a=a.insert(T,D),(function(K,z,ne){return K.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=kD?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(b,D,v)&&d.push(t.li.updateTargetData(l,D))}));let p=qn(),g=Ne();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(jD(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!i.isEqual(Se.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(v)}return U.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=a,l)))}function jD(s,e,t){let i=Ne(),a=Ne();return t.forEach((l=>i=i.add(l))),e.getEntries(s,i).next((l=>{let c=qn();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):re(dy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function FD(s,e){const t=ge(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ya),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function qf(s,e){const t=ge(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,U.resolve(a)):t.li.allocateTargetId(i).next((c=>(a=new vr(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function tl(s,e,t){const i=ge(s),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Is(c))throw c;re(dy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function Tg(s,e,t){const i=ge(s);let a=Se.min(),l=Ne();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const T=ge(p),b=T.Fs.get(v);return b!==void 0?U.resolve(T.vs.get(b)):T.li.getTargetData(g,v)})(i,c,Fn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:Se.min(),t?l:Ne()))).next((d=>(U1(i,qb(e),d),{documents:d,ks:l})))))}function P1(s,e){const t=ge(s),i=ge(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,e).next((c=>c?c.target:null))))}function L1(s,e){const t=ge(s),i=t.Ms.get(e)||Se.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,sb(i,Fo),Number.MAX_SAFE_INTEGER))).then((a=>(U1(t,e,a),a)))}function U1(s,e,t){let i=s.Ms.get(e)||Se.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),s.Ms.set(e,i)}const k1="firestore_clients";function UT(s,e){return`${k1}_${s}_${e}`}const z1="firestore_mutations";function kT(s,e,t){let i=`${z1}_${s}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const B1="firestore_targets";function zp(s,e){return`${B1}_${s}_${e}`}const Yi="SharedClientState";class jf{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static $s(e,t,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ae(a.error.code,a.error.message))),c?new jf(e,t,a.state,l):(Ct(Yi,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hu{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static $s(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new ae(i.error.code,i.error.message))),l?new Hu(e,i.state,a):(Ct(Yi,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ff{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=ey();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=cb(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new Ff(e,l):(Ct(Yi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class my{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new my(t.clientId,t.onlineState):(Ct(Yi,`Failed to parse online state: ${e}`),null)}}class Sg{constructor(){this.activeTargetIds=ey()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bp{constructor(e,t,i,a,l){this.window=e,this.Ci=t,this.persistenceKey=i,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new lt(Re),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=UT(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Sg),this.eo=new RegExp(`^${k1}_${c}_([^_]*)$`),this.no=new RegExp(`^${z1}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${B1}_${c}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const i of e){if(i===this.zs)continue;const a=this.getItem(UT(this.persistenceKey,i));if(a){const l=Ff.$s(i,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const i=this._o(t);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,i){this.co(e,t,i),this.lo(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(zp(this.persistenceKey,e));if(a){const l=Hu.$s(e,a);l&&(i=l.state)}}return t&&this.ho.Qs(e),this.oo(),i}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zp(this.persistenceKey,e))}updateQueryState(e,t,i){this.Po(e,t,i)}handleUserChange(e,t,i){t.forEach((a=>{this.lo(a)})),this.currentUser=e,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return re(Yi,"READ",e,t),t}setItem(e,t){re(Yi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){re(Yi,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(re(Yi,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const i=this.Eo(t.key);return this.Ro(i,null)}{const i=this.Ao(t.key,t.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(t.key)){if(t.newValue!==null){const i=this.Vo(t.key,t.newValue);if(i)return this.mo(i)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(t.key===this.io){if(t.newValue!==null){const i=this._o(t.newValue);if(i)return this.ao(i)}}else if(t.key===this.Ys){const i=(function(l){let c=Cn.ce;if(l!=null)try{const d=JSON.parse(l);ve(typeof d=="number",30636,{yo:l}),c=d}catch(d){Ct(Yi,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);i!==Cn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this.so){const i=this.wo(t.newValue);await Promise.all(i.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,i){const a=new jf(this.currentUser,e,t,i),l=kT(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=kT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,i){const a=zp(this.persistenceKey,e),l=new Hu(e,t,i);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const i=this.Eo(e);return Ff.$s(i,t)}Vo(e,t){const i=this.no.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return jf.$s(new fn(l),a,t)}fo(e,t){const i=this.ro.exec(e),a=Number(i[1]);return Hu.$s(a,t)}_o(e){return my.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);re(Yi,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const i=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(i),c=[],d=[];return l.forEach((p=>{a.has(p)||c.push(p)})),a.forEach((p=>{l.has(p)||d.push(p)})),this.syncEngine.Co(c,d).then((()=>{this.Js=i}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=ey();return e.forEach(((i,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class q1{constructor(){this.vo=new Sg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Sg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HD{Mo(e){}shutdown(){}}const zT="ConnectivityMonitor";class BT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){re(zT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){re(zT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let of=null;function bg(){return of===null?of=(function(){return 268435456+Math.round(2147483648*Math.random())})():of++,"0x"+of.toString(16)}const qp="RestConnection",GD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class KD{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===Nf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=bg(),d=this.Qo(e,t.toUriEncodedString());re(qp,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(d),v=Bg(g);return this.zo(e,d,p,i,v).then((T=>(re(qp,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw qo(qp,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T}))}jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ul})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=GD[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class QD{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const un="WebChannelConnection",Iu=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class ko extends KD{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ko.c_){const e=WS();Iu(e,ZS.STAT_EVENT,(t=>{t.stat===eg.PROXY?re(un,"STAT_EVENT: detected buffering proxy"):t.stat===eg.NOPROXY&&re(un,"STAT_EVENT: detected no buffering proxy")})),ko.c_=!0}}zo(e,t,i,a,l){const c=bg();return new Promise(((d,p)=>{const g=new XS;g.setWithCredentials(!0),g.listenOnce(JS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ff.NO_ERROR:const T=g.getResponseJson();re(un,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case ff.TIMEOUT:re(un,`RPC '${e}' ${c} timed out`),p(new ae($.DEADLINE_EXCEEDED,"Request time out"));break;case ff.HTTP_ERROR:const b=g.getStatus();if(re(un,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const F=D?.error;if(F&&F.status&&F.message){const K=(function(ne){const te=ne.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(te)>=0?te:$.UNKNOWN})(F.status);p(new ae(K,F.message))}else p(new ae($.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ae($.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{re(un,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);re(un,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=bg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=l.join("");re(un,`Creating RPC '${e}' stream ${a}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let T=!1,b=!1;const D=new QD({Ho:F=>{b?re(un,`Not sending because RPC '${e}' stream ${a} is closed:`,F):(T||(re(un,`Opening RPC '${e}' stream ${a} transport.`),v.open(),T=!0),re(un,`RPC '${e}' stream ${a} sending:`,F),v.send(F))},Jo:()=>v.close()});return Iu(v,xu.EventType.OPEN,(()=>{b||(re(un,`RPC '${e}' stream ${a} transport opened.`),D.i_())})),Iu(v,xu.EventType.CLOSE,(()=>{b||(b=!0,re(un,`RPC '${e}' stream ${a} transport closed`),D.o_(),this.E_(v))})),Iu(v,xu.EventType.ERROR,(F=>{b||(b=!0,qo(un,`RPC '${e}' stream ${a} transport errored. Name:`,F.name,"Message:",F.message),D.o_(new ae($.UNAVAILABLE,"The operation could not be completed")))})),Iu(v,xu.EventType.MESSAGE,(F=>{if(!b){const K=F.data[0];ve(!!K,16349);const z=K,ne=z?.error||z[0]?.error;if(ne){re(un,`RPC '${e}' stream ${a} received error:`,ne);const te=ne.status;let ie=(function(Ee){const R=Bt[Ee];if(R!==void 0)return e1(R)})(te),ye=ne.message;te==="NOT_FOUND"&&ye.includes("database")&&ye.includes("does not exist")&&ye.includes(this.databaseId.database)&&qo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ie===void 0&&(ie=$.INTERNAL,ye="Unknown error status: "+te+" with message "+ne.message),b=!0,D.o_(new ae(ie,ye)),v.close()}else re(un,`RPC '${e}' stream ${a} received:`,K),D.__(K)}})),ko.u_(),setTimeout((()=>{D.s_()}),0),D}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return eb()}}function YD(s){return new ko(s)}function j1(){return typeof window<"u"?window:null}function Sf(){return typeof document<"u"?document:null}function cd(s){return new eD(s,!0)}ko.c_=!1;class F1{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const qT="PersistentStream";class H1{constructor(e,t,i,a,l,c,d,p){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new F1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Ct(t.toString()),Ct("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new ae($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(qT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(re(qT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $D extends H1{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=iD(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?vn(c.readTime):Se.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=gg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Of(p)?{documents:l1(l,p)}:{query:u1(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=i1(l,c.resumeToken);const g=mg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Se.min())>0){d.readTime=el(l,c.snapshotVersion.toTimestamp());const g=mg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=sD(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=gg(this.serializer),t.removeTarget=e,this.K_(t)}}class XD extends H1{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=rD(e.writeResults,e.commitTime),i=vn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=gg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Lf(this.serializer,i)))};this.K_(t)}}class JD{}class ZD extends JD{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ae($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,pg(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae($.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,pg(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae($.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function WD(s,e,t,i){return new ZD(s,e,t,i)}class eV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ct(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ca="RemoteStore";class tV{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{Va(this)&&(re(Ca,"Restarting streams for network reachability change."),await(async function(p){const g=ge(p);g.Ea.add(4),await Ec(g),g.Va.set("Unknown"),g.Ea.delete(4),await hd(g)})(this))}))})),this.Va=new eV(i,a)}}async function hd(s){if(Va(s))for(const e of s.Ra)await e(!0)}async function Ec(s){for(const e of s.Ra)await e(!1)}function fd(s,e){const t=ge(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yy(t)?gy(t):dl(t).O_()&&py(t,e))}function nl(s,e){const t=ge(s),i=dl(t);t.Ia.delete(e),i.O_()&&G1(t,e),t.Ia.size===0&&(i.O_()?i.L_():Va(t)&&t.Va.set("Unknown"))}function py(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dl(s).Z_(e)}function G1(s,e){s.da.$e(e),dl(s).X_(e)}function gy(s){s.da=new Xx({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),dl(s).start(),s.Va.ua()}function yy(s){return Va(s)&&!dl(s).x_()&&s.Ia.size>0}function Va(s){return ge(s).Ea.size===0}function K1(s){s.da=void 0}async function nV(s){s.Va.set("Online")}async function iV(s){s.Ia.forEach(((e,t)=>{py(s,e)}))}async function rV(s,e){K1(s),yy(s)?(s.Va.ha(e),gy(s)):s.Va.set("Unknown")}async function sV(s,e,t){if(s.Va.set("Online"),e instanceof n1&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.da.removeTarget(d))})(s,e)}catch(i){re(Ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Hf(s,i)}else if(e instanceof Ef?s.da.Xe(e):e instanceof t1?s.da.st(e):s.da.tt(e),!t.isEqual(Se.min()))try{const i=await M1(s.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(xt.EMPTY_BYTE_STRING,v.snapshotVersion)),G1(l,p);const T=new vr(v.target,p,g,v.sequenceNumber);py(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(s,t)}catch(i){re(Ca,"Failed to raise snapshot:",i),await Hf(s,i)}}async function Hf(s,e,t){if(!Is(e))throw e;s.Ea.add(1),await Ec(s),s.Va.set("Offline"),t||(t=()=>M1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{re(Ca,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await hd(s)}))}function Q1(s,e){return e().catch((t=>Hf(s,t,e)))}async function fl(s){const e=ge(s),t=bs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ya;for(;aV(e);)try{const a=await FD(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,oV(e,a)}catch(a){await Hf(e,a)}Y1(e)&&$1(e)}function aV(s){return Va(s)&&s.Ta.length<10}function oV(s,e){s.Ta.push(e);const t=bs(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function Y1(s){return Va(s)&&!bs(s).x_()&&s.Ta.length>0}function $1(s){bs(s).start()}async function lV(s){bs(s).ra()}async function uV(s){const e=bs(s);for(const t of s.Ta)e.ea(t.mutations)}async function cV(s,e,t){const i=s.Ta.shift(),a=iy.from(i,e,t);await Q1(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await fl(s)}async function hV(s,e){e&&bs(s).Y_&&await(async function(i,a){if((function(c){return Qx(c)&&c!==$.ABORTED})(a.code)){const l=i.Ta.shift();bs(i).B_(),await Q1(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await fl(i)}})(s,e),Y1(s)&&$1(s)}async function jT(s,e){const t=ge(s);t.asyncQueue.verifyOperationInProgress(),re(Ca,"RemoteStore received new credentials");const i=Va(t);t.Ea.add(3),await Ec(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hd(t)}async function Ag(s,e){const t=ge(s);e?(t.Ea.delete(2),await hd(t)):e||(t.Ea.add(2),await Ec(t),t.Va.set("Unknown"))}function dl(s){return s.ma||(s.ma=(function(t,i,a){const l=ge(t);return l.sa(),new $D(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:nV.bind(null,s),Yo:iV.bind(null,s),t_:rV.bind(null,s),J_:sV.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),yy(s)?gy(s):s.Va.set("Unknown")):(await s.ma.stop(),K1(s))}))),s.ma}function bs(s){return s.fa||(s.fa=(function(t,i,a){const l=ge(t);return l.sa(),new XD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:lV.bind(null,s),t_:hV.bind(null,s),ta:uV.bind(null,s),na:cV.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await fl(s)):(await s.fa.stop(),s.Ta.length>0&&(re(Ca,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class _y{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new _y(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vy(s,e){if(Ct("AsyncQueue",`${e}: ${s}`),Is(s))return new ae($.UNAVAILABLE,`${e}: ${s}`);throw s}class zo{static emptySet(e){return new zo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||le.comparator(t.key,i.key):(t,i)=>le.comparator(t.key,i.key),this.keyedMap=Du(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new zo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class FT{constructor(){this.ga=new lt(le.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):me(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class il{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new il(e,t,zo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class fV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class dV{constructor(){this.queries=HT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=ge(t),l=a.queries;a.queries=HT(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(i)}))})(this,new ae($.ABORTED,"Firestore shutting down"))}}function HT(){return new Ir((s=>Bb(s)),rd)}async function Ey(s,e){const t=ge(s);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new fV,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=vy(c,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Sy(t)}async function Ty(s,e){const t=ge(s),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function mV(s,e){const t=ge(s);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(a)&&(i=!0);c.wa=a}}i&&Sy(t)}function pV(s,e,t){const i=ge(s),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function Sy(s){s.Ca.forEach((e=>{e.next()}))}var wg,GT;(GT=wg||(wg={})).Ma="default",GT.Cache="cache";class by{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new il(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wg.Cache}}class X1{constructor(e){this.key=e}}class J1{constructor(e){this.key=e}}class gV{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ne(),this.mutatedKeys=Ne(),this.eu=jb(e),this.tu=new zo(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new FT,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,T)=>{const b=a.get(v),D=gc(this.query,T)?T:null,F=!!b&&this.mutatedKeys.has(b.key),K=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let z=!1;b&&D?b.data.isEqual(D.data)?F!==K&&(i.track({type:3,doc:D}),z=!0):this.su(b,D)||(i.track({type:2,doc:D}),z=!0,(p&&this.eu(D,p)>0||g&&this.eu(D,g)<0)&&(d=!0)):!b&&D?(i.track({type:0,doc:D}),z=!0):b&&!D&&(i.track({type:1,doc:b}),z=!0,(p||g)&&(d=!0)),z&&(D?(c=c.add(D),l=K?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:c,iu:i,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,T)=>(function(D,F){const K=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Vt:z})}};return K(D)-K(F)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new il(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new FT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ne(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new J1(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new X1(i))})),t}cu(e){this.Za=e.ks,this.Ya=Ne();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ml="SyncEngine";class yV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class _V{constructor(e){this.key=e,this.hu=!1}}class vV{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ir((d=>Bb(d)),rd),this.Iu=new Map,this.Eu=new Set,this.Ru=new lt(le.comparator),this.Au=new Map,this.Vu=new uy,this.du={},this.mu=new Map,this.fu=Ia.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EV(s,e,t=!0){const i=dd(s);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await Z1(i,e,t,!0),a}async function TV(s,e){const t=dd(s);await Z1(t,e,!0,!1)}async function Z1(s,e,t,i){const a=await qf(s.localStore,Fn(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await Ay(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&fd(s.remoteStore,a),d}async function Ay(s,e,t,i,a){s.pu=(T,b,D)=>(async function(K,z,ne,te){let ie=z.view.ru(ne);ie.Ss&&(ie=await Tg(K.localStore,z.query,!1).then((({documents:R})=>z.view.ru(R,ie))));const ye=te&&te.targetChanges.get(z.targetId),de=te&&te.targetMismatches.get(z.targetId)!=null,Ee=z.view.applyChanges(ie,K.isPrimaryClient,ye,de);return Rg(K,z.targetId,Ee.au),Ee.snapshot})(s,T,b,D);const l=await Tg(s.localStore,e,!0),c=new gV(e,l.ks),d=c.ru(l.documents),p=vc.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",a),g=c.applyChanges(d,s.isPrimaryClient,p);Rg(s,t,g.au);const v=new yV(e,t,c);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),g.snapshot}async function SV(s,e,t){const i=ge(s),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!rd(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await tl(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&nl(i.remoteStore,a.targetId),rl(i,a.targetId)})).catch(Rs)):(rl(i,a.targetId),await tl(i.localStore,a.targetId,!0))}async function bV(s,e){const t=ge(s),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),nl(t.remoteStore,i.targetId))}async function AV(s,e,t){const i=Cy(s);try{const a=await(function(c,d){const p=ge(c),g=We.now(),v=d.reduce(((D,F)=>D.add(F.key)),Ne());let T,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let F=qn(),K=Ne();return p.xs.getEntries(D,v).next((z=>{F=z,F.forEach(((ne,te)=>{te.isValidDocument()||(K=K.add(ne))}))})).next((()=>p.localDocuments.getOverlayedDocuments(D,F))).next((z=>{T=z;const ne=[];for(const te of d){const ie=Gx(te,T.get(te.key).overlayedDocument);ie!=null&&ne.push(new Cr(te.key,ie,Db(ie.value.mapValue),Wt.exists(!0)))}return p.mutationQueue.addMutationBatch(D,g,ne,d)})).next((z=>{b=z;const ne=z.applyToLocalDocumentSet(T,K);return p.documentOverlayCache.saveOverlays(D,z.batchId,ne)}))})).then((()=>({batchId:b.batchId,changes:Hb(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new lt(Re)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(i,a.batchId,t),await xs(i,a.changes),await fl(i.remoteStore)}catch(a){const l=vy(a,"Failed to persist write");t.reject(l)}}async function W1(s,e){const t=ge(s);try{const i=await qD(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(ve(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?ve(c.hu,14607):a.removedDocuments.size>0&&(ve(c.hu,42227),c.hu=!1))})),await xs(t,i,e)}catch(i){await Rs(i)}}function KT(s,e,t){const i=ge(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=ge(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,T)=>{for(const b of T.ba)b.va(d)&&(g=!0)})),g&&Sy(p)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wV(s,e,t){const i=ge(s);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new lt(le.comparator);c=c.insert(l,Tt.newNoDocument(l,Se.min()));const d=Ne().add(l),p=new _c(Se.min(),new Map,new lt(Re),c,d);await W1(i,p),i.Ru=i.Ru.remove(l),i.Au.delete(e),Iy(i)}else await tl(i.localStore,e,!1).then((()=>rl(i,e,t))).catch(Rs)}async function RV(s,e){const t=ge(s),i=e.batch.batchId;try{const a=await BD(t.localStore,e);Ry(t,i,null),wy(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await xs(t,a)}catch(a){await Rs(a)}}async function IV(s,e,t){const i=ge(s);try{const a=await(function(c,d){const p=ge(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((T=>(ve(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(i.localStore,e);Ry(i,e,t),wy(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await xs(i,a)}catch(a){await Rs(a)}}function wy(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function Ry(s,e,t){const i=ge(s);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function rl(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||eA(s,i)}))}function eA(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(nl(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),Iy(s))}function Rg(s,e,t){for(const i of t)i instanceof X1?(s.Vu.addReference(i.key,e),CV(s,i)):i instanceof J1?(re(ml,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||eA(s,i.key)):me(19791,{wu:i})}function CV(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||(re(ml,"New document in limbo: "+t),s.Eu.add(i),Iy(s))}function Iy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new le(Qe.fromString(e)),i=s.fu.next();s.Au.set(i,new _V(t)),s.Ru=s.Ru.insert(t,i),fd(s.remoteStore,new vr(Fn(pc(t.path)),i,"TargetPurposeLimboResolution",Cn.ce))}}async function xs(s,e,t){const i=ge(s),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){a.push(g);const v=fy.Es(p.targetId,g);l.push(v)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(p,g){const v=ge(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>U.forEach(g,(b=>U.forEach(b.Ts,(D=>v.persistence.referenceDelegate.addReference(T,b.targetId,D))).next((()=>U.forEach(b.Is,(D=>v.persistence.referenceDelegate.removeReference(T,b.targetId,D)))))))))}catch(T){if(!Is(T))throw T;re(dy,"Failed to update sequence numbers: "+T)}for(const T of g){const b=T.targetId;if(!T.fromCache){const D=v.vs.get(b),F=D.snapshotVersion,K=D.withLastLimboFreeSnapshotVersion(F);v.vs=v.vs.insert(b,K)}}})(i.localStore,l))}async function xV(s,e){const t=ge(s);if(!t.currentUser.isEqual(e)){re(ml,"User change. New user:",e.toKey());const i=await O1(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new ae($.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xs(t,i.Ns)}}function DV(s,e){const t=ge(s),i=t.Au.get(e);if(i&&i.hu)return Ne().add(i.key);{let a=Ne();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function VV(s,e){const t=ge(s),i=await Tg(t.localStore,e.query,!0),a=e.view.cu(i);return t.isPrimaryClient&&Rg(t,e.targetId,a.au),a}async function NV(s,e){const t=ge(s);return L1(t.localStore,e).then((i=>xs(t,i)))}async function OV(s,e,t,i){const a=ge(s),l=await(function(d,p){const g=ge(d),v=ge(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(T=>v.Xn(T,p).next((b=>b?g.localDocuments.getDocuments(T,b):U.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await fl(a.remoteStore):t==="acknowledged"||t==="rejected"?(Ry(a,e,i||null),wy(a,e),(function(d,p){ge(ge(d).mutationQueue).nr(p)})(a.localStore,e)):me(6720,"Unknown batchState",{bu:t}),await xs(a,l)):re(ml,"Cannot apply mutation batch with id: "+e)}async function MV(s,e){const t=ge(s);if(dd(t),Cy(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await QT(t,i.toArray());t.gu=!0,await Ag(t.remoteStore,!0);for(const l of a)fd(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const i=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(rl(t,c),tl(t.localStore,c,!0)))),nl(t.remoteStore,c)})),await a,await QT(t,i),(function(c){const d=ge(c);d.Au.forEach(((p,g)=>{nl(d.remoteStore,g)})),d.Vu.zr(),d.Au=new Map,d.Ru=new lt(le.comparator)})(t),t.gu=!1,await Ag(t.remoteStore,!1)}}async function QT(s,e,t){const i=ge(s),a=[],l=[];for(const c of e){let d;const p=i.Iu.get(c);if(p&&p.length!==0){d=await qf(i.localStore,Fn(p[0]));for(const g of p){const v=i.Tu.get(g),T=await VV(i,v);T.snapshot&&l.push(T.snapshot)}}else{const g=await P1(i.localStore,c);d=await qf(i.localStore,g),await Ay(i,tA(g),c,!1,d.resumeToken)}a.push(d)}return i.Pu.J_(l),a}function tA(s){return kb(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function PV(s){return(function(t){return ge(ge(t).persistence).hs()})(ge(s).localStore)}async function LV(s,e,t,i){const a=ge(s);if(a.gu)return void re(ml,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await L1(a.localStore,qb(l[0])),d=_c.createSynthesizedRemoteEventForCurrentChange(e,t==="current",xt.EMPTY_BYTE_STRING);await xs(a,c,d);break}case"rejected":await tl(a.localStore,e,!0),rl(a,e,i);break;default:me(64155,t)}}async function UV(s,e,t){const i=dd(s);if(i.gu){for(const a of e){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){re(ml,"Adding an already active target "+a);continue}const l=await P1(i.localStore,a),c=await qf(i.localStore,l);await Ay(i,tA(l),c.targetId,!1,c.resumeToken),fd(i.remoteStore,c)}for(const a of t)i.Iu.has(a)&&await tl(i.localStore,a,!1).then((()=>{nl(i.remoteStore,a),rl(i,a)})).catch(Rs)}}function dd(s){const e=ge(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=W1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wV.bind(null,e),e.Pu.J_=mV.bind(null,e.eventManager),e.Pu.yu=pV.bind(null,e.eventManager),e}function Cy(s){const e=ge(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IV.bind(null,e),e}class oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return N1(this.persistence,new V1,e.initialUser,this.serializer)}Cu(e){return new cy(ud.Vi,this.serializer)}Du(e){return new q1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oc.provider={build:()=>new oc};class kV extends oc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ve(this.persistence.referenceDelegate instanceof Bf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new w1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new cy((i=>Bf.Vi(i,t)),this.serializer)}}class nA extends oc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Cy(this.xu.syncEngine),await fl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return N1(this.persistence,new V1,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new w1(i,e.asyncQueue,t)}Mu(e,t){const i=new HC(t,this.persistence);return new FC(e.asyncQueue,i)}Cu(e){const t=D1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new hy(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,j1(),Sf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new q1}}class zV extends nA{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Bp&&(this.sharedClientState.syncEngine={So:OV.bind(null,t),Do:LV.bind(null,t),Co:UV.bind(null,t),hs:PV.bind(null,t),bo:NV.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await MV(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=j1();if(!Bp.v(t))throw new ae($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=D1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bp(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class lc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>KT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xV.bind(null,this.syncEngine),await Ag(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dV})()}createDatastore(e){const t=cd(e.databaseInfo.databaseId),i=YD(e.databaseInfo);return WD(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new tV(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>KT(this.syncEngine,t,0)),(function(){return BT.v()?new BT:new HD})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,v){const T=new vV(a,l,c,d,p,g);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=ge(t);re(Ca,"RemoteStore shutting down."),i.Ea.add(5),await Ec(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}lc.provider={build:()=>new lc};class xy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ct("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const As="FirestoreClient";class BV{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=fn.UNAUTHENTICATED,this.clientId=Fg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{re(As,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(re(As,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=vy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function jp(s,e){s.asyncQueue.verifyOperationInProgress(),re(As,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await O1(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function YT(s,e){s.asyncQueue.verifyOperationInProgress();const t=await qV(s);re(As,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>jT(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>jT(e.remoteStore,a))),s._onlineComponents=e}async function qV(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){re(As,"Using user provided OfflineComponentProvider");try{await jp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===$.FAILED_PRECONDITION||a.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;qo("Error using user provided cache. Falling back to memory cache: "+t),await jp(s,new oc)}}else re(As,"Using default OfflineComponentProvider"),await jp(s,new kV(void 0));return s._offlineComponents}async function iA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(re(As,"Using user provided OnlineComponentProvider"),await YT(s,s._uninitializedComponentsProvider._online)):(re(As,"Using default OnlineComponentProvider"),await YT(s,new lc))),s._onlineComponents}function jV(s){return iA(s).then((e=>e.syncEngine))}async function Gf(s){const e=await iA(s),t=e.eventManager;return t.onListen=EV.bind(null,e.syncEngine),t.onUnlisten=SV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bV.bind(null,e.syncEngine),t}function FV(s,e,t,i){const a=new xy(i),l=new by(e,a,t);return s.asyncQueue.enqueueAndForget((async()=>Ey(await Gf(s),l))),()=>{a.Nu(),s.asyncQueue.enqueueAndForget((async()=>Ty(await Gf(s),l)))}}function HV(s,e,t={}){const i=new Ji;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new xy({next:b=>{v.Nu(),c.enqueueAndForget((()=>Ty(l,T)));const D=b.docs.has(d);!D&&b.fromCache?g.reject(new ae($.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&b.fromCache&&p&&p.source==="server"?g.reject(new ae($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new by(pc(d.path),v,{includeMetadataChanges:!0,Ka:!0});return Ey(l,T)})(await Gf(s),s.asyncQueue,e,t,i))),i.promise}function GV(s,e,t={}){const i=new Ji;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new xy({next:b=>{v.Nu(),c.enqueueAndForget((()=>Ty(l,T))),b.fromCache&&p.source==="server"?g.reject(new ae($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new by(d,v,{includeMetadataChanges:!0,Ka:!0});return Ey(l,T)})(await Gf(s),s.asyncQueue,e,t,i))),i.promise}function KV(s,e){const t=new Ji;return s.asyncQueue.enqueueAndForget((async()=>AV(await jV(s),e,t))),t.promise}function rA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const QV="ComponentProvider",$T=new Map;function YV(s,e,t,i,a){return new _x(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,rA(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}const $V="firestore.googleapis.com",XT=!0;class JT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$V,this.ssl=XT}else this.host=e.host,this.ssl=e.ssl??XT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=E1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<A1)throw new ae($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rA(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dy{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new VC;switch(i.type){case"firstParty":return new MC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=$T.get(t);i&&(re(QV,"Removing Datastore"),$T.delete(t),i.terminate())})(this),Promise.resolve()}}class Ds{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class St{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(fc(t,St._jsonSchema))return new St(e,i||null,new le(Qe.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:jt("string",St._jsonSchemaVersion),referencePath:jt("string")};class vs extends Ds{constructor(e,t,i){super(e,t,pc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new le(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function Na(s,e,...t){if(s=oi(s),ib("collection","path",e),s instanceof Dy){const i=Qe.fromString(e,...t);return q0(i),new vs(s,null,i)}{if(!(s instanceof St||s instanceof vs))throw new ae($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Qe.fromString(e,...t));return q0(i),new vs(s.firestore,null,i)}}function ot(s,e,...t){if(s=oi(s),arguments.length===1&&(e=Fg.newId()),ib("doc","path",e),s instanceof Dy){const i=Qe.fromString(e,...t);return B0(i),new St(s,null,new le(i))}{if(!(s instanceof St||s instanceof vs))throw new ae($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Qe.fromString(e,...t));return B0(i),new St(s.firestore,s instanceof vs?s.converter:null,new le(i))}}const ZT="AsyncQueue";class WT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new F1(this,"async_queue_retry"),this._c=()=>{const i=Sf();i&&re(ZT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Sf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ji;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Is(e))throw e;re(ZT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ct("INTERNAL UNHANDLED ERROR: ",eS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=_y.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&me(47125,{Pc:eS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function eS(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class wr extends Dy{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new WT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new WT(e),this._firestoreClient=void 0,await e}}}function XV(s,e,t){t||(t=Nf);const i=fC(s,"firestore");if(i.isInitialized(t)){const a=i.getImmediate({identifier:t}),l=i.getOptions(t);if(wf(l,e))return a;throw new ae($.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ae($.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<A1)throw new ae($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Bg(e.host)&&o2(e.host),i.initialize({options:e,instanceIdentifier:t})}function Tc(s){if(s._terminated)throw new ae($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||JV(s),s._firestoreClient}function JV(s){const e=s._freezeSettings(),t=YV(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new BV(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}class si{constructor(e){this._byteString=e}static fromBase64String(e){try{return new si(xt.fromBase64String(e))}catch(t){throw new ae($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new si(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fc(e,si._jsonSchema))return si.fromBase64String(e.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:jt("string",si._jsonSchemaVersion),bytes:jt("string")};class md{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vy{constructor(e){this._methodName=e}}class Zi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zi._jsonSchemaVersion}}static fromJSON(e){if(fc(e,Zi._jsonSchema))return new Zi(e.latitude,e.longitude)}}Zi._jsonSchemaVersion="firestore/geoPoint/1.0",Zi._jsonSchema={type:jt("string",Zi._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};class Si{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fc(e,Si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Si(e.vectorValues);throw new ae($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:jt("string",Si._jsonSchemaVersion),vectorValues:jt("object")};const ZV=/^__.*__$/;class WV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Cr(e,this.data,this.fieldMask,t,this.fieldTransforms):new hl(e,this.data,t,this.fieldTransforms)}}class sA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Cr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{dataSource:s})}}class Ny{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ny({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Kf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(aA(this.dataSource)&&ZV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class eN{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||cd(e)}createContext(e,t,i,a=!1){return new Ny({dataSource:e,methodName:t,targetDoc:i,path:_t.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pd(s){const e=s._freezeSettings(),t=cd(s._databaseId);return new eN(s._databaseId,!!e.ignoreUndefinedProperties,t)}function oA(s,e,t,i,a,l={}){const c=s.createContext(l.merge||l.mergeFields?2:0,e,t,a);Oy("Data must be an object, but it was:",c,i);const d=cA(i,c);let p,g;if(l.merge)p=new xn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const b=xa(e,T,t);if(!c.contains(b))throw new ae($.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);dA(v,b)||v.push(b)}p=new xn(v),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new WV(new mn(d),p,g)}class gd extends Vy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gd}}function lA(s,e,t,i){const a=s.createContext(1,e,t);Oy("Data must be an object, but it was:",a,i);const l=[],c=mn.empty();Cs(i,((p,g)=>{const v=fA(e,p,t);g=oi(g);const T=a.childContextForFieldPath(v);if(g instanceof gd)l.push(v);else{const b=Sc(g,T);b!=null&&(l.push(v),c.set(v,b))}}));const d=new xn(l);return new sA(c,d,a.fieldTransforms)}function uA(s,e,t,i,a,l){const c=s.createContext(1,e,t),d=[xa(e,i,t)],p=[a];if(l.length%2!=0)throw new ae($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(xa(e,l[b])),p.push(l[b+1]);const g=[],v=mn.empty();for(let b=d.length-1;b>=0;--b)if(!dA(g,d[b])){const D=d[b];let F=p[b];F=oi(F);const K=c.childContextForFieldPath(D);if(F instanceof gd)g.push(D);else{const z=Sc(F,K);z!=null&&(g.push(D),v.set(D,z))}}const T=new xn(g);return new sA(v,T,c.fieldTransforms)}function tN(s,e,t,i=!1){return Sc(t,s.createContext(i?4:3,e))}function Sc(s,e){if(hA(s=oi(s)))return Oy("Unsupported field value:",e,s),cA(s,e);if(s instanceof Vy)return(function(i,a){if(!aA(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let p=Sc(d,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(s,e)}return(function(i,a){if((i=oi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return kx(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=We.fromDate(i);return{timestampValue:el(a.serializer,l)}}if(i instanceof We){const l=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:el(a.serializer,l)}}if(i instanceof Zi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof si)return{bytesValue:i1(a.serializer,i._byteString)};if(i instanceof St){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ay(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Si)return(function(c,d){const p=c instanceof Si?c.toArray():c;return{mapValue:{fields:{[Jg]:{stringValue:Zg},[Yo]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return ty(d.serializer,v)}))}}}}}})(i,a);if(m1(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Xf(i)}`)})(s,e)}function cA(s,e){const t={};return Tb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(s,((i,a)=>{const l=Sc(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function hA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof We||s instanceof Zi||s instanceof si||s instanceof St||s instanceof Vy||s instanceof Si||m1(s))}function Oy(s,e,t){if(!hA(t)||!rb(t)){const i=Xf(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function xa(s,e,t){if((e=oi(e))instanceof md)return e._internalPath;if(typeof e=="string")return fA(s,e);throw Kf("Field path arguments must be of type string or ",s,!1,void 0,t)}const nN=new RegExp("[~\\*/\\[\\]]");function fA(s,e,t){if(e.search(nN)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new md(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Kf(s,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new ae($.INVALID_ARGUMENT,d+s+p)}function dA(s,e){return s.some((t=>t.isEqual(e)))}class iN{convertValue(e,t="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Cs(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[Yo].arrayValue?.values?.map((i=>pt(i.doubleValue)));return new Si(t)}convertGeoPoint(e){return new Zi(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=nd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){const t=br(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Qe.fromString(e);ve(d1(i),9688,{name:e});const a=new ba(i.get(1),i.get(3)),l=new le(i.popFirst(5));return a.isEqual(t)||Ct(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class My extends iN{constructor(e){super(),this.firestore=e}convertBytes(e){return new si(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}const tS="@firebase/firestore",nS="4.11.0";function iS(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(s,["next","error","complete"])}class mA{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(xa("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rN extends mA{data(){return super.data()}}function pA(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ae($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Py{}class gA extends Py{}function yd(s,e,...t){let i=[];e instanceof Py&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof Uy)).length,d=l.filter((p=>p instanceof _d)).length;if(c>1||c>0&&d>0)throw new ae($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class _d extends gA{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new _d(e,t,i)}_apply(e){const t=this._parse(e);return yA(e._query,t),new Ds(e.firestore,e.converter,fg(e._query,t))}_parse(e){const t=pd(e.firestore);return(function(l,c,d,p,g,v,T){let b;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ae($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){sS(T,v);const F=[];for(const K of T)F.push(rS(p,l,K));b={arrayValue:{values:F}}}else b=rS(p,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||sS(T,v),b=tN(d,c,T,v==="in"||v==="not-in");return Ue.create(g,v,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ly(s,e,t){const i=e,a=xa("where",s);return _d._create(a,i,t)}class Uy extends Py{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Uy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)yA(c,p),c=fg(c,p)})(e._query,t),new Ds(e.firestore,e.converter,fg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ky extends gA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ky(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new ae($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ae($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rc(l,c)})(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,Nx(e._query,t))}}function sN(s,e="asc"){const t=e,i=xa("orderBy",s);return ky._create(i,t)}function rS(s,e,t){if(typeof(t=oi(t))=="string"){if(t==="")throw new ae($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zb(e)&&t.indexOf("/")!==-1)throw new ae($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Qe.fromString(t));if(!le.isDocumentKey(i))throw new ae($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return nc(s,new le(i))}if(t instanceof St)return nc(s,t._key);throw new ae($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xf(t)}.`)}function sS(s,e){if(!Array.isArray(s)||s.length===0)throw new ae($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yA(s,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _A(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class aN{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=cN(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function oN(s){return new aN(s)}class lN{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=lc.provider,this._offlineComponentProvider={build:t=>new nA(t,e?.cacheSizeBytes,this.forceOwnership)}}}class uN{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=lc.provider,this._offlineComponentProvider={build:t=>new zV(t,e?.cacheSizeBytes)}}}function cN(s){return new lN(s?.forceOwnership)}function hN(){return new uN}class Ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ea extends mA{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(xa("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ea._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ea._jsonSchema={type:jt("string",Ea._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class bf extends Ea{data(e={}){return super.data(e)}}class Ta{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ou(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new bf(this._firestore,this._userDataWriter,i.key,i,new Ou(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new bf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ou(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new bf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ou(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:fN(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:s})}}Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:jt("string",Ta._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class dN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pd(e)}set(e,t,i){this._verifyNotCommitted();const a=Fp(e,this._firestore),l=_A(a.converter,t,i),c=oA(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,Wt.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=Fp(e,this._firestore);let c;return c=typeof(t=oi(t))=="string"||t instanceof md?uA(this._dataReader,"WriteBatch.update",l._key,t,i,a):lA(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fp(e,this._firestore);return this._mutations=this._mutations.concat(new yc(t._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fp(s,e){if((s=oi(s)).firestore!==e)throw new ae($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function ds(s){s=jn(s,St);const e=jn(s.firestore,wr),t=Tc(e);return HV(t,s._key).then((i=>EA(e,s,i)))}function bc(s){s=jn(s,Ds);const e=jn(s.firestore,wr),t=Tc(e),i=new My(e);return pA(s._query),GV(t,s._query).then((a=>new Ta(e,i,s,a)))}function Ti(s,e,t){s=jn(s,St);const i=jn(s.firestore,wr),a=_A(s.converter,e,t),l=pd(i);return Ed(i,[oA(l,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,Wt.none())])}function vA(s,e,t,...i){s=jn(s,St);const a=jn(s.firestore,wr),l=pd(a);let c;return c=typeof(e=oi(e))=="string"||e instanceof md?uA(l,"updateDoc",s._key,e,t,i):lA(l,"updateDoc",s._key,e),Ed(a,[c.toMutation(s._key,Wt.exists(!0))])}function vd(s){return Ed(jn(s.firestore,wr),[new yc(s._key,Wt.none())])}function mN(s,...e){s=oi(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||iS(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(iS(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let l,c,d;if(s instanceof St)c=jn(s.firestore,wr),d=pc(s._key.path),l={next:g=>{e[i]&&e[i](EA(c,s,g))},error:e[i+1],complete:e[i+2]};else{const g=jn(s,Ds);c=jn(g.firestore,wr),d=g._query;const v=new My(c);l={next:T=>{e[i]&&e[i](new Ta(c,v,g,T))},error:e[i+1],complete:e[i+2]},pA(s._query)}const p=Tc(c);return FV(p,d,a,l)}function Ed(s,e){const t=Tc(s);return KV(t,e)}function EA(s,e,t){const i=t.docs.get(e._key),a=new My(s);return new Ea(s,a,e._key,i,new Ou(t.hasPendingWrites,t.fromCache),e.converter)}function Ig(s){return s=jn(s,wr),Tc(s),new dN(s,(e=>Ed(s,e)))}(function(e,t=!0){xC(gC),If(new Qu("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new wr(new NC(i.getProvider("auth-internal")),new PC(c,i.getProvider("app-check-internal")),vx(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Uo(tS,nS,e),Uo(tS,nS,"esm2020")})();const Ki=(s,e="")=>{let t="";if(typeof window<"u"&&window.ENV_CONFIG&&window.ENV_CONFIG[s])t=window.ENV_CONFIG[s];else if(typeof window<"u"){const i=`isp_${s.toLowerCase()}`,a=localStorage.getItem(i);a&&(t=a)}return t||(t=e),t?t.trim():""},pN={get GOOGLE_API_KEY(){return Ki("GOOGLE_API_KEY",void 0)},get GOOGLE_CLIENT_ID(){return Ki("GOOGLE_CLIENT_ID",void 0)},get GOOGLE_SHEET_ID(){return Ki("GOOGLE_SHEET_ID",void 0)},get GEMINI_API_KEY(){return Ki("GEMINI_API_KEY",void 0)},FIREBASE:{get apiKey(){return Ki("FIREBASE_API_KEY",void 0)},get authDomain(){return Ki("FIREBASE_AUTH_DOMAIN",void 0)},get projectId(){return Ki("FIREBASE_PROJECT_ID",void 0)},get storageBucket(){return Ki("FIREBASE_STORAGE_BUCKET",void 0)},get messagingSenderId(){return Ki("FIREBASE_MESSAGING_SENDER_ID",void 0)},get appId(){return Ki("FIREBASE_APP_ID",void 0)}}},gN=()=>pN.FIREBASE;let aS=null,Gu=null,uc=null;const yN=s=>{uc=s},bt=()=>{const s=gN();if(!s||!s.apiKey||!s.projectId)return console.warn("Firebase config missing"),null;if(!Gu)try{Gu=KS(s),aS=XV(Gu,{localCache:oN({tabManager:hN()})}),console.log("Firebase initialized with persistence")}catch(e){console.error("Error initializing Firebase",e)}return aS},J4=()=>(Gu||bt(),Gu),Cg=async(s,e)=>{const t=bt();if(!t)return!1;const i=e.id||ot(Na(t,s)).id,a={...e,updatedAt:new Date().toISOString()};a.id||(a.id=i);try{return await Ti(ot(t,s,i),a,{merge:!0}),!0}catch(l){return console.error(`Error saving document to ${s}:`,l),(l.code==="unavailable"||!navigator.onLine)&&(console.log(`Guardado offline encolado: ${s}/${i}`),uc&&uc({type:"save",collectionName:s,id:i,data:a})),!1}},_N=async(s,e)=>{const t=bt();if(!t)throw new Error("Firebase no configurado");const i=ot(t,s,e.id);await Ti(i,e,{merge:!0})},vN=s=>{const e=bt();if(!e)return()=>{};const t=["EST-01","EST-02","EST-03","Abierto","En Proceso","Escalado"],i=yd(Na(e,"tickets"),Ly("estado","in",t));return mN(i,a=>{const l=[];a.forEach(c=>{l.push({id:c.id,...c.data()})}),s(l)},a=>{console.error("Error en Stream Hbrido de Tickets:",a)})},TA=async(s,e)=>{const t=bt();if(!t)return!1;try{return await vd(ot(t,s,e)),!0}catch(i){return console.error(`Error deleting from ${s}:`,i),(i.code==="unavailable"||!navigator.onLine)&&(console.log(`Borrado offline encolado para ${s}/${e}`),uc&&uc({type:"delete",collectionName:s,id:e})),!1}},EN=async(s,e)=>{const t=bt();if(!t)throw new Error("Firebase no configurado");await vd(ot(t,s,e))},TN=async(s=null,e=t=>{})=>{const t=bt();if(!t)throw new Error("Firebase no configurado");const i=["clients","tickets","averias","tecnicos","equipos","visitas","instalaciones","derivaciones","postVenta","sesionesRemoto","movimientosEquipos","requerimientos","whatsappLogs","templates","whatsappCategories","categorias","subcategorias","prioridadesSLA","estadosCatalogo","catalogoServicios","tiposRequerimiento"],a={};let l=0;const c=i.length;for(const d of i){l++,e({step:l,totalSteps:c,label:`Sincronizando ${d}...`,percent:Math.round(l/c*100)});try{const p=Na(t,d);let g=p;s&&(g=yd(p,Ly("updatedAt",">",s)));const v=await bc(g),T=[];v.forEach(b=>{T.push({id:b.id,...b.data()})}),a[d]=T}catch(p){console.error(`Error al descargar coleccion viva ${d}:`,p),a[d]=[]}}return a},SN=async s=>{const e=bt();if(!e)return!1;console.log("Iniciando migracin de datos...");const t=["clients","tickets","averias","tecnicos","equipos","visitas","instalaciones","derivaciones","postVenta","sesionesRemoto","movimientosEquipos","whatsappLogs","templates"];try{let a=Ig(e),l=0;for(const c of t){const d=s[c]||[];console.log(`Migrando ${d.length} items de ${c}...`);for(const p of d){if(!p.id)continue;const g=ot(e,c,p.id),v={...p,updatedAt:new Date().toISOString()};v.createdAt||(v.createdAt=new Date().toISOString()),a.set(g,v,{merge:!0}),l++,l>=450&&(await a.commit(),a=Ig(e),l=0)}}return l>0&&await a.commit(),await Ti(ot(e,"config","app_settings"),{columnPrefs:s.columnPrefs||{},cleaningOptions:s.cleaningOptions||{},importHistory:s.importHistory||[],branding:s.branding||{},customRolePermissions:s.customRolePermissions||null,whatsappCategories:s.whatsappCategories||[]},{merge:!0}),console.log("Migracin completada exitosamente."),!0}catch(i){return console.error("Error during migration:",i),!1}},Mu=s=>new Promise(e=>setTimeout(e,s)),Hp=200,bN=async(s,e=t=>{})=>{const t=bt();if(!t)throw new Error("Firebase no configurado");const i=new Date,a=i.toISOString().replace(/[:.]/g,"-"),l=i.toISOString(),c=s.clients||[],p=Math.max(1,Math.ceil(c.length/Hp))+4;let g=0;const v=z=>{g++,e({step:g,totalSteps:p,label:z,percent:Math.round(g/p*100)})},T={createdAt:l,versionId:a,totalClients:c.length,totalTickets:(s.tickets||[]).length,totalAverias:(s.averias||[]).length,totalEquipos:(s.equipos||[]).length,totalVisitas:(s.visitas||[]).length,totalTecnicos:(s.tecnicos||[]).length,label:`Respaldo ${i.toLocaleDateString("es-PE")} ${i.toLocaleTimeString("es-PE")}`};await Ti(ot(t,"backups_history",a),T),v("Metadata guardada");const b=[];for(let z=0;z<c.length;z+=Hp)b.push(c.slice(z,z+Hp));for(let z=0;z<b.length;z++){const ne=ot(t,"backups_history",a,"data",`clients_${z}`);await Ti(ne,{data:b[z]}),v(`Clientes ${z+1}/${b.length}`),z<b.length-1&&await Mu(300)}const D=["tickets","averias","tecnicos","equipos","visitas","instalaciones","derivaciones","postVenta","sesionesRemoto","movimientosEquipos","requerimientos","whatsappLogs","templates"],F=8e5,K={};for(const z of D){const ne=s[z]||[],te=new Blob([JSON.stringify(ne)]).size;if(te>F&&Array.isArray(ne)&&ne.length>0){const ie=Math.ceil(ne.length/Math.ceil(te/F)),ye=[];for(let de=0;de<ne.length;de+=ie)ye.push(ne.slice(de,de+ie));K[z]=ye.length;for(let de=0;de<ye.length;de++)await Ti(ot(t,"backups_history",a,"data",`${z}_${de}`),{data:ye[de]}),de<ye.length-1&&await Mu(200)}else K[z]=1,await Ti(ot(t,"backups_history",a,"data",z),{data:ne});await Mu(150)}return v("Colecciones guardadas"),await Mu(300),await Ti(ot(t,"backups_history",a,"data","config"),{columnPrefs:s.columnPrefs||{},cleaningOptions:s.cleaningOptions||{},importHistory:s.importHistory||[],branding:s.branding||{},customRolePermissions:s.customRolePermissions||null,whatsappCategories:s.whatsappCategories||[]}),v("Configuracin guardada"),await Ti(ot(t,"backups_history",a,"data","_meta"),{clientChunks:b.length,collectionChunks:K}),v("Backup completado!"),{success:!0,versionId:a,timestamp:l}},AN=async()=>{if(!bt())throw new Error("Firebase no configurado");const e=await SA();if(e.length===0)throw new Error("No hay backups disponibles");return xg(e[0].id)},SA=async()=>{const s=bt();if(!s)throw new Error("Firebase no configurado");const e=await bc(Na(s,"backups_history")),t=[];return e.forEach(i=>{const a=i.data();a.createdAt&&t.push({id:i.id,...a})}),t.sort((i,a)=>new Date(a.createdAt)-new Date(i.createdAt)),t},xg=async s=>{const e=bt();if(!e)throw new Error("Firebase no configurado");const t=await ds(ot(e,"backups_history",s,"data","_meta")),i=t.exists()?t.data():{clientChunks:0,collectionChunks:{}};let a=[];for(let v=0;v<(i.clientChunks||0);v++){const T=await ds(ot(e,"backups_history",s,"data",`clients_${v}`));T.exists()&&(a=[...a,...T.data().data||[]])}const l=["tickets","averias","tecnicos","equipos","visitas","instalaciones","derivaciones","postVenta","sesionesRemoto","movimientosEquipos","requerimientos","whatsappLogs","templates"],c={},d=i.collectionChunks||{};for(const v of l){const T=d[v]||1;let b=[];if(T>1)for(let D=0;D<T;D++){const F=await ds(ot(e,"backups_history",s,"data",`${v}_${D}`));F.exists()&&(b=[...b,...F.data().data||[]])}else{const D=await ds(ot(e,"backups_history",s,"data",v));D.exists()&&(b=D.data().data||[])}c[v]=b}const p=await ds(ot(e,"backups_history",s,"data","config")),g=p.exists()?p.data():{};return{clients:a,tickets:c.tickets||[],averias:c.averias||[],tecnicos:c.tecnicos||[],equipos:c.equipos||[],visitas:c.visitas||[],instalaciones:c.instalaciones||[],derivaciones:c.derivaciones||[],postVenta:c.postVenta||[],sesionesRemoto:c.sesionesRemoto||[],movimientosEquipos:c.movimientosEquipos||[],requerimientos:c.requerimientos||[],whatsappLogs:c.whatsappLogs||[],templates:c.templates||[],columnPrefs:g.columnPrefs,cleaningOptions:g.cleaningOptions,importHistory:g.importHistory,branding:g.branding,customRolePermissions:g.customRolePermissions,whatsappCategories:g.whatsappCategories}},wN=async s=>{const e=bt();if(!e)return console.warn("Firebase no configurado, settings solo guardados localmente"),!1;try{return await Ti(ot(e,"settings","app"),{...s,updatedAt:new Date().toISOString()}),!0}catch(t){return console.error("Error pushing settings to Firebase:",t),!1}},RN=async()=>{const s=bt();if(!s)return null;try{const e=await ds(ot(s,"settings","app"));return e.exists()?e.data():null}catch(e){return console.error("Error pulling settings from Firebase:",e),null}},IN=async s=>{const e=bt();if(!e)throw new Error("Firebase no configurado");const t=await bc(Na(e,"backups_history",s,"data")),i=[];t.forEach(l=>i.push(l.ref));const a=450;for(let l=0;l<i.length;l+=a){const c=Ig(e);i.slice(l,l+a).forEach(d=>c.delete(d)),await c.commit(),l+a<i.length&&await Mu(200)}return await vd(ot(e,"backups_history",s)),!0},CN="ISP_DB",ws="keyval",xN=1;let lf=null;function zy(){return lf||(lf=new Promise((s,e)=>{const t=indexedDB.open(CN,xN);t.onupgradeneeded=i=>{const a=i.target.result;a.objectStoreNames.contains(ws)||a.createObjectStore(ws)},t.onsuccess=i=>{s(i.target.result)},t.onerror=i=>{e(`IndexedDB error: ${i.target.errorCode}`)}}),lf)}async function oS(s){const e=await zy();return new Promise((t,i)=>{const c=e.transaction(ws,"readonly").objectStore(ws).get(s);c.onsuccess=()=>t(c.result),c.onerror=()=>i(c.error)})}async function sl(s,e){const t=await zy();return new Promise((i,a)=>{const d=t.transaction(ws,"readwrite").objectStore(ws).put(e,s);d.onsuccess=()=>i(),d.onerror=()=>a(d.error)})}async function DN(){const s=await zy();return new Promise((e,t)=>{const l=s.transaction(ws,"readonly").objectStore(ws).getAllKeys();l.onsuccess=()=>e(l.result),l.onerror=()=>t(l.error)})}function Bn(s,e,t="id"){if(!s||s.length===0)return`${e}-001`;const i=s.reduce((a,l)=>{if(!l[t])return a;const c=l[t].split("-"),d=parseInt(c[c.length-1]||0);return!isNaN(d)&&d>a?d:a},0);return`${e}-${String(i+1).padStart(3,"0")}`}const bA={isp_clients:"clients",isp_tickets:"tickets",isp_averias:"averias",isp_equipos:"equipos",isp_visitas:"visitas",isp_instalaciones:"instalaciones",isp_derivaciones:"derivaciones",isp_postVenta:"postVenta",isp_sesionesRemoto:"sesionesRemoto",isp_movimientosEquipos:"movimientosEquipos",isp_whatsappLogs:"whatsappLogs",isp_templates:"templates",isp_requerimientos:"requerimientos",isp_col_prefs:"columnPrefs",isp_cleaningOptions:"cleaningOptions",isp_importHistory:"importHistory",isp_branding:"branding",isp_customRolePermissions:"customRolePermissions",isp_whatsappCategories:"whatsappCategories",isp_theme:"theme",isp_categorias:"categorias",isp_subcategorias:"subcategorias",isp_prioridadesSLA:"prioridadesSLA",isp_estadosCatalogo:"estadosCatalogo",isp_catalogoServicios:"catalogoServicios",isp_tiposRequerimiento:"tiposRequerimiento",isp_client_changes:"clientChanges"},lS=Object.fromEntries(Object.entries(bA).map(([s,e])=>[e,s]));async function hs(s,e){try{await sl(s,e)}catch(t){console.error(`Error saving to DB (${s}):`,t)}}const VN=(s,e)=>({clients:[],clientsLoading:!1,dataSource:"demo",setClients:t=>{s({clients:t}),hs("isp_clients",t)},importClients:t=>{s({clients:t,dataSource:"excel"}),hs("isp_clients",t),hs("isp_dataSource","excel")},clientChanges:[],addClientChanges:t=>s(i=>{if(!t||t.length===0)return i;const a=[...t,...i.clientChanges||[]];return hs("isp_client_changes",a),{clientChanges:a}}),columnPrefs:{visible:["id","nombre","tecnologia","plan","precio","estado_cuenta","status","deuda_monto"],order:["id","nombre","tecnologia","plan","precio","estado_cuenta","status","deuda_monto"]},setColumnPrefs:t=>{s({columnPrefs:t}),hs("isp_col_prefs",t)},lastImport:null,setLastImport:t=>{s({lastImport:t}),hs("isp_lastImport",t)},importHistory:[],addImportRecord:t=>s(i=>{const a=i.importHistory.reduce((c,d)=>{const p=parseInt(d.id.split("-")[1]||0);return p>c?p:c},0),l=[{...t,id:`IMP-${String(a+1).padStart(3,"0")}`,fecha:new Date().toISOString()},...i.importHistory];return hs("isp_importHistory",l),{importHistory:l}}),cleaningOptions:{separateNameStatus:!0,classifyEmail:!0,splitMobile:!0,parseDebt:!0,parsePrices:!0,inferTechnology:!0,separateTV:!0,normalizeCortePorDeuda:!0,formatDNI:!0},setCleaningOptions:t=>{s({cleaningOptions:t}),hs("isp_cleaningOptions",t)}});async function In(s,e){try{await sl(s,e)}catch(t){console.error(`Error saving to DB (${s}):`,t)}}const NN=(s,e)=>({tickets:[],addTicket:t=>s(i=>{const a=[{...t,id:Bn(i.tickets,"TK"),fecha:new Date().toISOString().split("T")[0],fechaUpdate:new Date().toISOString().split("T")[0],historial:[]},...i.tickets];return In("isp_tickets",a),{tickets:a}}),updateTicket:(t,i)=>s(a=>{const l=a.tickets.map(c=>{if(c.id===t){const d={...c,...i,fechaUpdate:new Date().toISOString().split("T")[0]};if(i.estado&&i.estado!==c.estado){const p={fecha:new Date().toISOString(),estadoAnterior:c.estado,estadoNuevo:i._historyEstadoLabel||i.estado,motivo:i._historyComment||null};d.historial=[p,...c.historial||[]],delete d._historyComment,delete d._historyEstadoLabel}return d}return c});return In("isp_tickets",l),{tickets:l}}),deleteTicket:t=>s(i=>{const a=i.tickets.filter(l=>l.id!==t);return In("isp_tickets",a),{tickets:a}}),deleteTicketCascade:t=>s(i=>{const a=i.tickets.filter(d=>d.id!==t),l=i.visitas.filter(d=>d.ticketId!==t),c=i.sesionesRemoto.filter(d=>d.ticketId!==t);return In("isp_tickets",a),In("isp_visitas",l),In("isp_sesionesRemoto",c),{tickets:a,visitas:l,sesionesRemoto:c}}),averias:[],addAveria:t=>s(i=>{const a=[{...t,id:Bn(i.averias,"AV"),fecha:new Date().toISOString().split("T")[0],fechaResolucion:null,historial:[]},...i.averias];return In("isp_averias",a),{averias:a}}),updateAveria:(t,i)=>s(a=>{const l=a.averias.map(c=>{if(c.id===t){const d={...c,...i};if(i.estado&&i.estado!==c.estado){const p={fecha:new Date().toISOString(),estadoAnterior:c.estado,estadoNuevo:i.estado,motivo:i._historyComment||null};d.historial=[p,...c.historial||[]],delete d._historyComment}return d}return c});return In("isp_averias",l),{averias:l}}),sesionesRemoto:[],addSesionRemoto:t=>s(i=>{const a=[{...t,id:Bn(i.sesionesRemoto,"SR"),fecha:new Date().toISOString().split("T")[0]},...i.sesionesRemoto];return In("isp_sesionesRemoto",a),{sesionesRemoto:a}}),updateSesionRemoto:(t,i)=>s(a=>{const l=a.sesionesRemoto.map(c=>{if(c.id===t){const d={...c,...i};if(i.estado&&i.estado!==c.estado){const p={fecha:new Date().toISOString(),estadoAnterior:c.estado,estadoNuevo:i._historyEstadoLabel||i.estado,motivo:i._historyComment||null};d.historial=[p,...c.historial||[]],delete d._historyComment,delete d._historyEstadoLabel}return d}return c});return In("isp_sesionesRemoto",l),{sesionesRemoto:l}}),deleteSesionRemoto:t=>s(i=>{const a=i.sesionesRemoto.filter(l=>l.id!==t);return In("isp_sesionesRemoto",a),{sesionesRemoto:a}}),visitas:[],addVisita:t=>s(i=>{const a=Bn(i.visitas,"VT"),l=[{...t,id:a,fecha:t.fecha||new Date().toISOString().split("T")[0]},...i.visitas];return In("isp_visitas",l),{visitas:l}}),updateVisita:(t,i)=>s(a=>{const l=a.visitas.map(c=>{if(c.id===t){const d={...c,...i};let p=null;return i._historyEntry?(p={fecha:new Date().toISOString(),...i._historyEntry},delete d._historyEntry):i.estado&&i.estado!==c.estado&&(p={fecha:new Date().toISOString(),estadoAnterior:c.estado,estadoNuevo:i.estado,motivo:i._historyComment||null},delete d._historyComment),p&&(d.historial=[p,...c.historial||[]]),d}return c});return In("isp_visitas",l),{visitas:l}}),deleteVisita:t=>s(i=>{const a=i.visitas.filter(l=>l.id!==t);return In("isp_visitas",a),{visitas:a}})});async function cn(s,e){try{await sl(s,e)}catch(t){console.error(`Error saving to DB (${s}):`,t)}}const ON=(s,e)=>({equipos:[],addEquipo:t=>s(i=>{const a=[{...t,id:Bn(i.equipos,"EQ")},...i.equipos];return cn("isp_equipos",a),{equipos:a}}),updateEquipo:(t,i)=>s(a=>{const l=a.equipos.map(c=>c.id===t?{...c,...i}:c);return cn("isp_equipos",l),{equipos:l}}),deleteEquipo:t=>s(i=>{const a=i.equipos.filter(l=>l.id!==t);return cn("isp_equipos",a),{equipos:a}}),instalaciones:[],addInstalacion:t=>s(i=>{const a=Bn(i.instalaciones,"INS"),l=[{...t,id:a,fecha:t.fecha||new Date().toISOString().split("T")[0]},...i.instalaciones];return cn("isp_instalaciones",l),{instalaciones:l}}),updateInstalacion:(t,i)=>s(a=>{const l=a.instalaciones.map(c=>c.id===t?{...c,...i}:c);return cn("isp_instalaciones",l),{instalaciones:l}}),deleteInstalacion:t=>s(i=>{const a=i.instalaciones.filter(l=>l.id!==t);return cn("isp_instalaciones",a),{instalaciones:a}}),derivaciones:[],addDerivacion:t=>s(i=>{const a=Bn(i.derivaciones,"DPE"),l=[{...t,id:a,fecha:t.fecha||new Date().toISOString().split("T")[0],fechaCompletado:null},...i.derivaciones];return cn("isp_derivaciones",l),{derivaciones:l}}),updateDerivacion:(t,i)=>s(a=>{const l=a.derivaciones.map(c=>{if(c.id===t){const d={...c,...i};if(i.estado&&i.estado!==c.estado){const p={fecha:new Date().toISOString(),estadoAnterior:c.estado,estadoNuevo:i._historyEstadoLabel||i.estado,motivo:i._historyComment||null};d.historial=[p,...c.historial||[]],delete d._historyComment,delete d._historyEstadoLabel}return d}return c});return cn("isp_derivaciones",l),{derivaciones:l}}),deleteDerivacion:t=>s(i=>{const a=i.derivaciones.filter(l=>l.id!==t);return cn("isp_derivaciones",a),{derivaciones:a}}),postVenta:[],addPostVenta:t=>s(i=>{const a=[{...t,id:Bn(i.postVenta,"PV"),fecha:t.fecha||new Date().toISOString().split("T")[0]},...i.postVenta];return cn("isp_postVenta",a),{postVenta:a}}),updatePostVenta:(t,i)=>s(a=>{const l=a.postVenta.map(c=>{if(c.id===t){const d={...c,...i};if(i.estado&&i.estado!==c.estado){const p={fecha:new Date().toISOString(),estadoAnterior:c.estado,estadoNuevo:i._historyEstadoLabel||i.estado,motivo:i._historyComment||null};d.historial=[p,...c.historial||[]],delete d._historyComment,delete d._historyEstadoLabel}return d}return c});return cn("isp_postVenta",l),{postVenta:l}}),deletePostVenta:t=>s(i=>{const a=i.postVenta.filter(l=>l.id!==t);return cn("isp_postVenta",a),{postVenta:a}}),requerimientos:[],addRequerimiento:t=>s(i=>{const a=Bn(i.requerimientos,"REQ"),l=[{...t,id:a,fecha:t.fecha||new Date().toISOString().split("T")[0],historial:[]},...i.requerimientos];return cn("isp_requerimientos",l),{requerimientos:l}}),updateRequerimiento:(t,i)=>s(a=>{const l=a.requerimientos.map(c=>{if(c.id===t){const d={...c,...i};if(i.estado&&i.estado!==c.estado){const p={fecha:new Date().toISOString(),estadoAnterior:c.estado,estadoNuevo:i.estado,motivo:i._historyComment||null};d.historial=[p,...c.historial||[]],delete d._historyComment}return d}return c});return cn("isp_requerimientos",l),{requerimientos:l}}),deleteRequerimiento:t=>s(i=>{const a=i.requerimientos.filter(l=>l.id!==t);return cn("isp_requerimientos",a),{requerimientos:a}}),movimientosEquipos:[],addMovimientoEquipo:t=>s(i=>{const a=Bn(i.movimientosEquipos,"MOV"),l=[{...t,id:a,fecha:new Date().toISOString().split("T")[0]},...i.movimientosEquipos];return cn("isp_movimientosEquipos",l),{movimientosEquipos:l}})});async function hn(s,e){try{await sl(s,e)}catch(t){console.error(`Error saving to DB (${s}):`,t)}}async function Vo(s){try{const{branding:e,customRolePermissions:t,whatsappCategories:i,theme:a}=s();await wN({branding:e||{},customRolePermissions:t||null,whatsappCategories:i||[],theme:a||"default"})}catch(e){console.warn("Error syncing settings to cloud:",e)}}const MN=(s,e)=>({user:null,loading:!0,setUser:t=>{s({user:t,currentUser:t}),t?localStorage.setItem("isp_user",JSON.stringify(t)):localStorage.removeItem("isp_user")},initAuth:()=>{const t=localStorage.getItem("isp_user");if(t)try{const i=JSON.parse(t);s({user:i,currentUser:i,loading:!1})}catch{localStorage.removeItem("isp_user"),s({loading:!1})}else s({loading:!1});e().loadAuthorizedEmails?.()},logout:()=>{s({user:null,currentUser:null}),localStorage.removeItem("isp_user")},theme:"default",setTheme:t=>{s({theme:t}),hn("isp_theme",t),t==="default"?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",t),setTimeout(()=>Vo(e),100)},activePage:"dashboard",setActivePage:t=>s({activePage:t}),prefillVisita:null,setPrefillVisita:t=>s({prefillVisita:t}),clearPrefillVisita:()=>s({prefillVisita:null}),prefillSoporte:null,setPrefillSoporte:t=>s({prefillSoporte:t}),clearPrefillSoporte:()=>s({prefillSoporte:null}),templates:[],addTemplate:t=>s(i=>{const a=Bn(i.templates,"TPL"),l=[{...t,id:a,uso:0},...i.templates];return hn("isp_templates",l),{templates:l}}),updateTemplate:(t,i)=>s(a=>{const l=a.templates.map(c=>c.id===t?{...c,...i}:c);return hn("isp_templates",l),{templates:l}}),deleteTemplate:t=>s(i=>{const a=i.templates.filter(l=>l.id!==t);return hn("isp_templates",a),{templates:a}}),incrementTemplateUse:t=>s(i=>{const a=i.templates.map(l=>l.id===t?{...l,uso:(l.uso||0)+1}:l);return hn("isp_templates",a),{templates:a}}),whatsappLogs:[],addWhatsappLog:t=>s(i=>{const a=Bn(i.whatsappLogs,"WA"),l=[{...t,id:a,fecha:new Date().toISOString()},...i.whatsappLogs];return hn("isp_whatsappLogs",l),{whatsappLogs:l}}),campaignActive:!1,campaignQueue:[],campaignIndex:0,setCampaign:t=>s(t),whatsappCategories:[],addCategory:t=>{s(i=>{const a=i.whatsappCategories.length>0?i.whatsappCategories:["Cobranza","General","Soporte","Promocin"];if(a.includes(t))return{};const l=[...a,t];return hn("isp_whatsappCategories",l),{whatsappCategories:l}}),setTimeout(()=>Vo(e),100)},deleteCategory:t=>{s(i=>{const l=(i.whatsappCategories.length>0?i.whatsappCategories:["Cobranza","General","Soporte","Promocin"]).filter(c=>c!==t);return hn("isp_whatsappCategories",l),{whatsappCategories:l}}),setTimeout(()=>Vo(e),100)},updateCategory:(t,i)=>{s(a=>{const c=(a.whatsappCategories.length>0?a.whatsappCategories:["Cobranza","General","Soporte","Promocin"]).map(p=>p===t?i:p);hn("isp_whatsappCategories",c);const d=a.templates.map(p=>p.categoria===t?{...p,categoria:i}:p);return hn("isp_templates",d),{whatsappCategories:c,templates:d}}),setTimeout(()=>Vo(e),100)},branding:{appName:"ISP System",appVersion:"v2.0 Mobile",appIcon:null,zoneName:"CARABAYLLO",syncLabel:""},setBranding:t=>{s(i=>{const a={...i.branding||{},...t};return hn("isp_branding",a),{branding:a}}),setTimeout(()=>Vo(e),100)},customRolePermissions:null,setCustomRolePermissions:t=>{s(()=>(hn("isp_customRolePermissions",t),{customRolePermissions:t})),setTimeout(()=>Vo(e),100)},loadSettingsFromCloud:async()=>{try{const t=await RN();if(t){const i={};t.branding&&(i.branding=t.branding),t.customRolePermissions!==void 0&&(i.customRolePermissions=t.customRolePermissions),t.whatsappCategories&&(i.whatsappCategories=t.whatsappCategories),t.theme&&(i.theme=t.theme,t.theme==="default"?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",t.theme)),Object.keys(i).length>0&&(s(i),i.branding&&hn("isp_branding",i.branding),i.customRolePermissions!==void 0&&hn("isp_customRolePermissions",i.customRolePermissions),i.whatsappCategories&&hn("isp_whatsappCategories",i.whatsappCategories),i.theme&&hn("isp_theme",i.theme))}}catch(t){console.warn("Error loading settings from cloud:",t)}},uploadImage:async(t,i)=>(console.log(`[STORE] Mock uploading ${t.name} to ${i}`),new Promise(a=>{setTimeout(()=>{a(URL.createObjectURL(t))},800)})),toasts:[],addToast:t=>s(i=>{const l={id:Date.now()+Math.random(),duration:3e3,type:"success",...t};return{toasts:[...i.toasts,l]}}),removeToast:t=>s(i=>({toasts:i.toasts.filter(a=>a.id!==t)}))}),PN=(s,e)=>({authorizedEmails:[],loadAuthorizedEmails:()=>{const t=localStorage.getItem("isp_authorized_emails");if(t)try{s({authorizedEmails:JSON.parse(t)})}catch(i){console.error("Error loading authorized emails:",i)}},addAuthorizedEmail:t=>{const i=e().authorizedEmails,a=t.toLowerCase().trim();if(!i.includes(a)){const l=[...i,a];return s({authorizedEmails:l}),localStorage.setItem("isp_authorized_emails",JSON.stringify(l)),!0}return!1},removeAuthorizedEmail:t=>{const i=e().authorizedEmails.filter(a=>a!==t.toLowerCase().trim());s({authorizedEmails:i}),localStorage.setItem("isp_authorized_emails",JSON.stringify(i))},isEmailAuthorized:t=>{const i=e().authorizedEmails;return i.length===0?!0:i.includes(t?.toLowerCase()?.trim())}}),qt={SUPER_ADMIN:"SUPER_ADMIN",ADMIN:"ADMIN",TECNICO:"TECNICO",VIEWER:"VIEWER"},he={NONE:"none",READ:"read",WRITE:"write",ADMIN:"admin"},se={DASHBOARD:"dashboard",CLIENTES:"clientes",TICKETS:"tickets",AVERIAS:"averias",INSTALACIONES:"instalaciones",VISITAS:"visitas",TECNICOS:"tecnicos",EQUIPOS:"equipos",PLANTA_EXTERNA:"planta_externa",POST_VENTA:"post_venta",SOPORTE_REMOTO:"soporte_remoto",REQUERIMIENTOS:"requerimientos",WHATSAPP:"whatsapp",REPORTES:"reportes",CONFIGURACION:"configuracion",USUARIOS:"usuarios"},AA={[qt.SUPER_ADMIN]:{[se.DASHBOARD]:he.ADMIN,[se.CLIENTES]:he.ADMIN,[se.TICKETS]:he.ADMIN,[se.AVERIAS]:he.ADMIN,[se.INSTALACIONES]:he.ADMIN,[se.VISITAS]:he.ADMIN,[se.TECNICOS]:he.ADMIN,[se.EQUIPOS]:he.ADMIN,[se.PLANTA_EXTERNA]:he.ADMIN,[se.POST_VENTA]:he.ADMIN,[se.SOPORTE_REMOTO]:he.ADMIN,[se.REQUERIMIENTOS]:he.ADMIN,[se.WHATSAPP]:he.ADMIN,[se.REPORTES]:he.ADMIN,[se.CONFIGURACION]:he.ADMIN,[se.USUARIOS]:he.ADMIN},[qt.ADMIN]:{[se.DASHBOARD]:he.ADMIN,[se.CLIENTES]:he.ADMIN,[se.TICKETS]:he.ADMIN,[se.AVERIAS]:he.ADMIN,[se.INSTALACIONES]:he.ADMIN,[se.VISITAS]:he.ADMIN,[se.TECNICOS]:he.ADMIN,[se.EQUIPOS]:he.ADMIN,[se.PLANTA_EXTERNA]:he.ADMIN,[se.POST_VENTA]:he.ADMIN,[se.SOPORTE_REMOTO]:he.ADMIN,[se.REQUERIMIENTOS]:he.ADMIN,[se.WHATSAPP]:he.ADMIN,[se.REPORTES]:he.ADMIN,[se.CONFIGURACION]:he.WRITE,[se.USUARIOS]:he.NONE},[qt.TECNICO]:{[se.DASHBOARD]:he.READ,[se.CLIENTES]:he.WRITE,[se.TICKETS]:he.WRITE,[se.AVERIAS]:he.WRITE,[se.INSTALACIONES]:he.WRITE,[se.VISITAS]:he.WRITE,[se.TECNICOS]:he.READ,[se.EQUIPOS]:he.WRITE,[se.PLANTA_EXTERNA]:he.WRITE,[se.POST_VENTA]:he.WRITE,[se.SOPORTE_REMOTO]:he.WRITE,[se.REQUERIMIENTOS]:he.WRITE,[se.WHATSAPP]:he.WRITE,[se.REPORTES]:he.READ,[se.CONFIGURACION]:he.NONE,[se.USUARIOS]:he.NONE},[qt.VIEWER]:{[se.DASHBOARD]:he.READ,[se.CLIENTES]:he.READ,[se.TICKETS]:he.READ,[se.AVERIAS]:he.READ,[se.INSTALACIONES]:he.READ,[se.VISITAS]:he.READ,[se.TECNICOS]:he.READ,[se.EQUIPOS]:he.READ,[se.PLANTA_EXTERNA]:he.READ,[se.POST_VENTA]:he.READ,[se.SOPORTE_REMOTO]:he.READ,[se.REQUERIMIENTOS]:he.READ,[se.WHATSAPP]:he.READ,[se.REPORTES]:he.READ,[se.CONFIGURACION]:he.NONE,[se.USUARIOS]:he.NONE}},Z4={[se.DASHBOARD]:"Dashboard",[se.CLIENTES]:"Clientes",[se.TICKETS]:"Tickets",[se.AVERIAS]:"Averas",[se.INSTALACIONES]:"Instalaciones",[se.VISITAS]:"Visitas Tcnicas",[se.TECNICOS]:"Tcnicos",[se.EQUIPOS]:"Equipos",[se.PLANTA_EXTERNA]:"Planta Externa",[se.POST_VENTA]:"Post-Venta",[se.SOPORTE_REMOTO]:"Soporte Remoto",[se.REQUERIMIENTOS]:"Requerimientos",[se.WHATSAPP]:"WhatsApp",[se.REPORTES]:"Reportes",[se.CONFIGURACION]:"Configuracin",[se.USUARIOS]:"Usuarios"},W4={[qt.SUPER_ADMIN]:{label:"Super Administrador",desc:"Acceso total + gestin de usuarios",color:"purple"},[qt.ADMIN]:{label:"Administrador",desc:"Acceso total operativo",color:"blue"},[qt.TECNICO]:{label:"Tcnico",desc:"Acceso a mdulos operativos",color:"green"},[qt.VIEWER]:{label:"Visualizador",desc:"Solo lectura",color:"gray"}},Oa="users",LN=async()=>{const s=bt();if(!s)throw new Error("Firebase no configurado");const e=yd(Na(s,Oa),sN("createdAt","desc")),t=await bc(e),i=[];return t.forEach(a=>{i.push({uid:a.id,...a.data()})}),i},wA=async s=>{const e=bt();if(!e)throw new Error("Firebase no configurado");const t=yd(Na(e,Oa),Ly("email","==",s)),i=await bc(t);if(i.empty)return null;const a=i.docs[0];return{uid:a.id,...a.data()}},UN=async s=>{const e=bt();if(!e)throw new Error("Firebase no configurado");const t=ot(e,Oa,s),i=await ds(t);return i.exists()?{uid:i.id,...i.data()}:null},kN=async(s,e,t=null)=>{const i=bt();if(!i)throw new Error("Firebase no configurado");if(await wA(s.email))throw new Error("Ya existe un usuario con este email");const l=t||`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,c=new Date().toISOString(),d={email:s.email,nombre:s.nombre,foto:s.foto||null,rol:s.rol||qt.VIEWER,permisos:s.permisos||AA[s.rol||qt.VIEWER],authType:s.authType||"google_oauth",activo:!0,createdAt:c,updatedAt:c,createdBy:e,ultimoAcceso:null};return await Ti(ot(i,Oa,l),d),{uid:l,...d}},zN=async(s,e)=>{const t=bt();if(!t)throw new Error("Firebase no configurado");const i=ot(t,Oa,s),a=await ds(i);if(!a.exists())throw new Error("Usuario no encontrado");const l={...e,updatedAt:new Date().toISOString()};return await vA(i,l),{uid:s,...a.data(),...l}},uS=async s=>{const e=bt();if(!e)throw new Error("Firebase no configurado");const t=ot(e,Oa,s);await vA(t,{ultimoAcceso:new Date().toISOString()})},BN=async s=>{const e=bt();if(!e)throw new Error("Firebase no configurado");return await vd(ot(e,Oa,s)),!0},qN=(s,e)=>({currentUser:null,allUsers:[],usersLoading:!1,usersError:null,setCurrentUser:t=>s({currentUser:t}),clearCurrentUser:()=>s({currentUser:null}),loadCurrentUserByEmail:async t=>{try{s({usersLoading:!0,usersError:null});const i=await wA(t);return i?i.activo?(await uS(i.uid),s({currentUser:i,user:i,usersLoading:!1}),localStorage.setItem("isp_user",JSON.stringify(i)),i):(s({currentUser:null,usersLoading:!1,usersError:"Tu cuenta ha sido desactivada. Contacta al administrador."}),null):(s({currentUser:null,usersLoading:!1,usersError:"Usuario no autorizado. Contacta al administrador."}),null)}catch(i){return console.error("Error loading current user:",i),s({currentUser:null,usersLoading:!1,usersError:i.message}),null}},getUserByUid:async t=>{try{const i=await UN(t);return!i||!i.activo?null:(await uS(i.uid),i)}catch(i){return console.error("Error loading user by UID:",i),null}},loadAllUsers:async()=>{try{s({usersLoading:!0,usersError:null});const t=await LN();return s({allUsers:t,usersLoading:!1}),t}catch(t){return console.error("Error loading users:",t),s({usersError:t.message,usersLoading:!1}),[]}},createUser:async t=>{try{s({usersLoading:!0,usersError:null});const i=e().currentUser,a=await kN(t,i?.uid||"system"),l=e().allUsers;return s({allUsers:[a,...l],usersLoading:!1}),a}catch(i){throw console.error("Error creating user:",i),s({usersError:i.message,usersLoading:!1}),i}},updateUser:async(t,i)=>{try{s({usersLoading:!0,usersError:null});const a=await zN(t,i),l=e().allUsers.map(d=>d.uid===t?a:d);s({allUsers:l,usersLoading:!1});const c=e().currentUser;if(c?.uid===t){s({currentUser:{...c,...a}});const d=localStorage.getItem("isp_user");if(d)try{const p=JSON.parse(d);p.uid===t&&localStorage.setItem("isp_user",JSON.stringify({...p,...a}))}catch{}}return a}catch(a){throw console.error("Error updating user:",a),s({usersError:a.message,usersLoading:!1}),a}},deleteUser:async t=>{try{s({usersLoading:!0,usersError:null}),await BN(t);const i=e().allUsers.filter(a=>a.uid!==t);return s({allUsers:i,usersLoading:!1}),!0}catch(i){throw console.error("Error deleting user:",i),s({usersError:i.message,usersLoading:!1}),i}},toggleUserStatus:async t=>{try{const i=e().allUsers.find(l=>l.uid===t);if(!i)throw new Error("Usuario no encontrado");const a=!i.activo;return await e().updateUser(t,{activo:a}),a}catch(i){throw console.error("Error toggling user status:",i),i}},updateUserPermissions:async(t,i)=>{try{return await e().updateUser(t,{permisos:i})}catch(a){throw console.error("Error updating permissions:",a),a}},hasPermission:(t,i=he.READ)=>{const a=e().currentUser;if(!a)return!1;if(a.rol==="SUPER_ADMIN")return!0;let l=a.permisos?.[t];if(!l){const v=e().customRolePermissions?.[a.rol]||AA[a.rol];v&&(l=v[t])}if(!l)return!1;const c=[he.NONE,he.READ,he.WRITE,he.ADMIN],d=c.indexOf(l),p=c.indexOf(i);return d>=p},canRead:t=>e().hasPermission(t,he.READ),canWrite:t=>e().hasPermission(t,he.WRITE),canAdmin:t=>e().hasPermission(t,he.ADMIN),canManageUsers:()=>e().hasPermission(se.USUARIOS,he.ADMIN),getAccessibleModules:()=>e().currentUser?Object.keys(se).filter(i=>{const a=se[i];return e().hasPermission(a,he.READ)}):[]}),jN=[{id:"CAT-01",nombre:"Falla de Internet",descripcion:"Problemas de navegacin, velocidad y latencia"},{id:"CAT-02",nombre:"Falla de Cable",descripcion:"Problemas con seal de TV o decodificadores"},{id:"CAT-03",nombre:"Configuracin",descripcion:"Cambios lgicos (WiFi, puertos, reseteo)"},{id:"CAT-04",nombre:"Infraestructura",descripcion:"Daos en red externa (postes, cajas, cables)"},{id:"CAT-05",nombre:"Hardware",descripcion:"Fallas fsicas en equipos del cliente"},{id:"CAT-06",nombre:"Administrativo",descripcion:"Facturacin, cortes por pago, planes"}],FN=[{id:"SUB-101",categoriaId:"CAT-01",nombre:"Corte Total de Internet",tipoAtencion:"Soporte Remoto"},{id:"SUB-102",categoriaId:"CAT-01",nombre:"Baja Velocidad",tipoAtencion:"Soporte Remoto"},{id:"SUB-103",categoriaId:"CAT-01",nombre:"Intermitencia",tipoAtencion:"Soporte Remoto"},{id:"SUB-104",categoriaId:"CAT-01",nombre:"Pginas Especficas",tipoAtencion:"Soporte Remoto"},{id:"SUB-105",categoriaId:"CAT-01",nombre:"Internet Lento",tipoAtencion:"Soporte Remoto"},{id:"SUB-201",categoriaId:"CAT-02",nombre:"Sin Seal de TV",tipoAtencion:"Visita Tcnica"},{id:"SUB-202",categoriaId:"CAT-02",nombre:"Imagen Congelada",tipoAtencion:"Visita Tcnica"},{id:"SUB-203",categoriaId:"CAT-02",nombre:"Decodificador",tipoAtencion:"Visita Tcnica"},{id:"SUB-301",categoriaId:"CAT-03",nombre:"Configurar WiFi",tipoAtencion:"Soporte Remoto"},{id:"SUB-302",categoriaId:"CAT-03",nombre:"Abrir Puertos",tipoAtencion:"Soporte Remoto"},{id:"SUB-303",categoriaId:"CAT-03",nombre:"Reseteo de Equipo",tipoAtencion:"Soporte Remoto"},{id:"SUB-401",categoriaId:"CAT-04",nombre:"Dao en Acometida",tipoAtencion:"Visita Tcnica"},{id:"SUB-402",categoriaId:"CAT-04",nombre:"Dao en NAP",tipoAtencion:"Visita Tcnica"},{id:"SUB-403",categoriaId:"CAT-04",nombre:"Traslado de Servicio",tipoAtencion:"Visita Tcnica"},{id:"SUB-501",categoriaId:"CAT-05",nombre:"Router/ONT Averiado",tipoAtencion:"Visita Tcnica"},{id:"SUB-502",categoriaId:"CAT-05",nombre:"Transformador/POE",tipoAtencion:"Visita Tcnica"},{id:"SUB-503",categoriaId:"CAT-05",nombre:"Puerto LAN Daado",tipoAtencion:"Visita Tcnica"},{id:"SUB-601",categoriaId:"CAT-06",nombre:"Reconexin por Pago",tipoAtencion:"Soporte Remoto"},{id:"SUB-602",categoriaId:"CAT-06",nombre:"Cambio de Plan",tipoAtencion:"Soporte Remoto"},{id:"SUB-603",categoriaId:"CAT-06",nombre:"Facturacin",tipoAtencion:"Soporte Remoto"}],HN=[{id:"PRI-01",subcategoriaId:"SUB-101",prioridad:"Crtica",tiempoLimite:"4 horas",impacto:"Cliente incomunicado"},{id:"PRI-02",subcategoriaId:"SUB-102",prioridad:"Media",tiempoLimite:"24 horas",impacto:"Servicio degradado"},{id:"PRI-03",subcategoriaId:"SUB-201",prioridad:"Alta",tiempoLimite:"12 horas",impacto:"Sin TV"},{id:"PRI-04",subcategoriaId:"SUB-301",prioridad:"Baja",tiempoLimite:"48 horas",impacto:"Cambio esttico"},{id:"PRI-05",subcategoriaId:"SUB-501",prioridad:"Alta",tiempoLimite:"8 horas",impacto:"Hardware daado"},{id:"PRI-06",subcategoriaId:"SUB-601",prioridad:"Media",tiempoLimite:"4 horas",impacto:"Reconexin"},{id:"PRI-07",subcategoriaId:"SUB-401",prioridad:"Alta",tiempoLimite:"12 horas",impacto:"Infraestructura daada"}],GN=[{id:"EST-01",entidad:"Ticket",nombre:"Abierto",color:"#ef4444",orden:1,esFinal:!1},{id:"EST-02",entidad:"Ticket",nombre:"En Proceso",color:"#f59e0b",orden:2,esFinal:!1},{id:"EST-03",entidad:"Ticket",nombre:"Escalado",color:"#f97316",orden:3,esFinal:!1},{id:"EST-04",entidad:"Ticket",nombre:"Resuelto",color:"#10b981",orden:4,esFinal:!0},{id:"EST-05",entidad:"Ticket",nombre:"Cerrado",color:"#6b7280",orden:5,esFinal:!0},{id:"EST-06",entidad:"Ticket",nombre:"Cancelado",color:"#9ca3af",orden:6,esFinal:!0},{id:"EST-07",entidad:"Cliente",nombre:"Activo",color:"#10b981",orden:1,esFinal:!1},{id:"EST-08",entidad:"Cliente",nombre:"Suspendido",color:"#f59e0b",orden:2,esFinal:!1},{id:"EST-09",entidad:"Cliente",nombre:"Retirado",color:"#ef4444",orden:3,esFinal:!0},{id:"EST-10",entidad:"Visita",nombre:"Programada",color:"#3b82f6",orden:1,esFinal:!1},{id:"EST-11",entidad:"Visita",nombre:"En Ruta",color:"#8b5cf6",orden:2,esFinal:!1},{id:"EST-12",entidad:"Visita",nombre:"En Sitio",color:"#f59e0b",orden:3,esFinal:!1},{id:"EST-13",entidad:"Visita",nombre:"Completada",color:"#10b981",orden:4,esFinal:!0},{id:"EST-14",entidad:"Visita",nombre:"Cancelada",color:"#9ca3af",orden:5,esFinal:!0},{id:"EST-15",entidad:"Solicitud",nombre:"Pendiente",color:"#f59e0b",orden:1,esFinal:!1},{id:"EST-16",entidad:"Solicitud",nombre:"Aprobada",color:"#3b82f6",orden:2,esFinal:!1},{id:"EST-17",entidad:"Solicitud",nombre:"En Ejecucin",color:"#8b5cf6",orden:3,esFinal:!1},{id:"EST-18",entidad:"Solicitud",nombre:"Ejecutada",color:"#10b981",orden:4,esFinal:!0},{id:"EST-19",entidad:"Solicitud",nombre:"Rechazada",color:"#ef4444",orden:5,esFinal:!0}],KN=[{id:"SRV-01",nombre:"Punto Adicional CATV",tipo:"Presencial",precio:15,descripcion:"Instalacin de punto adicional de cable TV"},{id:"SRV-02",nombre:"Punto Adicional Red",tipo:"Presencial",precio:80,descripcion:"Instalacin de punto de red cableado"},{id:"SRV-03",nombre:"Traslado de Servicio",tipo:"Presencial",precio:120,descripcion:"Reubicacin del servicio a otra direccin"},{id:"SRV-04",nombre:"Configuracin IPTV",tipo:"Remoto",precio:0,descripcion:"Configuracin de IPTV (solo Radio Enlace)"},{id:"SRV-05",nombre:"Repetidor WiFi",tipo:"Presencial",precio:50,descripcion:"Instalacin de repetidor WiFi"},{id:"SRV-06",nombre:"Cambio de Plan",tipo:"Remoto",precio:0,descripcion:"Upgrade o downgrade de plan de internet"},{id:"SRV-07",nombre:"Reconexin",tipo:"Remoto",precio:0,descripcion:"Reconexin de servicio por pago"}],QN=[{id:"TREQ-01",nombre:"Compra de Materiales",categoria:"Operativo"},{id:"TREQ-02",nombre:"Compra de Equipos",categoria:"Operativo"},{id:"TREQ-03",nombre:"Solicitud de Presupuesto",categoria:"Administrativo"},{id:"TREQ-04",nombre:"Contratacin de Servicio",categoria:"Administrativo"},{id:"TREQ-05",nombre:"Permiso Municipal",categoria:"Legal"},{id:"TREQ-06",nombre:"Trmite Legal",categoria:"Legal"},{id:"TREQ-07",nombre:"Pago a Proveedor",categoria:"Financiero"},{id:"TREQ-08",nombre:"Solicitud de Boleta",categoria:"Financiero"},{id:"TREQ-09",nombre:"Solicitud de Factura",categoria:"Financiero"},{id:"TREQ-10",nombre:"Cambio de Titularidad",categoria:"Administrativo"},{id:"TREQ-11",nombre:"Otro",categoria:"General"}],gt=NS((s,e)=>({storeReady:!1,isMigrating:!1,...VN(s),...NN(s),...ON(s),...MN(s,e),...PN(s,e),...qN(s,e),hydrateStore:async()=>{try{const t=await DN(),i=t.some(c=>c.startsWith("isp_")),a=localStorage.getItem("migration_v1_done");if(i&&!a){s({isMigrating:!0}),console.log("Detectados datos legacy. Iniciando migracin...");const c={};for(const p of t)if(p.startsWith("isp_")){const g=await oS(p);c[p.replace("isp_","")]=g}await SN(c)?(localStorage.setItem("migration_v1_done","true"),console.log("Migracin finalizada.")):console.error("Fall la migracin."),s({isMigrating:!1})}const l={};for(const[c,d]of Object.entries(bA))try{const p=await oS(c);p!=null&&(l[d]=p)}catch{}Object.keys(l).length>0&&s(l),l.theme&&l.theme!=="default"&&document.documentElement.setAttribute("data-theme",l.theme),e().loadSettingsFromCloud?.(),s({storeReady:!0})}catch(t){console.error("Error durante hydrateStore:",t),s({storeReady:!0})}},tecnicos:[],addTecnico:t=>{const i=e(),a=Bn(i.tecnicos,"TEC"),l={...t,id:a};s(c=>({tecnicos:[l,...c.tecnicos]})),Cg("tecnicos",l)},updateTecnico:(t,i)=>{s(a=>({tecnicos:a.tecnicos.map(l=>l.id===t?{...l,...i}:l)})),Cg("tecnicos",{id:t,...i})},deleteTecnico:t=>{s(i=>({tecnicos:i.tecnicos.filter(a=>a.id!==t)})),TA("tecnicos",t)},applyDeltas:t=>{const i=["clients","tickets","averias","tecnicos","equipos","visitas","instalaciones","derivaciones","postVenta","sesionesRemoto","movimientosEquipos","whatsappLogs","templates","requerimientos","columnPrefs","cleaningOptions","importHistory","branding","customRolePermissions","whatsappCategories","categorias","subcategorias","prioridadesSLA","estadosCatalogo","catalogoServicios","tiposRequerimiento","clientChanges"];s(l=>{const c={};for(const d of i)if(t[d]&&Array.isArray(t[d])&&t[d].length>0){const p=t[d],g=l[d]||[];if(!Array.isArray(g))c[d]=p;else{const v=new Map(g.map(T=>[T.id,T]));for(const T of p)v.set(T.id,T);c[d]=Array.from(v.values())}}return c});const a=e();for(const l of i)if(t[l]&&Array.isArray(t[l])&&t[l].length>0){const c=lS[l];c&&a[l]!==void 0&&sl(c,a[l]).catch(()=>{})}},restoreSystem:t=>{const i=["clients","tickets","averias","tecnicos","equipos","visitas","instalaciones","derivaciones","postVenta","sesionesRemoto","movimientosEquipos","whatsappLogs","templates","requerimientos","columnPrefs","cleaningOptions","importHistory","branding","customRolePermissions","whatsappCategories","categorias","subcategorias","prioridadesSLA","estadosCatalogo","catalogoServicios","tiposRequerimiento","clientChanges"],a={};for(const l of i)t[l]!==void 0&&(a[l]=t[l]);if(Object.keys(a).length>0){s(a);for(const[l,c]of Object.entries(lS))a[l]!==void 0&&sl(c,a[l]).catch(()=>{})}t.theme&&(s({theme:t.theme}),t.theme==="default"?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",t.theme))},categorias:jN,subcategorias:FN,prioridadesSLA:HN,estadosCatalogo:GN,catalogoServicios:KN,tiposRequerimiento:QN,addServicioCatalogo:t=>s(i=>{const a=i.catalogoServicios.reduce((c,d)=>{const p=parseInt(d.id.split("-")[1]||0);return!isNaN(p)&&p>c?p:c},0),l=`SRV-${String(a+1).padStart(2,"0")}`;return{catalogoServicios:[...i.catalogoServicios,{...t,id:l}]}}),deleteServicioCatalogo:t=>s(i=>({catalogoServicios:i.catalogoServicios.filter(a=>a.id!==t)})),addTipoRequerimiento:t=>s(i=>{const a=i.tiposRequerimiento.reduce((c,d)=>{const p=parseInt(d.id.split("-")[1]||0);return!isNaN(p)&&p>c?p:c},0),l=`TREQ-${String(a+1).padStart(2,"0")}`;return{tiposRequerimiento:[...i.tiposRequerimiento,{...t,id:l}]}}),updateTipoRequerimiento:(t,i)=>s(a=>({tiposRequerimiento:a.tiposRequerimiento.map(l=>l.id===t?{...l,...i}:l)})),deleteTipoRequerimiento:t=>s(i=>({tiposRequerimiento:i.tiposRequerimiento.filter(a=>a.id!==t)})),getSubcategoriasByCategoria:t=>e().subcategorias.filter(i=>i.categoriaId===t),getEstadosByEntidad:t=>e().estadosCatalogo.filter(i=>i.entidad===t),getSLABySubcategoria:t=>e().prioridadesSLA.find(i=>i.subcategoriaId===t)})),Dg={SUPER_ADMIN:{label:"Super Administrador",color:"#a855f7",permissions:["*"]},ADMIN:{label:"Administrador",color:"#3b82f6",permissions:["*"]},TECNICO:{label:"Tcnico",color:"#10b981",permissions:["visitas","equipos","tickets","clientes","averias","instalaciones"]},VIEWER:{label:"Visualizador",color:"#64748b",permissions:["dashboard","reportes"]}},RA=j.createContext(null);function YN({children:s}){const e=gt(p=>p.user),t=gt(p=>p.loading),i=gt(p=>p.setUser),a=gt(p=>p.logout),l=gt(p=>p.initAuth);j.useEffect(()=>{l()},[l]);const c=j.useCallback(p=>{i(p)},[i]),d=j.useCallback(p=>{if(!e)return!1;const g=Dg[e.rol];return g?g.permissions.includes("*")||g.permissions.includes(p):!1},[e]);return G.jsx(RA.Provider,{value:{user:e,login:c,logout:a,loading:t,hasPermission:d},children:s})}function Td(){const s=j.useContext(RA);if(!s)throw new Error("useAuth must be used within AuthProvider");return s}const IA=(...s)=>s.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();const $N=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const XN=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());const cS=s=>{const e=XN(s);return e.charAt(0).toUpperCase()+e.slice(1)};var JN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZN=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const WN=j.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...d},p)=>j.createElement("svg",{ref:p,...JN,width:e,height:e,stroke:s,strokeWidth:i?Number(t)*24/Number(e):t,className:IA("lucide",a),...!l&&!ZN(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>j.createElement(g,v)),...Array.isArray(l)?l:[l]]));const Ye=(s,e)=>{const t=j.forwardRef(({className:i,...a},l)=>j.createElement(WN,{ref:l,iconNode:e,className:IA(`lucide-${$N(cS(s))}`,`lucide-${s}`,i),...a}));return t.displayName=cS(s),t};const eO=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],tO=Ye("box",eO);const nO=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],iO=Ye("cable",nO);const rO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sO=Ye("calendar",rO);const aO=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],oO=Ye("chart-column",aO);const lO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],uO=Ye("circle-check-big",lO);const cO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],hO=Ye("circle-x",cO);const fO=[["path",{d:"M10.94 5.274A7 7 0 0 1 15.71 10h1.79a4.5 4.5 0 0 1 4.222 6.057",key:"1uxyv8"}],["path",{d:"M18.796 18.81A4.5 4.5 0 0 1 17.5 19H9A7 7 0 0 1 5.79 5.78",key:"99tcn7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],dO=Ye("cloud-off",fO);const mO=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],pO=Ye("cloud-upload",mO);const gO=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],yO=Ye("cloud",gO);const _O=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vO=Ye("file-text",_O);const EO=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],TO=Ye("hard-hat",EO);const SO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],CA=Ye("info",SO);const bO=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],AO=Ye("layout-dashboard",bO);const wO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],RO=Ye("loader-circle",wO);const IO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Vg=Ye("log-out",IO);const CO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],xO=Ye("menu",CO);const DO=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],VO=Ye("message-square",DO);const NO=[["path",{d:"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8",key:"10dyio"}],["path",{d:"M10 19v-3.96 3.15",key:"1irgej"}],["path",{d:"M7 19h5",key:"qswx4l"}],["rect",{width:"6",height:"10",x:"16",y:"12",rx:"2",key:"1egngj"}]],OO=Ye("monitor-smartphone",NO);const MO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xA=Ye("refresh-cw",MO);const PO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LO=Ye("settings",PO);const UO=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],kO=Ye("shopping-bag",UO);const zO=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],BO=Ye("ticket",zO);const qO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jO=Ye("trash-2",qO);const FO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],By=Ye("triangle-alert",FO);const HO=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],GO=Ye("user-cog",HO);const KO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],QO=Ye("users",KO);const YO=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$O=Ye("wifi-off",YO);const XO=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],JO=Ye("wifi",XO);const ZO=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],WO=Ye("wrench",ZO);const e4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],t4=Ye("x",e4);`${Date.now()}${Math.random().toString(36).slice(2,8)}`;function n4(){const s=gt.getState();return{clients:s.clients,tickets:s.tickets,averias:s.averias,tecnicos:s.tecnicos,equipos:s.equipos,visitas:s.visitas,instalaciones:s.instalaciones,derivaciones:s.derivaciones,postVenta:s.postVenta,sesionesRemoto:s.sesionesRemoto,movimientosEquipos:s.movimientosEquipos,requerimientos:s.requerimientos,whatsappLogs:s.whatsappLogs,templates:s.templates,columnPrefs:s.columnPrefs,cleaningOptions:s.cleaningOptions,importHistory:s.importHistory,branding:s.branding,customRolePermissions:s.customRolePermissions,whatsappCategories:s.whatsappCategories}}const Es=NS((s,e)=>({isSyncing:!1,lastSync:localStorage.getItem("isp_last_sync")||null,syncError:null,syncMode:"manual",backupVersions:[],loadingVersions:!1,restoringVersion:null,syncProgress:null,liveEnabled:!1,livePushing:!1,lastLiveUpdate:null,liveUnsubscribe:null,isReceivingRemoteData:!1,offlineQueue:JSON.parse(localStorage.getItem("isp_offline_queue")||"[]"),addOfflineAction:t=>{s(i=>{const a=i.offlineQueue.filter(l=>!(l.collectionName===t.collectionName&&l.id===t.id));return a.push({...t,timestamp:Date.now()}),localStorage.setItem("isp_offline_queue",JSON.stringify(a)),{offlineQueue:a}})},removeOfflineAction:(t,i)=>{s(a=>{const l=a.offlineQueue.filter(c=>!(c.collectionName===i&&c.id===t));return localStorage.setItem("isp_offline_queue",JSON.stringify(l)),{offlineQueue:l}})},processOfflineQueue:async()=>{const t=e();if(t.offlineQueue.length===0||!navigator.onLine)return;s({isSyncing:!0});const i=[...t.offlineQueue];for(const a of i)try{a.type==="save"?await _N(a.collectionName,a.data):a.type==="delete"&&await EN(a.collectionName,a.id),e().removeOfflineAction(a.id,a.collectionName)}catch(l){console.error(`Error purgando elemento offline col:${a.collectionName} id:${a.id}`,l)}s({isSyncing:!1})},setSyncMode:t=>s({syncMode:t}),startLiveSync:()=>{if(e().liveEnabled)return;const t=[],i=vN(l=>{const c=gt.getState();c.applyDeltas&&l.length>0&&(s({isReceivingRemoteData:!0}),c.applyDeltas({tickets:l}),s({isReceivingRemoteData:!1}))});t.push(i);const a=gt.subscribe((l,c)=>{if(!e().liveEnabled||e().isReceivingRemoteData)return;const d=["clients","tickets","averias","tecnicos","equipos","visitas","instalaciones","derivaciones","postVenta","sesionesRemoto","movimientosEquipos","requerimientos","whatsappLogs","templates","whatsappCategories","categorias","subcategorias","prioridadesSLA","estadosCatalogo","catalogoServicios","tiposRequerimiento"],p=[];d.forEach(g=>{const v=c[g]||[],T=l[g]||[];if(v===T&&v.length===T.length)return;const b=new Map(v.map(F=>[F.id,F])),D=new Map(T.map(F=>[F.id,F]));for(const[F,K]of D.entries()){const z=b.get(F);z?JSON.stringify(z)!==JSON.stringify(K)&&p.push({col:g,action:"update",id:F,data:K}):p.push({col:g,action:"insert",id:F,data:K})}for(const F of b.keys())D.has(F)||p.push({col:g,action:"delete",id:F})}),p.length>0&&(p.forEach(g=>{const v=g.col==="clients"?"clients":g.col;g.action==="delete"?TA(v,g.id).catch(console.error):Cg(v,g.data).catch(console.error)}),console.log(`[LiveSync] Se sincronizaron nativamente ${p.length} cambios atmicos.`))});s({liveEnabled:!0,liveUnsubscribe:()=>{t.forEach(l=>l()),a()}}),console.log("[LiveSync] Escuchador atmico de operaciones activado")},stopLiveSync:()=>{const t=e().liveUnsubscribe;t&&t(),s({liveEnabled:!1,liveUnsubscribe:null}),console.log("[LiveSync] Sincronizacin en tiempo real desactivada")},debouncedLivePush:()=>{},livePull:async()=>{s({isSyncing:!0,syncError:null,syncProgress:{step:0,totalSteps:1,label:"Iniciando conexin...",percent:0}});try{const t=d=>s({syncProgress:d}),i=e().lastSync,a=await TN(i,t),l=gt.getState();s({isReceivingRemoteData:!0}),i&&l.applyDeltas?l.applyDeltas(a):l.restoreSystem?l.restoreSystem(a):gt.setState(a),s({isReceivingRemoteData:!1});const c=new Date().toISOString();return localStorage.setItem("isp_last_sync",c),s({lastSync:c,isSyncing:!1,syncProgress:null}),!0}catch(t){return console.error("Live Pull Error:",t),s({isSyncing:!1,syncError:t.message,syncProgress:null}),!1}},syncPush:async()=>{s({isSyncing:!0,syncError:null,syncProgress:{step:0,totalSteps:1,label:"Preparando datos...",percent:0}});try{const t=n4(),a=await bN(t,c=>s({syncProgress:c})),l=new Date().toISOString();return localStorage.setItem("isp_last_sync",l),s({lastSync:l,isSyncing:!1,syncProgress:null}),e().loadVersions(),a}catch(t){return console.error("Sync Push Error:",t),s({isSyncing:!1,syncError:t.message,syncProgress:null}),!1}},syncPull:async()=>{s({isSyncing:!0,syncError:null});try{const t=await AN();if(t){const i=gt.getState().restoreSystem;i&&i(t);const a=new Date().toISOString();return localStorage.setItem("isp_last_sync",a),s({lastSync:a,isSyncing:!1}),!0}else throw new Error("No se encontraron datos de respaldo en la nube.")}catch(t){return console.error("Sync Pull Error:",t),s({isSyncing:!1,syncError:t.message}),!1}},loadVersions:async()=>{s({loadingVersions:!0});try{const t=await SA();return s({backupVersions:t,loadingVersions:!1}),t}catch(t){return console.error("Error loading versions:",t),s({loadingVersions:!1,syncError:t.message}),[]}},restoreVersion:async t=>{s({restoringVersion:t,syncError:null});try{const i=await xg(t);if(i){const a=gt.getState().restoreSystem;a&&a(i);const l=new Date().toISOString();return localStorage.setItem("isp_last_sync",l),s({restoringVersion:null,lastSync:l}),!0}throw new Error("No se encontraron datos para esa versin.")}catch(i){return console.error("Restore Version Error:",i),s({restoringVersion:null,syncError:i.message}),!1}},removeVersion:async t=>{try{return await IN(t),s(i=>({backupVersions:i.backupVersions.filter(a=>a.id!==t)})),!0}catch(i){return console.error("Delete Version Error:",i),s({syncError:i.message}),!1}},downloadVersionData:async t=>{s({restoringVersion:t});try{const i=await xg(t);return s({restoringVersion:null}),i}catch(i){return console.error("Download Version Error:",i),s({restoringVersion:null,syncError:i.message}),null}}}));yN(s=>{Es.getState().addOfflineAction(s)});typeof window<"u"&&window.addEventListener("online",()=>{const s=Es.getState();s.offlineQueue.length>0&&(console.log(" Conexin recuperada. Aplicando retenciones offline..."),s.processOfflineQueue())});const i4=[{label:"Principal",items:[{to:"/",label:"Dashboard",icon:AO},{to:"/clientes",label:"Clientes",icon:QO}]},{label:"Soporte",items:[{to:"/tickets",label:"Tickets",icon:BO},{to:"/averias",label:"Averas",icon:By},{to:"/soporte",label:"Soporte Remoto",icon:OO},{to:"/whatsapp",label:"WhatsApp",icon:VO}]},{label:"Operaciones",items:[{to:"/tecnicos",label:"Tcnicos",icon:WO},{to:"/visitas",label:"Visitas Tcnicas",icon:sO},{to:"/instalaciones",label:"Instalaciones",icon:TO},{to:"/planta-externa",label:"Planta Externa",icon:iO},{to:"/post-venta",label:"Post-Venta",icon:kO},{to:"/requerimientos",label:"Requerimientos",icon:vO}]},{label:"Sistema",items:[{to:"/equipos",label:"Equipos",icon:tO},{to:"/reportes",label:"Reportes",icon:oO},{to:"/usuarios",label:"Usuarios",icon:GO},{to:"/importar",label:"Importar Datos",icon:pO},{to:"/config",label:"Configuracin",icon:LO}]}],r4={"/":se.DASHBOARD,"/clientes":se.CLIENTES,"/tickets":se.TICKETS,"/averias":se.AVERIAS,"/soporte":se.SOPORTE_REMOTO,"/whatsapp":se.WHATSAPP,"/tecnicos":se.TECNICOS,"/visitas":se.VISITAS,"/instalaciones":se.INSTALACIONES,"/planta-externa":se.PLANTA_EXTERNA,"/post-venta":se.POST_VENTA,"/requerimientos":se.REQUERIMIENTOS,"/equipos":se.EQUIPOS,"/reportes":se.REPORTES,"/usuarios":se.USUARIOS,"/config":se.CONFIGURACION,"/importar":se.CLIENTES};function s4({isOpen:s,onClose:e}){const{user:t,logout:i}=Td(),a=Dg[t?.rol]||Dg.TECNICO,l=gt(b=>b.hasPermission),c=gt(b=>b.branding),d=Es(b=>b.livePull),p=Es(b=>b.isSyncing),g=async()=>{await d()},v=b=>b.filter(D=>{if(D.to==="/usuarios")return t?.rol===qt.SUPER_ADMIN;const F=r4[D.to];return F?t?.rol===qt.SUPER_ADMIN?!0:l(F,"read"):!0}),T=G.jsxs("div",{className:"w-[260px] h-full bg-bg-sidebar/95 backdrop-blur-3xl border-r border-white/5 flex flex-col py-6 px-4 shadow-[4px_0_24px_rgba(0,0,0,0.02)] z-10",children:[G.jsxs("div",{className:"flex items-center gap-2.5 px-2 mb-8",children:[c?.appIcon?G.jsx("img",{src:c.appIcon,className:"w-9 h-9 rounded-[10px] object-cover shrink-0",alt:"Logo"}):G.jsx("div",{className:"w-9 h-9 rounded-[10px] flex items-center justify-center text-white shrink-0",style:{background:"linear-gradient(135deg, #3b82f6, #8b5cf6)"},children:G.jsx(JO,{size:18})}),G.jsxs("div",{children:[G.jsx("p",{className:"font-bold text-sm tracking-tight text-white",children:c?.appName||"ISP System"}),G.jsx("p",{className:"text-[10px] text-text-muted",children:c?.appVersion||"v2.0 Mobile"})]}),G.jsx("button",{onClick:e,className:"lg:hidden ml-auto text-text-muted p-1",children:G.jsx(Vg,{size:18,className:"rotate-180"})})]}),G.jsx("nav",{className:"flex-1 flex flex-col gap-1 overflow-y-auto custom-scrollbar",children:i4.map((b,D)=>{const F=v(b.items);return F.length===0?null:G.jsxs("div",{children:[G.jsx("p",{className:"text-[9px] uppercase tracking-widest text-text-muted px-3 pt-3 pb-1 font-semibold",children:b.label}),F.map(K=>{const z=K.icon;return G.jsx(DS,{to:K.to,onClick:()=>{e&&e()},className:({isActive:ne})=>`flex items-center gap-3 py-2.5 px-3.5 rounded-xl border-none text-[13px] cursor-pointer transition-all w-full text-left font-medium outline-none focus-visible:ring-2 focus-visible:ring-accent-blue/50
                      ${ne?"bg-accent-blue/10 text-accent-blue shadow-sm shadow-accent-blue/5":"bg-transparent text-text-secondary hover:bg-text-secondary/5 hover:text-text-primary"}`,children:({isActive:ne})=>G.jsxs(G.Fragment,{children:[G.jsx(z,{size:18,className:ne?"text-accent-blue":"text-text-muted"}),K.label]})},K.to)})]},D)})}),G.jsxs("div",{className:"p-3 rounded-xl bg-bg-secondary border border-border mt-2",children:[G.jsxs("div",{className:"flex items-center gap-2.5 mb-2",children:[G.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold shrink-0",style:{background:a.color+"30",color:a.color},children:t?.nombre?.[0]||"?"}),G.jsxs("div",{className:"flex-1 min-w-0",children:[G.jsx("p",{className:"text-xs font-semibold truncate text-text-primary",children:t?.nombre}),G.jsx("p",{className:"text-[10px] font-medium",style:{color:a.color},children:a.label})]})]}),G.jsxs("button",{onClick:g,disabled:p,className:"flex items-center gap-1.5 w-full justify-center py-1.5 mb-1.5 rounded-lg border border-accent-blue/30 bg-accent-blue/10 text-accent-blue text-[11px] font-semibold cursor-pointer hover:bg-accent-blue/20 transition-colors disabled:opacity-50",children:[G.jsx(xA,{size:12,className:p?"animate-spin":""}),p?"Descargando...":"Sincronizar Cloud"]}),G.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 w-full justify-center py-1.5 rounded-lg border border-border bg-transparent text-text-muted text-[11px] cursor-pointer hover:border-accent-red hover:text-accent-red transition-colors",children:[G.jsx(Vg,{size:12}),"Cerrar Sesin"]})]})]});return G.jsxs(G.Fragment,{children:[s&&G.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 lg:hidden backdrop-blur-sm",onClick:e}),G.jsx("div",{className:`
        fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:z-0
        ${s?"translate-x-0":"-translate-x-full"}
      `,children:T})]})}function a4({onMenuClick:s}){const{user:e,logout:t}=Td(),i=gt(D=>D.dataSource),a=gt(D=>D.lastImport),l=gt(D=>D.branding),c=Es(D=>D.liveEnabled),d=Es(D=>D.livePushing),g=Es(D=>D.offlineQueue)?.length||0,v=a?`ltima: ${new Date(a.date).toLocaleDateString("es-PE")}`:i==="demo"?"Demo":"Sincronizado",T=l?.syncLabel||v,b=()=>{window.confirm("Ests seguro de que deseas cerrar sesin?")&&t()};return G.jsxs("div",{className:"h-14 border-b border-border bg-bg-secondary flex items-center justify-between px-4 lg:px-6 shrink-0 relative z-10 text-text-primary",children:[G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx("button",{onClick:s,className:"lg:hidden p-2 -ml-2 text-text-secondary hover:bg-white/5 rounded-lg active:scale-95 transition-all",children:G.jsx(xO,{size:20})}),G.jsxs("div",{className:"text-xs text-text-muted flex flex-col sm:flex-row sm:items-center sm:gap-1",children:[G.jsx("span",{className:"hidden sm:inline",children:"Zona:"}),G.jsx("span",{className:"text-text-primary font-medium",children:l?.zoneName||"CARABAYLLO"}),G.jsx("span",{className:"hidden sm:inline",children:""}),G.jsx("span",{className:"text-accent-green text-[10px] sm:text-xs bg-accent-green/10 px-2 py-0.5 rounded-full mt-0.5 sm:mt-0 w-fit",children:T})]})]}),G.jsxs("div",{className:"flex items-center gap-3",children:[g>0&&G.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-red-500/10 border border-red-500/20 rounded-md text-red-500",title:`Reteniendo ${g} operaciones sin red`,children:[G.jsx($O,{size:14,className:"animate-pulse"}),G.jsxs("span",{className:"text-[10px] font-medium hidden sm:inline",children:[g," pdtes."]})]}),G.jsxs("div",{className:"flex items-center gap-1.5",title:c?d?"Sincronizando...":"Sync en vivo activo":"Sync desconectado",children:[d?G.jsx(RO,{size:14,className:"text-accent-blue animate-spin"}):c?G.jsx(yO,{size:14,className:"text-accent-green"}):G.jsx(dO,{size:14,className:"text-text-muted"}),G.jsx("span",{className:`text-[10px] font-medium hidden sm:inline ${d?"text-accent-blue":c?"text-accent-green":"text-text-muted"}`,children:d?"Sincronizando":c?"En vivo":"Offline"})]}),G.jsx("span",{className:"text-xs text-text-secondary hidden sm:block",children:e?.email}),G.jsxs("button",{onClick:b,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs text-red-500 hover:bg-red-500/10 rounded-lg transition-colors cursor-pointer border border-red-500/20 hover:border-red-500/40 bg-transparent font-medium",title:"Cerrar sesin",children:[G.jsx(Vg,{size:14}),G.jsx("span",{className:"hidden sm:inline",children:"Cerrar Sesin"})]})]})]})}function o4({children:s}){const[e,t]=j.useState(!1);return G.jsxs("div",{className:"flex h-screen overflow-hidden bg-bg-primary",children:[G.jsx(s4,{isOpen:e,onClose:()=>t(!1)}),G.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden w-full relative",children:[G.jsx(a4,{onMenuClick:()=>t(!0)}),G.jsx("div",{className:"flex-1 overflow-hidden relative",children:s})]})]})}function Gp(){return G.jsx("div",{className:"h-screen flex items-center justify-center bg-bg-primary",children:G.jsxs("div",{className:"text-center",children:[G.jsx("div",{className:"w-12 h-12 border-[3px] border-border border-t-accent-blue rounded-full animate-spin-slow mx-auto mb-4"}),G.jsx("p",{className:"text-text-secondary text-sm",children:"Cargando sistema..."})]})})}function l4(){return null}const u4={success:uO,warning:By,error:hO,info:CA},hS={success:"bg-emerald-500/10 border-emerald-500/30 text-emerald-400",warning:"bg-amber-500/10 border-amber-500/30 text-amber-400",error:"bg-red-500/10 border-red-500/30 text-red-400",info:"bg-blue-500/10 border-blue-500/30 text-blue-400"};function c4({toast:s}){const e=gt(i=>i.removeToast),t=u4[s.type]||CA;return j.useEffect(()=>{if(s.duration>0){const i=setTimeout(()=>e(s.id),s.duration);return()=>clearTimeout(i)}},[s.id,s.duration,e]),G.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl border backdrop-blur-sm shadow-lg animate-fade min-w-[280px] max-w-[420px] ${hS[s.type]||hS.info}`,children:[G.jsx(t,{size:18,className:"flex-shrink-0"}),G.jsx("span",{className:"text-sm font-medium flex-1",children:s.message}),G.jsx("button",{onClick:()=>e(s.id),className:"flex-shrink-0 p-0.5 rounded-md hover:bg-white/10 border-none bg-transparent cursor-pointer text-current opacity-60 hover:opacity-100 transition-opacity",children:G.jsx(t4,{size:14})})]})}function h4(){const s=gt(e=>e.toasts);return s.length===0?null:G.jsx("div",{className:"fixed bottom-6 right-6 z-[9999] flex flex-col gap-2",children:s.map(e=>G.jsx(c4,{toast:e},e.id))})}function uf({children:s,requiredRole:e,allowedRoles:t}){const{user:i,loading:a}=Td(),l=Rr();return a?G.jsx("div",{className:"flex items-center justify-center h-screen",children:"Cargando..."}):i?e&&i.rol!==e?G.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[G.jsx("h1",{className:"text-2xl font-bold text-accent-red mb-2",children:"Acceso Denegado"}),G.jsx("p",{className:"text-text-secondary",children:"No tienes permisos para ver esta pgina."})]}):t&&!t.includes(i.rol)?G.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[G.jsx("h1",{className:"text-2xl font-bold text-accent-red mb-2",children:"Acceso Denegado"}),G.jsx("p",{className:"text-text-secondary",children:"No tienes permisos para ver esta pgina."})]}):s:G.jsx(Qp,{to:"/login",state:{from:l},replace:!0})}class f4 extends Cu.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Se detect un error crtico en React:",e,t),this.setState({errorInfo:t})}handleReset=()=>{window.location.reload()};handleClearCache=()=>{localStorage.clear(),sessionStorage.clear(),window.location.href="/"};render(){return this.state.hasError?G.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center p-4",children:G.jsxs("div",{className:"bg-bg-secondary p-8 rounded-xl shadow-xl max-w-2xl w-full text-center border border-border",children:[G.jsx("div",{className:"mx-auto w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mb-6",children:G.jsx(By,{className:"w-8 h-8 text-red-500"})}),G.jsx("h1",{className:"text-2xl font-bold text-text-primary mb-4",children:"Ups! Algo sali mal"}),G.jsx("p",{className:"text-text-secondary mb-6",children:"Ha ocurrido un error inesperado al cargar la interfaz. Esto suele pasar por problemas de cach o permisos del navegador."}),G.jsx("div",{className:"bg-bg-primary p-4 rounded-lg text-left overflow-auto mb-8 max-h-48 border border-border",children:G.jsx("p",{className:"text-red-400 font-mono text-sm break-words",children:this.state.error&&this.state.error.toString()})}),G.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[G.jsxs("button",{onClick:this.handleReset,className:"flex items-center justify-center gap-2 px-6 py-3 bg-accent-blue text-white rounded-lg hover:opacity-90 transition-opacity",children:[G.jsx(xA,{className:"w-4 h-4"}),"Recargar Pgina"]}),G.jsxs("button",{onClick:this.handleClearCache,className:"flex items-center justify-center gap-2 px-6 py-3 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500/20 transition-colors",children:[G.jsx(jO,{className:"w-4 h-4"}),"Borrar Cach y Reiniciar"]})]})]})}):this.props.children}}const d4=j.lazy(()=>Qt(()=>import("./LoginPage-zrxINIq8.js"),__vite__mapDeps([0,1,2,3,4]))),m4=j.lazy(()=>Qt(()=>import("./DashboardPage-Bb21VZa1.js"),__vite__mapDeps([5,6,7]))),p4=j.lazy(()=>Qt(()=>import("./ClientesPage-DRgGVMou.js"),__vite__mapDeps([8,9,10,11,12,13,4,14,15,16,17,18,19,20,21]))),g4=j.lazy(()=>Qt(()=>import("./ClienteDetalle-BpIMMwK_.js"),__vite__mapDeps([22,16,12,13,4,14,15,23,24,25,26,27,28,29,30,18]))),y4=j.lazy(()=>Qt(()=>import("./ImportacionPage-J9ftEbhH.js").then(s=>s.I),__vite__mapDeps([31,32,33,6,27,34,35,3,28,14,29,36,37]))),_4=j.lazy(()=>Qt(()=>import("./TicketsPage-tj0kRHUj.js"),__vite__mapDeps([38,9,10,12,13,4,14,15,39,30,40,34,19,41,42,29,17,18,35,28,43,26,44,45,24,23,25,37,7,46]))),v4=j.lazy(()=>Qt(()=>import("./AveriasPage-CFHEkwq7.js"),__vite__mapDeps([47,12,13,4,14,15,39,30,40,34,37,25,10,18,43,48]))),E4=j.lazy(()=>Qt(()=>import("./SoporteRemotoPage-DecWybQc.js"),__vite__mapDeps([49,12,13,4,14,15,39,30,44,45,29,24,40,34,37,26,10,28,23]))),T4=j.lazy(()=>Qt(()=>import("./ReportesPage-D-XA6K-J.js"),__vite__mapDeps([50,32,6,42,41,51,14]))),S4=j.lazy(()=>Qt(()=>import("./EquiposPage-DoSOmEG7.js"),__vite__mapDeps([52,9,10,6,40,34,19,41,42,37,26,53]))),b4=j.lazy(()=>Qt(()=>import("./ConfiguracionPage-CfkY8IRF.js"),__vite__mapDeps([54,42,19,55,7,37,2,33,48,56,53,27,28]))),A4=j.lazy(()=>Qt(()=>import("./WhatsAppPage-LliLw9G7.js"),__vite__mapDeps([57,6,40,34,58,10,37,4,35,56,14,20,15,36,13]))),w4=j.lazy(()=>Qt(()=>import("./TecnicosPage-Os1Y2hJu.js"),__vite__mapDeps([59,37,21,30,18,7,10,24,58,4,35,2,55,28,45]))),R4=j.lazy(()=>Qt(()=>import("./VisitasTecnicasPage-DS60tkoD.js"),__vite__mapDeps([60,12,13,4,14,15,39,30,44,45,29,24,40,34,37,18,28,10,21,35,27,61]))),I4=j.lazy(()=>Qt(()=>import("./InstalacionesPage-BczFS6BO.js"),__vite__mapDeps([62,40,34,37,28,30,10,15,18,21,61]))),C4=j.lazy(()=>Qt(()=>import("./PlantaExternaPage-CWt0HrQs.js"),__vite__mapDeps([63,12,13,4,14,15,39,30,37,28,10,18]))),x4=j.lazy(()=>Qt(()=>import("./PostVentaPage-D7gvK9SD.js"),__vite__mapDeps([64,40,34,37,10,48,51,11,18]))),D4=j.lazy(()=>Qt(()=>import("./RequerimientosPage-DbDo0Ise.js"),__vite__mapDeps([65,37,28,7,30,10,61,48]))),V4=j.lazy(()=>Qt(()=>import("./UsuariosPage-BEcMs_7A.js"),__vite__mapDeps([66,1,55,21,37,10,30,2,28,3,4,35,7])));function N4(){const{user:s,loading:e}=Td();gt(l=>l.clients),gt(l=>l.dataSource);const t=gt(l=>l.hydrateStore),i=gt(l=>l.storeReady),a=gt(l=>l.theme);return j.useEffect(()=>{t()},[t]),j.useEffect(()=>{a==="default"?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",a)},[a]),j.useEffect(()=>{if(i&&s){const{startLiveSync:l,stopLiveSync:c}=Es.getState();return l(),()=>c()}},[i,s]),e||!i?G.jsx(Gp,{}):s?G.jsx(o4,{children:G.jsx(j.Suspense,{fallback:G.jsx(Gp,{}),children:G.jsxs(mI,{children:[G.jsx(zt,{path:"/",element:G.jsx(m4,{})}),G.jsx(zt,{path:"/clientes",element:G.jsx(p4,{})}),G.jsx(zt,{path:"/clientes/:id",element:G.jsx(g4,{})}),G.jsx(zt,{path:"/tickets",element:G.jsx(_4,{})}),G.jsx(zt,{path:"/averias",element:G.jsx(v4,{})}),G.jsx(zt,{path:"/instalaciones",element:G.jsx(I4,{})}),G.jsx(zt,{path:"/tecnicos",element:G.jsx(uf,{allowedRoles:[qt.SUPER_ADMIN,qt.ADMIN,qt.TECNICO],children:G.jsx(w4,{})})}),G.jsx(zt,{path:"/visitas",element:G.jsx(uf,{allowedRoles:[qt.SUPER_ADMIN,qt.ADMIN,qt.TECNICO],children:G.jsx(R4,{})})}),G.jsx(zt,{path:"/planta-externa",element:G.jsx(C4,{})}),G.jsx(zt,{path:"/post-venta",element:G.jsx(x4,{})}),G.jsx(zt,{path:"/requerimientos",element:G.jsx(D4,{})}),G.jsx(zt,{path:"/soporte",element:G.jsx(E4,{})}),G.jsx(zt,{path:"/whatsapp",element:G.jsx(A4,{})}),G.jsx(zt,{path:"/equipos",element:G.jsx(S4,{})}),G.jsx(zt,{path:"/reportes",element:G.jsx(T4,{})}),G.jsx(zt,{path:"/importar",element:G.jsx(y4,{})}),G.jsx(zt,{path:"/usuarios",element:G.jsx(uf,{requiredRole:qt.SUPER_ADMIN,children:G.jsx(V4,{})})}),G.jsx(zt,{path:"/config",element:G.jsx(uf,{requiredRole:qt.SUPER_ADMIN,children:G.jsx(b4,{})})}),G.jsx(zt,{path:"*",element:G.jsx(Qp,{to:"/",replace:!0})})]})})}):G.jsxs(j.Suspense,{fallback:G.jsx(Gp,{}),children:[G.jsx(Qp,{to:"/",replace:!0}),G.jsx(d4,{})]})}function O4(){return G.jsx(f4,{children:G.jsxs(YN,{children:[G.jsx(N4,{}),G.jsx(l4,{}),G.jsx(h4,{})]})})}const DA=document.getElementById("root");if(!DA)throw new Error("Failed to find the root element");yR.createRoot(DA).render(G.jsx(j.StrictMode,{children:G.jsx(kI,{children:G.jsx(O4,{})})}));export{ll as $,dC as A,tO as B,pN as C,AA as D,oi as E,vO as F,fC as G,U4 as H,L4 as I,$4 as J,wf as K,RO as L,se as M,Bg as N,o2 as O,he as P,k4 as Q,xA as R,kO as S,By as T,QO as U,jS as V,JO as W,t4 as X,K4 as Y,Q4 as Z,Qt as _,gt as a,Bo as a0,F4 as a1,H4 as a2,gC as a3,G4 as a4,n2 as a5,z4 as a6,j4 as a7,FS as a8,qe as a9,q4 as aa,B4 as ab,If as ac,Qu as ad,Uo as ae,Y4 as af,J4 as ag,M4 as ah,oR as ai,$O as b,Ye as c,SS as d,P4 as e,BO as f,WO as g,pO as h,LO as i,G as j,uO as k,dO as l,jO as m,Cu as n,sO as o,Es as p,qt as q,j as r,Dg as s,W4 as t,Td as u,Z4 as v,Cg as w,VO as x,iO as y,hO as z};
