import{c as C,a as m,_ as Le,r as h,j as e,l as pe,u as Te,o as y,M as ce,p as J,D as ee,C as p,h as Ve,U as ie,W as de,i as M,q as N,s as se,P as F,t as Be,T as ue,g as xe,v as Ge,R as Fe,L as te,F as $e}from"./index-z5gwiLCk.js";import{C as Ke}from"./Card-BvlEidcN.js";import{B as Ue}from"./Button-Gpn3Zsqq.js";import{S as q}from"./shield-CnESOPRd.js";import{C as He}from"./circle-alert-BQ7JPksQ.js";import{P as qe}from"./plus-DzCobvzz.js";import{M as me}from"./mail-BTeg2BEq.js";import{D as W,F as Je}from"./file-spreadsheet-BT8Pbvpx.js";import{P as Ye}from"./pencil-zMyhM5u9.js";import{I as We,S as be}from"./sparkles-BDNMxy3w.js";import{S as Y}from"./save-Qmkd8JY4.js";import{H as Ze}from"./history-Ba7qPAwP.js";import{C as Xe}from"./clock-Dh0pZaEI.js";const Qe=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],ge=C("cloud-download",Qe);const es=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],ss=C("file-braces",es);const ts=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]],as=C("flower",ts);const rs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],os=C("globe",rs);const ls=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],ns=C("leaf",ls);const cs=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],is=C("moon",cs);const ds=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ae=C("rotate-ccw",ds);const xs=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],ms=C("smartphone",xs);const bs=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ps=C("sun",bs);const us=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],gs=C("wind",us);function he(){const o=m(l=>l.addToast);return{success:(l,n=3e3)=>o({message:l,type:"success",duration:n}),error:(l,n=5e3)=>o({message:l,type:"error",duration:n}),warning:(l,n=4e3)=>o({message:l,type:"warning",duration:n}),info:(l,n=3e3)=>o({message:l,type:"info",duration:n})}}function hs(o,l="backup"){const n=new Blob([JSON.stringify(o,null,2)],{type:"application/json"});fe(n,`${l}.json`)}function fs(o,l="backup"){const n={};for(const[i,r]of Object.entries(o))Array.isArray(r)&&r.length>0&&(n[i]=r);let c="";for(const[i,r]of Object.entries(n)){c+=`
=== ${i.toUpperCase()} ===
`;const d=new Set;r.forEach(f=>{Object.keys(f).forEach(k=>d.add(k))});const _=[...d];c+=_.map(f=>`"${f}"`).join(",")+`
`,r.forEach(f=>{const k=_.map(I=>{const v=f[I];return v==null?"":typeof v=="object"?`"${JSON.stringify(v).replace(/"/g,'""')}"`:`"${String(v).replace(/"/g,'""')}"`});c+=k.join(",")+`
`})}const u=new Blob(["\uFEFF"+c],{type:"text/csv;charset=utf-8;"});fe(u,`${l}.csv`)}async function js(o,l="backup"){const n=await Le(()=>import("./xlsx-CNerDvZX.js"),[]),c=n.utils.book_new();for(const[i,r]of Object.entries(o))if(Array.isArray(r)&&r.length>0){const d=r.map(k=>{const I={};for(const[v,S]of Object.entries(k))I[v]=typeof S=="object"&&S!==null?JSON.stringify(S):S;return I}),_=n.utils.json_to_sheet(d),f=i.substring(0,31);n.utils.book_append_sheet(c,_,f)}const u={};for(const[i,r]of Object.entries(o))Array.isArray(r)||(u[i]=typeof r=="object"?JSON.stringify(r):r);if(Object.keys(u).length>0){const i=Object.entries(u).map(([d,_])=>({key:d,value:_})),r=n.utils.json_to_sheet(i);n.utils.book_append_sheet(c,r,"config")}n.writeFile(c,`${l}.xlsx`)}function fe(o,l){const n=URL.createObjectURL(o),c=document.createElement("a");c.href=n,c.download=l,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(n)}function Ns(){const o=m(r=>r.authorizedEmails),l=m(r=>r.addAuthorizedEmail),n=m(r=>r.removeAuthorizedEmail),[c,u]=h.useState(""),i=()=>{if(!c)return;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)){alert("Por favor ingresa un correo válido");return}l(c)?(u(""),alert("✅ Correo agregado exitosamente")):alert("⚠️ Este correo ya está en la lista")};return e.jsxs(Ke,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-green-500"}),"Usuarios Autorizados"]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex gap-3",children:[e.jsx(He,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"Control de Acceso"}),e.jsx("p",{children:"Solo los correos en esta lista podrán acceder al sistema."}),e.jsx("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:"Si la lista está vacía, cualquier correo puede acceder (modo desarrollo)."})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"email",value:c,onChange:r=>u(r.target.value),onKeyPress:r=>r.key==="Enter"&&i(),placeholder:"correo@ejemplo.com",className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"}),e.jsxs(Ue,{onClick:i,className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),"Agregar"]})]}),e.jsx("div",{className:"space-y-2",children:o.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(me,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm font-medium",children:"No hay correos autorizados"}),e.jsx("p",{className:"text-xs mt-1",children:"(Modo desarrollo: todos pueden acceder)"})]}):o.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-mono text-sm",children:r})]}),e.jsx("button",{onClick:()=>{confirm(`¿Eliminar ${r} de la lista de autorizados?`)&&n(r)},className:"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 p-2 rounded transition-colors",title:"Eliminar correo",children:e.jsx(pe,{className:"w-4 h-4"})})]},r))}),o.length>0&&e.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[o.length," usuario",o.length!==1?"s":""," autorizado",o.length!==1?"s":""]})]})}function A({label:o,envVar:l,value:n,onChange:c,placeholder:u}){const[i,r]=h.useState(!1);return e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold",children:o}),e.jsx("p",{className:"text-[10px] text-text-muted font-mono",children:l})]}),e.jsx("button",{onClick:()=>r(!i),className:"text-[10px] text-accent-blue bg-accent-blue/10 px-2 py-0.5 rounded cursor-pointer border-none hover:bg-accent-blue/20",children:i?"Ocultar":"Mostrar"})]}),e.jsx("input",{type:i?"text":"password",value:n,onChange:d=>c(d.target.value),placeholder:u,className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted font-mono"})]})}function ys(){const o=y(a=>a.backupVersions),l=y(a=>a.loadingVersions),n=y(a=>a.loadVersions),c=y(a=>a.restoreVersion),u=y(a=>a.removeVersion),i=y(a=>a.restoringVersion),r=y(a=>a.downloadVersionData),d=he(),[_,f]=h.useState(null),[k,I]=h.useState(null);h.useEffect(()=>{n()},[n]);const v=async a=>{if(!window.confirm("¿Estás seguro de restaurar esta versión? Esto reemplazará TODOS los datos actuales."))return;await c(a)?d.success("Versión restaurada correctamente"):d.error("Error al restaurar la versión")},S=async a=>{await u(a)?(d.success("Versión eliminada"),I(null)):d.error("Error al eliminar")},V=async(a,b)=>{f(a.id);try{const g=await r(a.id);if(!g){d.error("Error al descargar datos");return}const R=`backup_${a.createdAt?.split("T")[0]||"unknown"}_${a.createdAt?.split("T")[1]?.split(".")[0]?.replace(/:/g,"-")||""}`;switch(b){case"json":hs(g,R),d.success("Descarga JSON completada");break;case"csv":fs(g,R),d.success("Descarga CSV completada");break;case"excel":await js(g,R),d.success("Descarga Excel completada");break}}catch(g){d.error(`Error: ${g.message}`)}finally{f(null)}};return e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-purple/10 flex items-center justify-center",children:e.jsx(Ze,{size:18,className:"text-accent-purple"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold",children:"Historial de Backups"}),e.jsx("p",{className:"text-[11px] text-text-muted",children:"Versiones guardadas en Firebase"})]})]}),e.jsxs("button",{onClick:n,disabled:l,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-bg-secondary border border-border text-xs font-medium hover:bg-bg-card-hover cursor-pointer transition-colors disabled:opacity-50",children:[e.jsx(Fe,{size:12,className:l?"animate-spin":""}),"Actualizar"]})]}),l&&o.length===0?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(te,{size:24,className:"animate-spin text-text-muted"}),e.jsx("span",{className:"ml-3 text-sm text-text-muted",children:"Cargando versiones..."})]}):o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-bg-secondary border border-border flex items-center justify-center mb-3",children:e.jsx(W,{size:24,className:"text-text-muted"})}),e.jsx("p",{className:"text-sm font-medium text-text-secondary",children:"No hay backups guardados"}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Sube tu primer respaldo para empezar"})]}):e.jsx("div",{className:"flex flex-col gap-3 max-h-[500px] overflow-y-auto pr-1",children:o.map((a,b)=>{const g=new Date(a.createdAt),R=b===0,j=k===a.id,z=i===a.id,B=_===a.id;return e.jsxs("div",{className:`relative p-4 rounded-xl border transition-all ${R?"bg-accent-blue/5 border-accent-blue/30":"bg-bg-secondary border-border hover:border-accent-blue/20"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{size:14,className:"text-text-muted"}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm font-semibold",children:[g.toLocaleDateString("es-PE",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),e.jsx("span",{className:"ml-2 text-text-muted font-mono text-xs",children:g.toLocaleTimeString("es-PE")})]})}),R&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-accent-blue/10 text-accent-blue",children:"ÚLTIMO"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-3",children:[e.jsx($,{label:"Clientes",value:a.totalClients}),e.jsx($,{label:"Tickets",value:a.totalTickets}),e.jsx($,{label:"Averías",value:a.totalAverias}),e.jsx($,{label:"Equipos",value:a.totalEquipos}),e.jsx($,{label:"Visitas",value:a.totalVisitas}),e.jsx($,{label:"Técnicos",value:a.totalTecnicos})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>v(a.id),disabled:z,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-accent-purple/10 text-accent-purple text-[11px] font-bold hover:bg-accent-purple/20 disabled:opacity-50 transition-colors cursor-pointer border-none",children:[z?e.jsx(te,{size:12,className:"animate-spin"}):e.jsx(ge,{size:12}),"Restaurar"]}),e.jsxs("div",{className:"flex items-center gap-1 ml-1",children:[e.jsx("span",{className:"text-[10px] text-text-muted mr-1",children:"Descargar:"}),e.jsxs("button",{onClick:()=>V(a,"json"),disabled:B,title:"Descargar JSON",className:"flex items-center gap-1 px-2 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 text-[11px] font-bold hover:bg-emerald-500/20 disabled:opacity-50 transition-colors cursor-pointer border-none",children:[e.jsx(ss,{size:12})," JSON"]}),e.jsxs("button",{onClick:()=>V(a,"csv"),disabled:B,title:"Descargar CSV",className:"flex items-center gap-1 px-2 py-1.5 rounded-lg bg-blue-500/10 text-blue-500 text-[11px] font-bold hover:bg-blue-500/20 disabled:opacity-50 transition-colors cursor-pointer border-none",children:[e.jsx($e,{size:12})," CSV"]}),e.jsxs("button",{onClick:()=>V(a,"excel"),disabled:B,title:"Descargar Excel",className:"flex items-center gap-1 px-2 py-1.5 rounded-lg bg-orange-500/10 text-orange-500 text-[11px] font-bold hover:bg-orange-500/20 disabled:opacity-50 transition-colors cursor-pointer border-none",children:[e.jsx(Je,{size:12})," Excel"]})]}),j?e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("span",{className:"text-[11px] text-red-400",children:"¿Eliminar?"}),e.jsx("button",{onClick:()=>S(a.id),className:"px-2 py-1 rounded-lg bg-red-500/20 text-red-500 text-[11px] font-bold hover:bg-red-500/30 cursor-pointer border-none",children:"Sí"}),e.jsx("button",{onClick:()=>I(null),className:"px-2 py-1 rounded-lg bg-bg-card text-text-muted text-[11px] font-medium hover:bg-bg-card-hover cursor-pointer border-none",children:"No"})]}):e.jsx("button",{onClick:()=>I(a.id),className:"ml-auto p-1.5 rounded-lg text-text-muted hover:text-red-500 hover:bg-red-500/10 cursor-pointer border-none bg-transparent transition-colors",title:"Eliminar versión",children:e.jsx(pe,{size:14})})]}),B&&e.jsxs("div",{className:"absolute inset-0 bg-bg-card/80 rounded-xl flex items-center justify-center backdrop-blur-sm",children:[e.jsx(te,{size:20,className:"animate-spin text-accent-blue mr-2"}),e.jsx("span",{className:"text-sm text-text-secondary",children:"Descargando..."})]})]},a.id)})})]})}function $({label:o,value:l}){return e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-bg-card border border-border",children:[e.jsxs("span",{className:"text-[10px] text-text-muted",children:[o,":"]}),e.jsx("span",{className:"text-[11px] font-bold text-text-primary",children:l??0})]})}function Os(){const{user:o}=Te(),l=m(s=>s.clients),n=m(s=>s.dataSource),c=m(s=>s.tickets),u=m(s=>s.averias),i=m(s=>s.equipos),r=m(s=>s.theme),d=m(s=>s.branding),_=m(s=>s.setBranding),f=m(s=>s.customRolePermissions),k=m(s=>s.setCustomRolePermissions),I=y(s=>s.syncPush),v=y(s=>s.syncPull),S=y(s=>s.isSyncing),V=y(s=>s.lastSync),a=y(s=>s.syncProgress),b=he(),[g,R]=h.useState("general"),[j,z]=h.useState({appName:d?.appName||"ISP System",appVersion:d?.appVersion||"v2.0 Mobile",appIcon:d?.appIcon||null,zoneName:d?.zoneName||"CARABAYLLO",syncLabel:d?.syncLabel||""}),[B,re]=h.useState(!1),Z=[J.ADMIN,J.TECNICO,J.VIEWER],je=Object.values(ce).filter(s=>s!==ce.USUARIOS),Ne=[{value:F.NONE,label:"Ninguno"},{value:F.READ,label:"Lectura"},{value:F.WRITE,label:"Escritura"},{value:F.ADMIN,label:"Admin"}],[P,ye]=h.useState(null),[X,Q]=h.useState(()=>{const s={};return Z.forEach(t=>{s[t]={...f?.[t]||ee[t]}}),s}),[ve,oe]=h.useState(!1),Se=()=>{_(j),re(!0),b.success("Marca actualizada correctamente"),setTimeout(()=>re(!1),3e3)},Ee=s=>{const t=s.target.files?.[0];if(!t)return;if(t.size>512e3){b.error("El archivo es muy grande. Maximo 500KB.");return}if(!t.type.match(/^image\/(png|jpeg|jpg|svg\+xml|webp)$/)){b.error("Formato no soportado. Usa PNG, JPG, SVG o WebP.");return}const E=new FileReader;E.onload=D=>{z(U=>({...U,appIcon:D.target.result}))},E.readAsDataURL(t)},_e=()=>{k(X),oe(!0),b.success("Permisos de roles actualizados"),setTimeout(()=>oe(!1),3e3)},ke=s=>{Q(t=>({...t,[s]:{...ee[s]}})),b.success(`Permisos de ${se[s]?.label||s} restaurados a defaults`)},Ie=()=>{const s={};Z.forEach(t=>{s[t]={...ee[t]}}),Q(s),k(null),b.success("Todos los permisos restaurados a defaults")},[x,w]=h.useState(()=>({googleApiKey:localStorage.getItem("isp_google_api_key")||p.GOOGLE_API_KEY||"",googleClientId:localStorage.getItem("isp_google_client_id")||p.GOOGLE_CLIENT_ID||"",googleSheetId:localStorage.getItem("isp_google_sheet_id")||p.GOOGLE_SHEET_ID||"",geminiApiKey:localStorage.getItem("isp_gemini_api_key")||p.GEMINI_API_KEY||"",firebaseApiKey:localStorage.getItem("isp_firebase_api_key")||p.FIREBASE.apiKey||"",firebaseAuthDomain:localStorage.getItem("isp_firebase_auth_domain")||p.FIREBASE.authDomain||"",firebaseProjectId:localStorage.getItem("isp_firebase_project_id")||p.FIREBASE.projectId||"",firebaseStorageBucket:localStorage.getItem("isp_firebase_storage_bucket")||p.FIREBASE.storageBucket||"",firebaseMessagingSenderId:localStorage.getItem("isp_firebase_messaging_sender_id")||p.FIREBASE.messagingSenderId||"",firebaseAppId:localStorage.getItem("isp_firebase_app_id")||p.FIREBASE.appId||""})),[we,le]=h.useState(!1),[L,G]=h.useState(()=>({empresaNombre:localStorage.getItem("isp_empresa_nombre")||"ISP Carabayllo",empresaTelefono:localStorage.getItem("isp_empresa_telefono")||"999-000-111",empresaEmail:localStorage.getItem("isp_empresa_email")||"soporte@isp.com",empresaDireccion:localStorage.getItem("isp_empresa_direccion")||"Carabayllo, Lima",moneda:localStorage.getItem("isp_moneda")||"PEN",zonaHoraria:localStorage.getItem("isp_zona_horaria")||"America/Lima"})),[Ae,ne]=h.useState(!1);if(!o||o.rol!==J.SUPER_ADMIN)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[e.jsx(q,{size:48,className:"text-accent-red mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-accent-red mb-2",children:"Acceso Restringido"}),e.jsx("p",{className:"text-text-secondary",children:"Esta sección es exclusiva para Super Administradores."})]});const Ce=()=>{localStorage.setItem("isp_google_api_key",x.googleApiKey),localStorage.setItem("isp_google_client_id",x.googleClientId),localStorage.setItem("isp_google_sheet_id",x.googleSheetId),localStorage.setItem("isp_gemini_api_key",x.geminiApiKey),localStorage.setItem("isp_firebase_api_key",x.firebaseApiKey),localStorage.setItem("isp_firebase_auth_domain",x.firebaseAuthDomain),localStorage.setItem("isp_firebase_project_id",x.firebaseProjectId),localStorage.setItem("isp_firebase_storage_bucket",x.firebaseStorageBucket),localStorage.setItem("isp_firebase_messaging_sender_id",x.firebaseMessagingSenderId),localStorage.setItem("isp_firebase_app_id",x.firebaseAppId),le(!0),b.success("Credenciales API guardadas"),setTimeout(()=>le(!1),3e3)},ze=()=>{Object.entries(L).forEach(([s,t])=>{localStorage.setItem("isp_"+s.replace(/([A-Z])/g,"_$1").toLowerCase(),t)}),ne(!0),b.success("Parámetros guardados"),setTimeout(()=>ne(!1),3e3)},Pe=async()=>{await I()?b.success("Respaldo subido correctamente a Firebase"):b.error("Error al subir respaldo")},Re=async()=>{if(!window.confirm("ADVERTENCIA: Esto reemplazará TODOS los datos actuales con la versión más reciente de la nube. ¿Deseas continuar?"))return;await v()?b.success("Datos restaurados desde Firebase"):b.error("Error al restaurar datos")},De=async()=>{if(window.confirm("¿Migrar catálogos base a Firebase? Esto subirá la configuración base (Servicios, SLA, Categorias). Hazlo solo 1 vez.")){b.info("Subiendo catálogos, no cierres la ventana...");try{const s=m.getState(),t=["categorias","subcategorias","prioridadesSLA","estadosCatalogo","catalogoServicios","tiposRequerimiento"];let E=0;for(const D of t){const U=s[D]||[];for(const Me of U)await Ge(D,Me),E++}b.success(`${E} registros subidos correctamente.`)}catch(s){console.error(s),b.error("Error al subir catálogos.")}}},Oe=[{id:"general",label:"General",icon:Ve},{id:"usuarios",label:"Usuarios & Roles",icon:ie},{id:"api",label:"Conexión API",icon:os},{id:"backups",label:"Backups",icon:W},{id:"sistema",label:"Sistema",icon:W}];return e.jsxs("div",{className:"animate-fade p-4 sm:p-6 sm:px-8 h-full overflow-y-auto",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-[26px] font-bold tracking-tight",children:"Configuración"}),e.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Parámetros del sistema, roles y conexiones"})]})}),e.jsx("div",{className:"flex gap-1 bg-bg-secondary rounded-xl p-1 mb-6 w-full sm:w-fit overflow-x-auto",children:Oe.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>R(s.id),className:`flex items-center gap-2 py-2 px-4 rounded-lg text-sm border-none cursor-pointer transition-all ${g===s.id?"bg-accent-blue text-white font-semibold shadow-sm":"bg-transparent text-text-secondary hover:text-text-primary"}`,children:[e.jsx(t,{size:14}),s.label]},s.id)})}),g==="general"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[j.appIcon?e.jsx("img",{src:j.appIcon,className:"w-10 h-10 rounded-xl object-cover",alt:"Logo"}):e.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-blue/10 flex items-center justify-center",children:e.jsx(de,{size:18,className:"text-accent-blue"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold",children:j.appName||"ISP System"}),e.jsx("p",{className:"text-[11px] text-text-muted",children:"Sistema de Gestión para Proveedores de Internet"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(O,{label:"Versión",value:"1.1.0"}),e.jsx(O,{label:"Framework",value:"React 18 + Vite 5"}),e.jsx(O,{label:"Estado",value:"Producción",badge:"bg-emerald-500/10 text-emerald-400"}),e.jsx(O,{label:"Última actualización",value:new Date().toLocaleDateString("es-PE")})]})]}),e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border col-span-1 md:col-span-2",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-4 text-text-secondary flex items-center gap-2",children:[e.jsx(Ye,{size:16,className:"text-accent-purple"})," Personalizar Marca"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border sm:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold mb-2 block",children:"Logo del Sistema"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl border-2 border-dashed border-border flex items-center justify-center overflow-hidden shrink-0",children:j.appIcon?e.jsx("img",{src:j.appIcon,className:"w-full h-full object-cover",alt:"Logo"}):e.jsx(de,{size:24,className:"text-text-muted"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-accent-blue/10 text-accent-blue text-xs font-bold hover:bg-accent-blue/20 cursor-pointer transition-colors border-none w-fit",children:[e.jsx(We,{size:14})," Subir Logo",e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/svg+xml,image/webp",onChange:Ee,className:"hidden"})]}),j.appIcon&&e.jsxs("button",{onClick:()=>z(s=>({...s,appIcon:null})),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 text-xs font-medium hover:bg-red-500/20 cursor-pointer border-none w-fit transition-colors",children:[e.jsx(ae,{size:12})," Restaurar default"]}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"PNG, JPG, SVG o WebP. Max 500KB."})]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Nombre del Software"}),e.jsx("input",{type:"text",value:j.appName,onChange:s=>z(t=>({...t,appName:s.target.value})),placeholder:"ISP System",className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Subtitulo / Version"}),e.jsx("input",{type:"text",value:j.appVersion,onChange:s=>z(t=>({...t,appVersion:s.target.value})),placeholder:"v2.0 Mobile",className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Nombre de Zona (Header)"}),e.jsx("input",{type:"text",value:j.zoneName,onChange:s=>z(t=>({...t,zoneName:s.target.value})),placeholder:"CARABAYLLO",className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Etiqueta de Estado (Header)"}),e.jsx("input",{type:"text",value:j.syncLabel,onChange:s=>z(t=>({...t,syncLabel:s.target.value})),placeholder:"Dejar vacio para auto (Demo/Sincronizado)",className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted"}),e.jsx("p",{className:"text-[10px] text-text-muted mt-1",children:"Si esta vacio, se muestra automaticamente segun la fuente de datos."})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs("button",{onClick:Se,className:"py-2.5 px-6 rounded-xl bg-accent-purple border-none text-white text-sm font-semibold cursor-pointer flex items-center gap-2 hover:opacity-90",children:[e.jsx(Y,{size:14})," Guardar Marca"]}),B&&e.jsxs("span",{className:"text-xs text-accent-green flex items-center gap-1",children:[e.jsx(M,{size:14})," Guardado correctamente"]})]})]}),e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border col-span-2",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-4 text-text-secondary flex items-center gap-2",children:[e.jsx(be,{size:16,className:"text-accent-yellow"})," Personalización"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[e.jsx(T,{id:"default",label:"Azul Noche",color:"#0a0e1a",accent:"#3b82f6",icon:is,active:r==="default",onClick:()=>m.getState().setTheme("default")}),e.jsx(T,{id:"light",label:"Modo Claro",color:"#ffffff",accent:"#2563eb",icon:ps,active:r==="light",onClick:()=>m.getState().setTheme("light")}),e.jsx(T,{id:"black",label:"Negro OLED",color:"#000000",accent:"#e5e5e5",icon:ms,active:r==="black",onClick:()=>m.getState().setTheme("black")}),e.jsx(T,{id:"purple",label:"Lila Suave",color:"#faf5ff",accent:"#a855f7",icon:be,active:r==="purple",onClick:()=>m.getState().setTheme("purple")}),e.jsx(T,{id:"rose",label:"Rosa Nórdico",color:"#fff1f2",accent:"#e11d48",icon:as,active:r==="rose",onClick:()=>m.getState().setTheme("rose")}),e.jsx(T,{id:"ocean",label:"Brisa Marina",color:"#ecfeff",accent:"#0891b2",icon:gs,active:r==="ocean",onClick:()=>m.getState().setTheme("ocean")}),e.jsx(T,{id:"sage",label:"Jardín Salvia",color:"#f0fdf4",accent:"#16a34a",icon:ns,active:r==="sage",onClick:()=>m.getState().setTheme("sage")})]})]}),e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4 text-text-secondary",children:"Resumen del Sistema"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(H,{label:"Clientes registrados",value:l.length,color:"text-accent-blue"}),e.jsx(H,{label:"Tickets",value:c.length,color:"text-accent-purple"}),e.jsx(H,{label:"Averías registradas",value:u.length,color:"text-accent-red"}),e.jsx(H,{label:"Equipos en inventario",value:i.length,color:"text-accent-yellow"}),e.jsx(H,{label:"Fuente de datos",value:n==="demo"?"Demo (30 registros)":"Excel importado",color:"text-text-secondary"})]})]}),e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border col-span-2",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4 text-text-secondary",children:"Sesión Activa"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-lg font-bold",style:{background:(N[o?.rol]||N.TECNICO).color+"20",color:(N[o?.rol]||N.TECNICO).color},children:o?.nombre?.[0]||"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-base font-bold",children:o?.nombre}),e.jsx("p",{className:"text-sm text-text-secondary",children:o?.email}),e.jsx("p",{className:"text-xs mt-1 font-medium",style:{color:(N[o?.rol]||N.TECNICO).color},children:(N[o?.rol]||N.TECNICO).label})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-500/10 rounded-lg",children:[e.jsx(M,{size:14,className:"text-emerald-400"}),e.jsx("span",{className:"text-[11px] text-emerald-400 font-semibold",children:"Sesión activa"})]})]})]})]}),g==="usuarios"&&e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-secondary",children:"Roles del Sistema"}),e.jsx("div",{className:"flex items-center gap-2",children:f&&e.jsxs("button",{onClick:Ie,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 text-xs font-medium hover:bg-red-500/20 cursor-pointer border-none transition-colors",children:[e.jsx(ae,{size:12})," Restaurar Todos"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border opacity-70",children:e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:N.SUPER_ADMIN?.color+"20",color:N.SUPER_ADMIN?.color},children:e.jsx(q,{size:14})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold",children:"Super Admin"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Acceso total (no editable)"})]})]})}),Z.map(s=>{const t=se[s]||{},E=N[s]||{},D=P===s;return e.jsxs("button",{onClick:()=>ye(D?null:s),className:`p-4 rounded-xl border text-left cursor-pointer transition-all ${D?"bg-accent-blue/5 border-accent-blue/40 shadow-[0_0_12px_-3px_rgba(59,130,246,0.3)]":"bg-bg-secondary border-border hover:border-accent-blue/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:(E.color||"#6b7280")+"20",color:E.color||"#6b7280"},children:e.jsx(q,{size:14})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold",children:t.label||s}),e.jsx("p",{className:"text-[10px] text-text-muted",children:D?"Editando...":"Click para editar"})]})]}),e.jsx("div",{className:"flex items-center gap-1.5 mt-1",children:e.jsxs("span",{className:"text-[10px] text-text-muted",children:[Object.values(X[s]||{}).filter(U=>U!==F.NONE).length," modulos activos"]})})]},s)})]}),P&&e.jsxs("div",{className:"mt-2 p-4 rounded-xl bg-bg-secondary border border-border animate-fade",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-xs font-bold text-text-primary flex items-center gap-2",children:[e.jsx(q,{size:14,style:{color:N[P]?.color||"#6b7280"}}),"Permisos de ",se[P]?.label||P]}),e.jsxs("button",{onClick:()=>ke(P),className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-bg-card text-text-muted text-[10px] font-medium hover:text-accent-blue cursor-pointer border border-border transition-colors",children:[e.jsx(ae,{size:10})," Defaults"]})]}),e.jsx("p",{className:"text-[10px] text-text-muted mb-3",children:'Para ocultar un modulo del sidebar, establece su permiso en "Ninguno".'}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:je.map(s=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded-lg bg-bg-card border border-border",children:[e.jsx("span",{className:"text-[11px] font-medium",children:Be[s]||s}),e.jsx("select",{value:X[P]?.[s]||F.NONE,onChange:t=>Q(E=>({...E,[P]:{...E[P],[s]:t.target.value}})),className:"py-1 px-2 rounded-md bg-bg-secondary border border-border text-[11px] text-text-primary outline-none cursor-pointer focus:border-accent-blue",children:Ne.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]},s))})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs("button",{onClick:_e,className:"py-2.5 px-6 rounded-xl bg-accent-blue border-none text-white text-sm font-semibold cursor-pointer flex items-center gap-2 hover:opacity-90",children:[e.jsx(Y,{size:14})," Guardar Permisos"]}),ve&&e.jsxs("span",{className:"text-xs text-accent-green flex items-center gap-1",children:[e.jsx(M,{size:14})," Guardado correctamente"]})]})]}),e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-secondary",children:"Gestión de Usuarios"}),e.jsxs("div",{className:"flex items-center gap-2 text-accent-blue text-xs",children:[e.jsx(ie,{size:14}),e.jsx("span",{children:"Sistema basado en Firebase"})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-accent-blue/5 border border-accent-blue/20",children:[e.jsx("p",{className:"text-sm text-text-primary mb-2 font-medium",children:"Para gestionar usuarios del sistema:"}),e.jsxs("ol",{className:"text-xs text-text-secondary space-y-1.5 ml-4",children:[e.jsxs("li",{children:["1. Ve al modulo ",e.jsx("strong",{className:"text-accent-blue",children:"Sistema → Usuarios"})," en el menu lateral"]}),e.jsxs("li",{children:["2. Solo usuarios con rol ",e.jsx("strong",{className:"text-accent-purple",children:"SUPER_ADMIN"})," pueden acceder"]}),e.jsx("li",{children:"3. Alli podras crear, editar, activar/desactivar usuarios"}),e.jsx("li",{children:"4. Tambien podras personalizar permisos por modulo para cada usuario"})]})]})]}),e.jsx(Ns,{})]}),g==="api"&&e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4 text-text-secondary",children:"Google Cloud Platform"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(A,{label:"Google API Key",envVar:"VITE_GOOGLE_API_KEY",value:x.googleApiKey,onChange:s=>w(t=>({...t,googleApiKey:s})),placeholder:"AIza..."}),e.jsx(A,{label:"Google Client ID (OAuth)",envVar:"VITE_GOOGLE_CLIENT_ID",value:x.googleClientId,onChange:s=>w(t=>({...t,googleClientId:s})),placeholder:"123456789-abc.apps.googleusercontent.com"}),e.jsx(A,{label:"Google Sheet ID",envVar:"VITE_GOOGLE_SHEET_ID",value:x.googleSheetId,onChange:s=>w(t=>({...t,googleSheetId:s})),placeholder:"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgVE2upms"}),e.jsx(A,{label:"Gemini API Key",envVar:"VITE_GEMINI_API_KEY",value:x.geminiApiKey,onChange:s=>w(t=>({...t,geminiApiKey:s})),placeholder:"AIza..."}),e.jsxs("div",{className:"pt-4 border-t border-border mt-2",children:[e.jsxs("h4",{className:"text-xs font-bold mb-3 text-accent-cyan flex items-center gap-2",children:[e.jsx(W,{size:14})," Firebase Sync (Respaldo en la Nube)"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(A,{label:"API Key",envVar:"VITE_FIREBASE_API_KEY",value:x.firebaseApiKey,onChange:s=>w(t=>({...t,firebaseApiKey:s})),placeholder:"AIza..."}),e.jsx(A,{label:"Project ID",envVar:"VITE_FIREBASE_PROJECT_ID",value:x.firebaseProjectId,onChange:s=>w(t=>({...t,firebaseProjectId:s})),placeholder:"isp-sistema-xxx"}),e.jsx(A,{label:"Auth Domain",envVar:"VITE_FIREBASE_AUTH_DOMAIN",value:x.firebaseAuthDomain,onChange:s=>w(t=>({...t,firebaseAuthDomain:s})),placeholder:"isp-sistema.firebaseapp.com"}),e.jsx(A,{label:"Storage Bucket",envVar:"VITE_FIREBASE_STORAGE_BUCKET",value:x.firebaseStorageBucket,onChange:s=>w(t=>({...t,firebaseStorageBucket:s})),placeholder:"isp-sistema.appspot.com"}),e.jsx(A,{label:"Msg Sender ID",envVar:"VITE_FIREBASE_MESSAG...",value:x.firebaseMessagingSenderId,onChange:s=>w(t=>({...t,firebaseMessagingSenderId:s})),placeholder:"123456..."}),e.jsx(A,{label:"App ID",envVar:"VITE_FIREBASE_APP_ID",value:x.firebaseAppId,onChange:s=>w(t=>({...t,firebaseAppId:s})),placeholder:"1:123456:web:abcd..."})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs("button",{onClick:Ce,className:"py-2.5 px-6 rounded-xl bg-accent-blue border-none text-white text-sm font-semibold cursor-pointer flex items-center gap-2 hover:opacity-90",children:[e.jsx(Y,{size:14})," Guardar Cambios"]}),we&&e.jsxs("span",{className:"text-xs text-accent-green flex items-center gap-1",children:[e.jsx(M,{size:14})," Guardado correctamente"]})]})]}),e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4 text-text-secondary",children:"Estado de Servicios"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(K,{name:"Google Sheets API v4",status:!!p.GOOGLE_SHEET_ID}),e.jsx(K,{name:"Google Identity Services (OAuth 2.0)",status:!!p.GOOGLE_CLIENT_ID}),e.jsx(K,{name:"Google Drive API",status:!!p.GOOGLE_API_KEY}),e.jsx(K,{name:"Gemini AI",status:!!(x.geminiApiKey||p.GEMINI_API_KEY)}),e.jsx(K,{name:"Firebase Firestore",status:!!(x.firebaseApiKey||p.FIREBASE.apiKey)}),e.jsx(K,{name:"SheetJS (Lectura Excel local)",status:!0})]})]}),e.jsx("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ue,{size:18,className:"text-accent-yellow mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Configuración de APIs"}),e.jsxs("p",{className:"text-[12px] text-text-secondary leading-relaxed",children:["Las credenciales se configuran mediante variables de entorno en ",e.jsx("code",{className:"text-accent-blue",children:".env"})," o directamente desde esta página (se guardan en localStorage). Nunca compartas las API keys en repositorios públicos."]})]})]})})]}),g==="backups"&&e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/60 backdrop-blur-sm flex items-center justify-center animate-fade p-4",children:e.jsxs("div",{className:"bg-bg-card border border-border rounded-2xl p-8 w-full max-w-[420px] shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-accent-blue/10 flex items-center justify-center",children:e.jsx(xe,{size:20,className:"text-accent-blue animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-text-primary",children:"Subiendo Respaldo a Firebase"}),e.jsx("p",{className:"text-[11px] text-text-muted",children:"No cierres esta ventana"})]})]}),e.jsx("div",{className:"w-full bg-bg-secondary rounded-full h-3 mb-3 overflow-hidden border border-border",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500 ease-out",style:{width:`${a.percent}%`,background:a.percent===100?"linear-gradient(90deg, #10b981, #34d399)":"linear-gradient(90deg, #3b82f6, #60a5fa)"}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-text-secondary font-medium",children:a.label}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[10px] text-text-muted",children:["Paso ",a.step,"/",a.totalSteps]}),e.jsxs("span",{className:"text-sm font-bold text-accent-blue",children:[a.percent,"%"]})]})]}),a.percent===100&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 justify-center text-emerald-400",children:[e.jsx(M,{size:16}),e.jsx("span",{className:"text-xs font-semibold",children:"¡Completado!"})]})]})}),e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4 text-text-secondary",children:"Sincronización Manual"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-secondary rounded-xl border border-border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-text-primary",children:"Respaldo y Restauración"}),e.jsx("p",{className:"text-[11px] text-text-muted mt-1",children:V?`Última sincronización: ${new Date(V).toLocaleString()}`:"No se ha sincronizado aún"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:Pe,disabled:S||!(x.firebaseApiKey||p.FIREBASE.apiKey),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-accent-blue/10 text-accent-blue text-xs font-bold hover:bg-accent-blue/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors cursor-pointer border-none",children:[e.jsx(xe,{size:16}),S?"Sincronizando...":"Subir Respaldo"]}),e.jsxs("button",{onClick:Re,disabled:S||!(x.firebaseApiKey||p.FIREBASE.apiKey),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-accent-purple/10 text-accent-purple text-xs font-bold hover:bg-accent-purple/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors cursor-pointer border-none",children:[e.jsx(ge,{size:16}),S?"Sincronizando...":"Restaurar Último"]})]})]})]}),e.jsx(ys,{})]}),g==="sistema"&&e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4 text-text-secondary",children:"Migración Inicial"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-secondary rounded-xl border border-border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-text-primary",children:"Subir Catálogos a Firebase"}),e.jsx("p",{className:"text-[11px] text-text-muted mt-1",children:"Usa esto la primera vez para subir los diccionarios base."})]}),e.jsx("button",{onClick:De,className:"px-4 py-2 rounded-lg bg-accent-blue text-white text-xs font-bold hover:bg-accent-blue/90 transition-colors cursor-pointer border-none",children:"Migrar a Nube"})]})]}),e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4 text-text-secondary",children:"Parámetros de la Empresa"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Nombre de la Empresa"}),e.jsx("input",{type:"text",value:L.empresaNombre,onChange:s=>G(t=>({...t,empresaNombre:s.target.value})),placeholder:"ISP Carabayllo",className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Teléfono"}),e.jsx("input",{type:"text",value:L.empresaTelefono,onChange:s=>G(t=>({...t,empresaTelefono:s.target.value})),placeholder:"999-000-111",className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Email de Soporte"}),e.jsx("input",{type:"email",value:L.empresaEmail,onChange:s=>G(t=>({...t,empresaEmail:s.target.value})),placeholder:"soporte@isp.com",className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Dirección"}),e.jsx("input",{type:"text",value:L.empresaDireccion,onChange:s=>G(t=>({...t,empresaDireccion:s.target.value})),placeholder:"Carabayllo, Lima",className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Moneda"}),e.jsx("input",{type:"text",value:L.moneda,onChange:s=>G(t=>({...t,moneda:s.target.value})),placeholder:"PEN",className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-bg-secondary border border-border",children:[e.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Zona Horaria"}),e.jsx("input",{type:"text",value:L.zonaHoraria,onChange:s=>G(t=>({...t,zonaHoraria:s.target.value})),placeholder:"America/Lima",className:"w-full py-2 px-3 bg-bg-card border border-border rounded-lg text-sm text-text-primary outline-none focus:border-accent-blue placeholder:text-text-muted"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs("button",{onClick:ze,className:"py-2.5 px-6 rounded-xl bg-accent-blue border-none text-white text-sm font-semibold cursor-pointer flex items-center gap-2 hover:opacity-90",children:[e.jsx(Y,{size:14})," Guardar Parámetros"]}),Ae&&e.jsxs("span",{className:"text-xs text-accent-green flex items-center gap-1",children:[e.jsx(M,{size:14})," Guardado correctamente"]})]})]}),e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4 text-text-secondary",children:"Almacenamiento Local"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(O,{label:"Método",value:"Zustand (memoria) + IndexedDB (persistencia)"}),e.jsx(O,{label:"Datos en memoria",value:`${l.length} clientes, ${c.length} tickets, ${i.length} equipos`}),e.jsx(O,{label:"Motor ETL",value:"9 reglas de limpieza (dataTransformer.js)"}),e.jsx(O,{label:"Formatos soportados",value:".xlsx, .xls (lectura vía SheetJS)"})]})]}),e.jsxs("div",{className:"bg-bg-card rounded-2xl p-6 border border-border",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4 text-text-secondary",children:"Stack Tecnológico"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:[{name:"React 18",desc:"UI Framework"},{name:"Vite 5",desc:"Build tool"},{name:"Tailwind CSS v4",desc:"Estilos"},{name:"Zustand",desc:"Estado global"},{name:"Firebase",desc:"Cloud Backup"},{name:"SheetJS",desc:"Lectura Excel"},{name:"Lucide React",desc:"Iconografía"},{name:"Google OAuth 2.0",desc:"Autenticación"},{name:"IndexedDB",desc:"Storage local"}].map(s=>e.jsxs("div",{className:"p-3 rounded-xl bg-bg-secondary border border-border text-center",children:[e.jsx("p",{className:"text-xs font-bold",children:s.name}),e.jsx("p",{className:"text-xs text-text-muted",children:s.desc})]},s.name))})]})]})]})}function O({label:o,value:l,badge:n}){return e.jsxs("div",{className:"flex justify-between items-center py-1.5 text-xs",children:[e.jsx("span",{className:"text-text-muted",children:o}),n?e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] font-medium ${n}`,children:l}):e.jsx("span",{className:"font-medium text-text-primary",children:l})]})}function H({label:o,value:l,color:n}){return e.jsxs("div",{className:"flex justify-between items-center py-1.5 text-xs",children:[e.jsx("span",{className:"text-text-muted",children:o}),e.jsx("span",{className:`font-mono font-bold ${n}`,children:l})]})}function K({name:o,status:l}){return e.jsxs("div",{className:"flex items-center justify-between py-2 text-xs",children:[e.jsx("span",{className:"font-medium",children:o}),l?e.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-400",children:[e.jsx(M,{size:12})," Listo"]}):e.jsxs("span",{className:"flex items-center gap-1.5 text-accent-yellow",children:[e.jsx(ue,{size:12})," Pendiente"]})]})}function T({id:o,label:l,color:n,accent:c,icon:u,active:i,onClick:r}){return e.jsxs("button",{onClick:r,className:`relative p-4 rounded-xl border transition-all cursor-pointer flex flex-col items-center gap-3 group
        ${i?"border-accent-blue bg-accent-blue/5 shadow-[0_0_15px_-3px_rgba(59,130,246,0.3)]":"border-border bg-bg-secondary hover:border-accent-blue/50 hover:bg-bg-card"}
      `,children:[e.jsxs("div",{className:"w-full h-16 rounded-lg mb-1 relative overflow-hidden border border-border/50 shadow-inner",style:{background:n},children:[e.jsx("div",{className:"absolute top-2 left-2 w-8 h-2 rounded bg-white/20"}),e.jsx("div",{className:"absolute top-6 left-2 w-12 h-2 rounded bg-white/10"}),e.jsx("div",{className:"absolute bottom-2 right-2 w-6 h-6 rounded-full flex items-center justify-center text-white",style:{background:c},children:e.jsx(u,{size:12})})]}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:`text-xs font-semibold block ${i?"text-text-primary":"text-text-secondary group-hover:text-text-primary"}`,children:l})}),i&&e.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-accent-blue rounded-full flex items-center justify-center text-white shadow-sm",children:e.jsx(M,{size:12,fill:"currentColor",className:"text-white"})})]})}export{Os as default};
